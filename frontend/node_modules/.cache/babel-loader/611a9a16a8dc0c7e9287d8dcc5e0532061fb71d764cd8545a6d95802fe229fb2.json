{"ast":null,"code":"import _objectSpread from\"/home/rob/.openclaw/workspace/campsite-crm/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useState}from'react';import axios from'axios';import'../styles/IntegrationHub.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const INITIAL_SETTINGS={chatgpt_enabled:false,workspace_name:'Campsite CRM',openai_api_key:'',openai_model:'gpt-4.1-mini',mcp_shared_secret:'',oauth_enabled:false,oauth_client_id:'',oauth_client_secret:'',oauth_redirect_uri:'',gmail_scan_enabled:false,gmail_account_email:'',gmail_access_token:'',gmail_scan_window_days:45,mcp_url:'',oauth_redirect_default:'',openai_key_configured:false,mcp_secret_configured:false,oauth_client_secret_configured:false,gmail_token_configured:false};function IntegrationHub(_ref){var _dataOpsStatus$auto_s,_dataOpsStatus$auto_s2,_dataOpsStatus$auto_s3,_dataOpsStatus$totals,_dataOpsStatus$totals2,_dataOpsStatus$totals3,_dataOpsStatus$totals4,_dataOpsStatus$totals5,_dataOpsStatus$totals6,_dataOpsStatus$totals7,_dataOpsStatus$totals8,_dataOpsStatus$totals9,_dataOpsStatus$totals0,_dataOpsStatus$auto_s4,_dataOpsStatus$auto_s5;let{onRefreshData,onRefreshTasks,onRefreshContacts,onRefreshWaitlist}=_ref;const[settings,setSettings]=useState(INITIAL_SETTINGS);const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[testing,setTesting]=useState(false);const[chatLoading,setChatLoading]=useState(false);const[chatInput,setChatInput]=useState('');const[includeContext,setIncludeContext]=useState(true);const[chatHistory,setChatHistory]=useState([]);const[scanningGmail,setScanningGmail]=useState(false);const[pendingScans,setPendingScans]=useState([]);const[approvingBatchId,setApprovingBatchId]=useState('');const[dataOpsStatus,setDataOpsStatus]=useState(null);const[dataOpsLoading,setDataOpsLoading]=useState(true);const[dataOpsAction,setDataOpsAction]=useState('');const loadSettings=async()=>{setLoading(true);try{const response=await axios.get('/api/integrations/chatgpt/settings');setSettings(prev=>_objectSpread(_objectSpread({},prev),response.data));}catch(error){console.error('Error loading integration settings:',error);alert('Unable to load integration settings right now');}finally{setLoading(false);}};const loadPendingScans=async()=>{try{const response=await axios.get('/api/integrations/chatgpt/gmail/scans/pending');setPendingScans(response.data||[]);}catch(error){console.error('Error loading pending scans:',error);}};const loadDataManagementStatus=async()=>{setDataOpsLoading(true);try{const response=await axios.get('/api/data-management/status');setDataOpsStatus(response.data||null);}catch(error){console.error('Error loading data management status:',error);setDataOpsStatus(null);}finally{setDataOpsLoading(false);}};useEffect(()=>{loadSettings();loadPendingScans();loadDataManagementStatus();},[]);const saveSettings=async()=>{setSaving(true);try{await axios.put('/api/integrations/chatgpt/settings',{chatgpt_enabled:settings.chatgpt_enabled,workspace_name:settings.workspace_name,openai_api_key:settings.openai_api_key,openai_model:settings.openai_model,mcp_shared_secret:settings.mcp_shared_secret,oauth_enabled:settings.oauth_enabled,oauth_client_id:settings.oauth_client_id,oauth_client_secret:settings.oauth_client_secret,oauth_redirect_uri:settings.oauth_redirect_uri,gmail_scan_enabled:settings.gmail_scan_enabled,gmail_account_email:settings.gmail_account_email,gmail_access_token:settings.gmail_access_token,gmail_scan_window_days:settings.gmail_scan_window_days});await loadSettings();alert('Integration settings saved');}catch(error){var _error$response,_error$response$data;console.error('Error saving integration settings:',error);alert(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Unable to save settings');}finally{setSaving(false);}};const testConnection=async()=>{setTesting(true);try{const response=await axios.post('/api/integrations/chatgpt/test');alert(\"Connection OK (\".concat(response.data.model,\"): \").concat(response.data.preview||'No preview'));}catch(error){var _error$response2,_error$response2$data;console.error('Error testing ChatGPT connection:',error);alert(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Connection test failed');}finally{setTesting(false);}};const askChatGpt=async()=>{const trimmed=chatInput.trim();if(!trimmed)return;const nextHistory=[...chatHistory,{role:'user',content:trimmed}];setChatHistory(nextHistory);setChatInput('');setChatLoading(true);try{const response=await axios.post('/api/chatgpt/chat',{message:trimmed,history:nextHistory,include_crm_context:includeContext});setChatHistory(prev=>[...prev,{role:'assistant',content:response.data.reply||''}]);if(onRefreshData)onRefreshData();if(onRefreshTasks)onRefreshTasks();}catch(error){console.error('Error querying chat endpoint:',error);setChatHistory(prev=>{var _error$response3,_error$response3$data;return[...prev,{role:'assistant',content:\"Error: \".concat(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||'Unable to reach ChatGPT endpoint.')}];});}finally{setChatLoading(false);}};const scanGmail=async()=>{setScanningGmail(true);try{var _response$data;const response=await axios.post('/api/integrations/chatgpt/gmail/scan',{scan_window_days:settings.gmail_scan_window_days});const found=((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.total_found)||0;if(found>0){alert(\"Scan complete. Found \".concat(found,\" pending updates to review.\"));}else{alert('Scan complete. No new updates found.');}await loadPendingScans();}catch(error){var _error$response4,_error$response4$data;console.error('Error scanning Gmail:',error);alert(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||'Failed to scan Gmail');}finally{setScanningGmail(false);}};const approveScan=async batchId=>{setApprovingBatchId(batchId);try{var _response$data2;const response=await axios.post(\"/api/integrations/chatgpt/gmail/scans/\".concat(batchId,\"/approve\"));alert(\"Approved. Applied \".concat(((_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.total_applied)||0,\" interactions.\"));await loadPendingScans();if(onRefreshContacts)onRefreshContacts();if(onRefreshData)onRefreshData();}catch(error){var _error$response5,_error$response5$data;console.error('Error approving scan:',error);alert(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.error)||'Failed to approve updates');}finally{setApprovingBatchId('');}};const oauthRedirect=useMemo(()=>settings.oauth_redirect_uri||settings.oauth_redirect_default||'-',[settings.oauth_redirect_uri,settings.oauth_redirect_default]);const runDataAction=async(actionKey,request)=>{setDataOpsAction(actionKey);try{const response=await request();await loadDataManagementStatus();if(onRefreshData)onRefreshData();if(onRefreshTasks)onRefreshTasks();if(onRefreshContacts)onRefreshContacts();if(onRefreshWaitlist)onRefreshWaitlist();return response;}finally{setDataOpsAction('');}};const saveAllDataNow=async()=>{try{var _response$data3;const response=await runDataAction('save',()=>axios.post('/api/data-management/save'));alert(\"Data snapshot saved: \".concat(((_response$data3=response.data)===null||_response$data3===void 0?void 0:_response$data3.backup_file)||'Saved'));}catch(error){var _error$response6,_error$response6$data,_error$response7,_error$response7$data;console.error('Error saving data snapshot:',error);alert(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.error)||((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.message)||'Failed to save data snapshot');}};const populateDummyData=async()=>{if(!window.confirm('Populate all CRM sections with dummy demo data? Existing dummy rows will be replaced.'))return;try{await runDataAction('populate',()=>axios.post('/api/data-management/dummy/populate'));alert('Dummy data populated across bookings, contracts, waitlist, tasks, and contacts.');}catch(error){var _error$response8,_error$response8$data;console.error('Error populating dummy data:',error);alert(((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.error)||'Failed to populate dummy data');}};const removeDummyData=async()=>{if(!window.confirm('Remove all dummy CRM data now? Real data will not be deleted.'))return;try{await runDataAction('remove',()=>axios.post('/api/data-management/dummy/remove'));alert('Dummy data removed.');}catch(error){var _error$response9,_error$response9$data;console.error('Error removing dummy data:',error);alert(((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.error)||'Failed to remove dummy data');}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u2699\\uFE0F ChatGPT + MCP Settings\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading integration settings...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"integration-grid\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u2699\\uFE0F ChatGPT + MCP Settings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"section-subtext\",children:\"Connect Campsite CRM to ChatGPT and enable Gmail interaction scanning.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"integration-status-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"OpenAI Key: \",settings.openai_key_configured?'Configured':'Missing']}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"Gmail Token: \",settings.gmail_token_configured?'Configured':'Missing']}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"MCP Secret: \",settings.mcp_secret_configured?'Configured':'Optional']}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"OAuth Secret: \",settings.oauth_client_secret_configured?'Configured':'Missing']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-grid\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"toggle-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:settings.chatgpt_enabled,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{chatgpt_enabled:e.target.checked}))}),\"Enable ChatGPT Integration\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Workspace Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:settings.workspace_name,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{workspace_name:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"OpenAI API Key\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:settings.openai_api_key,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{openai_api_key:e.target.value})),placeholder:\"sk-...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"OpenAI Model\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:settings.openai_model,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{openai_model:e.target.value})),placeholder:\"gpt-4.1-mini\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"toggle-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:settings.gmail_scan_enabled,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{gmail_scan_enabled:e.target.checked}))}),\"Enable Gmail Scan + Approval Flow\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Gmail Account Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:settings.gmail_account_email,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{gmail_account_email:e.target.value})),placeholder:\"ops@yourcampsite.com\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Gmail Access Token\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:settings.gmail_access_token,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{gmail_access_token:e.target.value})),placeholder:\"ya29....\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Gmail Scan Window (days)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:settings.gmail_scan_window_days,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{gmail_scan_window_days:parseInt(e.target.value,10)||1}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"MCP Shared Secret (Bearer token)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:settings.mcp_shared_secret,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{mcp_shared_secret:e.target.value})),placeholder:\"Optional but recommended\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"toggle-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:settings.oauth_enabled,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{oauth_enabled:e.target.checked}))}),\"Enable OAuth Metadata (for external bridge)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"OAuth Client ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:settings.oauth_client_id,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{oauth_client_id:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"OAuth Client Secret\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:settings.oauth_client_secret,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{oauth_client_secret:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"OAuth Redirect URI\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:settings.oauth_redirect_uri,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{oauth_redirect_uri:e.target.value})),placeholder:settings.oauth_redirect_default||''})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"button\",onClick:saveSettings,disabled:saving,children:saving?'Saving...':'Save Settings'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",type:\"button\",onClick:testConnection,disabled:testing,children:testing?'Testing...':'Test OpenAI Connection'})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDDC2\\uFE0F Data Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"section-subtext\",children:\"Auto-save snapshots run in the backend on a timer. Use these controls to save now and add/remove full dummy CRM data.\"}),dataOpsLoading?/*#__PURE__*/_jsx(\"p\",{className:\"chat-empty\",children:\"Loading data management status...\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"data-status-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"Auto-save every: \",(dataOpsStatus===null||dataOpsStatus===void 0?void 0:(_dataOpsStatus$auto_s=dataOpsStatus.auto_save)===null||_dataOpsStatus$auto_s===void 0?void 0:_dataOpsStatus$auto_s.interval_minutes)||'-',\" min\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"Last save: \",(dataOpsStatus===null||dataOpsStatus===void 0?void 0:(_dataOpsStatus$auto_s2=dataOpsStatus.auto_save)===null||_dataOpsStatus$auto_s2===void 0?void 0:_dataOpsStatus$auto_s2.last_save_at)||'Not yet']}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"Last mode: \",(dataOpsStatus===null||dataOpsStatus===void 0?void 0:(_dataOpsStatus$auto_s3=dataOpsStatus.auto_save)===null||_dataOpsStatus$auto_s3===void 0?void 0:_dataOpsStatus$auto_s3.last_save_type)||'-']}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"Bookings: \",(_dataOpsStatus$totals=dataOpsStatus===null||dataOpsStatus===void 0?void 0:(_dataOpsStatus$totals2=dataOpsStatus.totals)===null||_dataOpsStatus$totals2===void 0?void 0:_dataOpsStatus$totals2.bookings)!==null&&_dataOpsStatus$totals!==void 0?_dataOpsStatus$totals:0]}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"Contracts: \",(_dataOpsStatus$totals3=dataOpsStatus===null||dataOpsStatus===void 0?void 0:(_dataOpsStatus$totals4=dataOpsStatus.totals)===null||_dataOpsStatus$totals4===void 0?void 0:_dataOpsStatus$totals4.contracts)!==null&&_dataOpsStatus$totals3!==void 0?_dataOpsStatus$totals3:0]}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"Waitlist: \",(_dataOpsStatus$totals5=dataOpsStatus===null||dataOpsStatus===void 0?void 0:(_dataOpsStatus$totals6=dataOpsStatus.totals)===null||_dataOpsStatus$totals6===void 0?void 0:_dataOpsStatus$totals6.waitlist_entries)!==null&&_dataOpsStatus$totals5!==void 0?_dataOpsStatus$totals5:0]}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"Tasks: \",(_dataOpsStatus$totals7=dataOpsStatus===null||dataOpsStatus===void 0?void 0:(_dataOpsStatus$totals8=dataOpsStatus.totals)===null||_dataOpsStatus$totals8===void 0?void 0:_dataOpsStatus$totals8.tasks)!==null&&_dataOpsStatus$totals7!==void 0?_dataOpsStatus$totals7:0]}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"Contacts: \",(_dataOpsStatus$totals9=dataOpsStatus===null||dataOpsStatus===void 0?void 0:(_dataOpsStatus$totals0=dataOpsStatus.totals)===null||_dataOpsStatus$totals0===void 0?void 0:_dataOpsStatus$totals0.contacts)!==null&&_dataOpsStatus$totals9!==void 0?_dataOpsStatus$totals9:0]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"button\",onClick:saveAllDataNow,disabled:dataOpsAction!=='',children:dataOpsAction==='save'?'Saving...':'Save All Data Now'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",type:\"button\",onClick:populateDummyData,disabled:dataOpsAction!=='',children:dataOpsAction==='populate'?'Populating...':'Populate Dummy Data'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",type:\"button\",onClick:removeDummyData,disabled:dataOpsAction!=='',children:dataOpsAction==='remove'?'Removing...':'Remove Dummy Data'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",type:\"button\",onClick:loadDataManagementStatus,disabled:dataOpsAction!=='',children:\"Refresh Status\"})]}),dataOpsStatus!==null&&dataOpsStatus!==void 0&&(_dataOpsStatus$auto_s4=dataOpsStatus.auto_save)!==null&&_dataOpsStatus$auto_s4!==void 0&&_dataOpsStatus$auto_s4.last_save_path?/*#__PURE__*/_jsxs(\"p\",{className:\"section-subtext data-save-path\",children:[\"Latest backup: \",dataOpsStatus.auto_save.last_save_path]}):null,dataOpsStatus!==null&&dataOpsStatus!==void 0&&(_dataOpsStatus$auto_s5=dataOpsStatus.auto_save)!==null&&_dataOpsStatus$auto_s5!==void 0&&_dataOpsStatus$auto_s5.last_error?/*#__PURE__*/_jsxs(\"p\",{className:\"section-subtext data-save-error\",children:[\"Last auto-save error: \",dataOpsStatus.auto_save.last_error]}):null]}),/*#__PURE__*/_jsxs(\"section\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCEC Gmail Interaction Scan\"}),/*#__PURE__*/_jsx(\"p\",{className:\"section-subtext\",children:\"Scan recent Gmail messages, review pending interaction updates, then approve before applying to contacts.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"button\",onClick:scanGmail,disabled:scanningGmail,children:scanningGmail?'Scanning...':'Scan Gmail for Recent Interactions'})}),/*#__PURE__*/_jsx(\"div\",{className:\"scan-list\",children:pendingScans.length>0?pendingScans.map(batch=>{var _batch$items;return/*#__PURE__*/_jsxs(\"div\",{className:\"scan-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"scan-card-head\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\"Batch \",batch.id.slice(0,8)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Found \",batch.total_found,\" updates on \",batch.created_at]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary btn-small\",type:\"button\",onClick:()=>approveScan(batch.id),disabled:approvingBatchId===batch.id,children:approvingBatchId===batch.id?'Approving...':'Approve Updates'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"scan-items\",children:((_batch$items=batch.items)===null||_batch$items===void 0?void 0:_batch$items.length)>0?batch.items.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"scan-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:item.full_name||item.email}),/*#__PURE__*/_jsxs(\"span\",{children:[item.occurred_at||'-',\" \",item.direction?\"(\".concat(item.direction,\")\"):'']}),/*#__PURE__*/_jsx(\"p\",{children:item.summary})]},item.id)):/*#__PURE__*/_jsx(\"p\",{className:\"chat-empty\",children:\"No item preview available.\"})})]},batch.id);}):/*#__PURE__*/_jsx(\"p\",{className:\"chat-empty\",children:\"No pending scan updates right now.\"})})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83E\\uDDED Setup Instructions\"}),/*#__PURE__*/_jsxs(\"ol\",{className:\"instructions-list\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Save OpenAI key and enable ChatGPT integration in this page.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Enable Gmail scan and provide account email + access token.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Run the Gmail scan, then approve pending updates after review.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Use the MCP endpoint URL below in your MCP client or ChatGPT bridge.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"instruction-code\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"MCP URL\"}),/*#__PURE__*/_jsx(\"code\",{children:settings.mcp_url||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"instruction-code\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"OAuth Redirect (effective)\"}),/*#__PURE__*/_jsx(\"code\",{children:oauthRedirect})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"instruction-code\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Quick MCP initialize example\"}),/*#__PURE__*/_jsx(\"code\",{children:\"curl -X POST \".concat(settings.mcp_url||'http://localhost:5000/mcp',\" -H \\\"Content-Type: application/json\\\" -d '{\\\"jsonrpc\\\":\\\"2.0\\\",\\\"id\\\":1,\\\"method\\\":\\\"initialize\\\",\\\"params\\\":{}}'\")})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"card integration-chat-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCAC Ask ChatGPT Inside CRM\"}),/*#__PURE__*/_jsx(\"p\",{className:\"section-subtext\",children:\"This chat can include live CRM context (bookings, waitlist, tasks, summary).\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"toggle-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:includeContext,onChange:e=>setIncludeContext(e.target.checked)}),\"Include live CRM context in prompts\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-log\",children:chatHistory.length>0?chatHistory.map((msg,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"chat-msg \".concat(msg.role),children:[/*#__PURE__*/_jsx(\"strong\",{children:msg.role==='assistant'?'ChatGPT':'You'}),/*#__PURE__*/_jsx(\"p\",{children:msg.content})]},\"\".concat(msg.role,\"-\").concat(index))):/*#__PURE__*/_jsx(\"p\",{className:\"chat-empty\",children:\"No chat yet. Ask about bookings, occupancy, overdue balances, or task planning.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-input-row\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:chatInput,onChange:e=>setChatInput(e.target.value),placeholder:\"Example: What tasks should we prioritize this week based on overdue bookings and upcoming arrivals?\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"button\",onClick:askChatGpt,disabled:chatLoading,children:chatLoading?'Thinking...':'Ask ChatGPT'})]})]})]});}export default IntegrationHub;","map":{"version":3,"names":["React","useEffect","useMemo","useState","axios","jsx","_jsx","jsxs","_jsxs","INITIAL_SETTINGS","chatgpt_enabled","workspace_name","openai_api_key","openai_model","mcp_shared_secret","oauth_enabled","oauth_client_id","oauth_client_secret","oauth_redirect_uri","gmail_scan_enabled","gmail_account_email","gmail_access_token","gmail_scan_window_days","mcp_url","oauth_redirect_default","openai_key_configured","mcp_secret_configured","oauth_client_secret_configured","gmail_token_configured","IntegrationHub","_ref","_dataOpsStatus$auto_s","_dataOpsStatus$auto_s2","_dataOpsStatus$auto_s3","_dataOpsStatus$totals","_dataOpsStatus$totals2","_dataOpsStatus$totals3","_dataOpsStatus$totals4","_dataOpsStatus$totals5","_dataOpsStatus$totals6","_dataOpsStatus$totals7","_dataOpsStatus$totals8","_dataOpsStatus$totals9","_dataOpsStatus$totals0","_dataOpsStatus$auto_s4","_dataOpsStatus$auto_s5","onRefreshData","onRefreshTasks","onRefreshContacts","onRefreshWaitlist","settings","setSettings","loading","setLoading","saving","setSaving","testing","setTesting","chatLoading","setChatLoading","chatInput","setChatInput","includeContext","setIncludeContext","chatHistory","setChatHistory","scanningGmail","setScanningGmail","pendingScans","setPendingScans","approvingBatchId","setApprovingBatchId","dataOpsStatus","setDataOpsStatus","dataOpsLoading","setDataOpsLoading","dataOpsAction","setDataOpsAction","loadSettings","response","get","prev","_objectSpread","data","error","console","alert","loadPendingScans","loadDataManagementStatus","saveSettings","put","_error$response","_error$response$data","testConnection","post","concat","model","preview","_error$response2","_error$response2$data","askChatGpt","trimmed","trim","nextHistory","role","content","message","history","include_crm_context","reply","_error$response3","_error$response3$data","scanGmail","_response$data","scan_window_days","found","total_found","_error$response4","_error$response4$data","approveScan","batchId","_response$data2","total_applied","_error$response5","_error$response5$data","oauthRedirect","runDataAction","actionKey","request","saveAllDataNow","_response$data3","backup_file","_error$response6","_error$response6$data","_error$response7","_error$response7$data","populateDummyData","window","confirm","_error$response8","_error$response8$data","removeDummyData","_error$response9","_error$response9$data","className","children","type","checked","onChange","e","target","value","placeholder","min","parseInt","onClick","disabled","auto_save","interval_minutes","last_save_at","last_save_type","totals","bookings","contracts","waitlist_entries","tasks","contacts","last_save_path","last_error","length","map","batch","_batch$items","id","slice","created_at","items","item","full_name","email","occurred_at","direction","summary","msg","index"],"sources":["/home/rob/.openclaw/workspace/campsite-crm/frontend/src/components/IntegrationHub.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport axios from 'axios';\nimport '../styles/IntegrationHub.css';\n\nconst INITIAL_SETTINGS = {\n  chatgpt_enabled: false,\n  workspace_name: 'Campsite CRM',\n  openai_api_key: '',\n  openai_model: 'gpt-4.1-mini',\n  mcp_shared_secret: '',\n  oauth_enabled: false,\n  oauth_client_id: '',\n  oauth_client_secret: '',\n  oauth_redirect_uri: '',\n  gmail_scan_enabled: false,\n  gmail_account_email: '',\n  gmail_access_token: '',\n  gmail_scan_window_days: 45,\n  mcp_url: '',\n  oauth_redirect_default: '',\n  openai_key_configured: false,\n  mcp_secret_configured: false,\n  oauth_client_secret_configured: false,\n  gmail_token_configured: false\n};\n\nfunction IntegrationHub({ onRefreshData, onRefreshTasks, onRefreshContacts, onRefreshWaitlist }) {\n  const [settings, setSettings] = useState(INITIAL_SETTINGS);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [testing, setTesting] = useState(false);\n  const [chatLoading, setChatLoading] = useState(false);\n  const [chatInput, setChatInput] = useState('');\n  const [includeContext, setIncludeContext] = useState(true);\n  const [chatHistory, setChatHistory] = useState([]);\n  const [scanningGmail, setScanningGmail] = useState(false);\n  const [pendingScans, setPendingScans] = useState([]);\n  const [approvingBatchId, setApprovingBatchId] = useState('');\n  const [dataOpsStatus, setDataOpsStatus] = useState(null);\n  const [dataOpsLoading, setDataOpsLoading] = useState(true);\n  const [dataOpsAction, setDataOpsAction] = useState('');\n\n  const loadSettings = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get('/api/integrations/chatgpt/settings');\n      setSettings((prev) => ({ ...prev, ...response.data }));\n    } catch (error) {\n      console.error('Error loading integration settings:', error);\n      alert('Unable to load integration settings right now');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadPendingScans = async () => {\n    try {\n      const response = await axios.get('/api/integrations/chatgpt/gmail/scans/pending');\n      setPendingScans(response.data || []);\n    } catch (error) {\n      console.error('Error loading pending scans:', error);\n    }\n  };\n\n  const loadDataManagementStatus = async () => {\n    setDataOpsLoading(true);\n    try {\n      const response = await axios.get('/api/data-management/status');\n      setDataOpsStatus(response.data || null);\n    } catch (error) {\n      console.error('Error loading data management status:', error);\n      setDataOpsStatus(null);\n    } finally {\n      setDataOpsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadSettings();\n    loadPendingScans();\n    loadDataManagementStatus();\n  }, []);\n\n  const saveSettings = async () => {\n    setSaving(true);\n    try {\n      await axios.put('/api/integrations/chatgpt/settings', {\n        chatgpt_enabled: settings.chatgpt_enabled,\n        workspace_name: settings.workspace_name,\n        openai_api_key: settings.openai_api_key,\n        openai_model: settings.openai_model,\n        mcp_shared_secret: settings.mcp_shared_secret,\n        oauth_enabled: settings.oauth_enabled,\n        oauth_client_id: settings.oauth_client_id,\n        oauth_client_secret: settings.oauth_client_secret,\n        oauth_redirect_uri: settings.oauth_redirect_uri,\n        gmail_scan_enabled: settings.gmail_scan_enabled,\n        gmail_account_email: settings.gmail_account_email,\n        gmail_access_token: settings.gmail_access_token,\n        gmail_scan_window_days: settings.gmail_scan_window_days\n      });\n      await loadSettings();\n      alert('Integration settings saved');\n    } catch (error) {\n      console.error('Error saving integration settings:', error);\n      alert(error.response?.data?.error || 'Unable to save settings');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const testConnection = async () => {\n    setTesting(true);\n    try {\n      const response = await axios.post('/api/integrations/chatgpt/test');\n      alert(`Connection OK (${response.data.model}): ${response.data.preview || 'No preview'}`);\n    } catch (error) {\n      console.error('Error testing ChatGPT connection:', error);\n      alert(error.response?.data?.error || 'Connection test failed');\n    } finally {\n      setTesting(false);\n    }\n  };\n\n  const askChatGpt = async () => {\n    const trimmed = chatInput.trim();\n    if (!trimmed) return;\n\n    const nextHistory = [...chatHistory, { role: 'user', content: trimmed }];\n    setChatHistory(nextHistory);\n    setChatInput('');\n    setChatLoading(true);\n\n    try {\n      const response = await axios.post('/api/chatgpt/chat', {\n        message: trimmed,\n        history: nextHistory,\n        include_crm_context: includeContext\n      });\n\n      setChatHistory((prev) => [...prev, { role: 'assistant', content: response.data.reply || '' }]);\n\n      if (onRefreshData) onRefreshData();\n      if (onRefreshTasks) onRefreshTasks();\n    } catch (error) {\n      console.error('Error querying chat endpoint:', error);\n      setChatHistory((prev) => [\n        ...prev,\n        { role: 'assistant', content: `Error: ${error.response?.data?.error || 'Unable to reach ChatGPT endpoint.'}` }\n      ]);\n    } finally {\n      setChatLoading(false);\n    }\n  };\n\n  const scanGmail = async () => {\n    setScanningGmail(true);\n    try {\n      const response = await axios.post('/api/integrations/chatgpt/gmail/scan', {\n        scan_window_days: settings.gmail_scan_window_days\n      });\n\n      const found = response.data?.total_found || 0;\n      if (found > 0) {\n        alert(`Scan complete. Found ${found} pending updates to review.`);\n      } else {\n        alert('Scan complete. No new updates found.');\n      }\n\n      await loadPendingScans();\n    } catch (error) {\n      console.error('Error scanning Gmail:', error);\n      alert(error.response?.data?.error || 'Failed to scan Gmail');\n    } finally {\n      setScanningGmail(false);\n    }\n  };\n\n  const approveScan = async (batchId) => {\n    setApprovingBatchId(batchId);\n    try {\n      const response = await axios.post(`/api/integrations/chatgpt/gmail/scans/${batchId}/approve`);\n      alert(`Approved. Applied ${response.data?.total_applied || 0} interactions.`);\n      await loadPendingScans();\n      if (onRefreshContacts) onRefreshContacts();\n      if (onRefreshData) onRefreshData();\n    } catch (error) {\n      console.error('Error approving scan:', error);\n      alert(error.response?.data?.error || 'Failed to approve updates');\n    } finally {\n      setApprovingBatchId('');\n    }\n  };\n\n  const oauthRedirect = useMemo(\n    () => settings.oauth_redirect_uri || settings.oauth_redirect_default || '-',\n    [settings.oauth_redirect_uri, settings.oauth_redirect_default]\n  );\n\n  const runDataAction = async (actionKey, request) => {\n    setDataOpsAction(actionKey);\n    try {\n      const response = await request();\n      await loadDataManagementStatus();\n      if (onRefreshData) onRefreshData();\n      if (onRefreshTasks) onRefreshTasks();\n      if (onRefreshContacts) onRefreshContacts();\n      if (onRefreshWaitlist) onRefreshWaitlist();\n      return response;\n    } finally {\n      setDataOpsAction('');\n    }\n  };\n\n  const saveAllDataNow = async () => {\n    try {\n      const response = await runDataAction('save', () => axios.post('/api/data-management/save'));\n      alert(`Data snapshot saved: ${response.data?.backup_file || 'Saved'}`);\n    } catch (error) {\n      console.error('Error saving data snapshot:', error);\n      alert(error.response?.data?.error || error.response?.data?.message || 'Failed to save data snapshot');\n    }\n  };\n\n  const populateDummyData = async () => {\n    if (!window.confirm('Populate all CRM sections with dummy demo data? Existing dummy rows will be replaced.')) return;\n    try {\n      await runDataAction('populate', () => axios.post('/api/data-management/dummy/populate'));\n      alert('Dummy data populated across bookings, contracts, waitlist, tasks, and contacts.');\n    } catch (error) {\n      console.error('Error populating dummy data:', error);\n      alert(error.response?.data?.error || 'Failed to populate dummy data');\n    }\n  };\n\n  const removeDummyData = async () => {\n    if (!window.confirm('Remove all dummy CRM data now? Real data will not be deleted.')) return;\n    try {\n      await runDataAction('remove', () => axios.post('/api/data-management/dummy/remove'));\n      alert('Dummy data removed.');\n    } catch (error) {\n      console.error('Error removing dummy data:', error);\n      alert(error.response?.data?.error || 'Failed to remove dummy data');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"card\">\n        <h2>‚öôÔ∏è ChatGPT + MCP Settings</h2>\n        <p>Loading integration settings...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"integration-grid\">\n      <section className=\"card\">\n        <h2>‚öôÔ∏è ChatGPT + MCP Settings</h2>\n        <p className=\"section-subtext\">Connect Campsite CRM to ChatGPT and enable Gmail interaction scanning.</p>\n\n        <div className=\"integration-status-row\">\n          <div className=\"badge-pill\">OpenAI Key: {settings.openai_key_configured ? 'Configured' : 'Missing'}</div>\n          <div className=\"badge-pill\">Gmail Token: {settings.gmail_token_configured ? 'Configured' : 'Missing'}</div>\n          <div className=\"badge-pill\">MCP Secret: {settings.mcp_secret_configured ? 'Configured' : 'Optional'}</div>\n          <div className=\"badge-pill\">OAuth Secret: {settings.oauth_client_secret_configured ? 'Configured' : 'Missing'}</div>\n        </div>\n\n        <div className=\"settings-grid\">\n          <label className=\"toggle-row\">\n            <input\n              type=\"checkbox\"\n              checked={settings.chatgpt_enabled}\n              onChange={(e) => setSettings({ ...settings, chatgpt_enabled: e.target.checked })}\n            />\n            Enable ChatGPT Integration\n          </label>\n\n          <div className=\"form-group\">\n            <label>Workspace Name</label>\n            <input\n              type=\"text\"\n              value={settings.workspace_name}\n              onChange={(e) => setSettings({ ...settings, workspace_name: e.target.value })}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>OpenAI API Key</label>\n            <input\n              type=\"password\"\n              value={settings.openai_api_key}\n              onChange={(e) => setSettings({ ...settings, openai_api_key: e.target.value })}\n              placeholder=\"sk-...\"\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>OpenAI Model</label>\n            <input\n              type=\"text\"\n              value={settings.openai_model}\n              onChange={(e) => setSettings({ ...settings, openai_model: e.target.value })}\n              placeholder=\"gpt-4.1-mini\"\n            />\n          </div>\n\n          <label className=\"toggle-row\">\n            <input\n              type=\"checkbox\"\n              checked={settings.gmail_scan_enabled}\n              onChange={(e) => setSettings({ ...settings, gmail_scan_enabled: e.target.checked })}\n            />\n            Enable Gmail Scan + Approval Flow\n          </label>\n\n          <div className=\"form-group\">\n            <label>Gmail Account Email</label>\n            <input\n              type=\"text\"\n              value={settings.gmail_account_email}\n              onChange={(e) => setSettings({ ...settings, gmail_account_email: e.target.value })}\n              placeholder=\"ops@yourcampsite.com\"\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>Gmail Access Token</label>\n            <input\n              type=\"password\"\n              value={settings.gmail_access_token}\n              onChange={(e) => setSettings({ ...settings, gmail_access_token: e.target.value })}\n              placeholder=\"ya29....\"\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>Gmail Scan Window (days)</label>\n            <input\n              type=\"number\"\n              min=\"1\"\n              value={settings.gmail_scan_window_days}\n              onChange={(e) => setSettings({ ...settings, gmail_scan_window_days: parseInt(e.target.value, 10) || 1 })}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>MCP Shared Secret (Bearer token)</label>\n            <input\n              type=\"password\"\n              value={settings.mcp_shared_secret}\n              onChange={(e) => setSettings({ ...settings, mcp_shared_secret: e.target.value })}\n              placeholder=\"Optional but recommended\"\n            />\n          </div>\n\n          <label className=\"toggle-row\">\n            <input\n              type=\"checkbox\"\n              checked={settings.oauth_enabled}\n              onChange={(e) => setSettings({ ...settings, oauth_enabled: e.target.checked })}\n            />\n            Enable OAuth Metadata (for external bridge)\n          </label>\n\n          <div className=\"form-group\">\n            <label>OAuth Client ID</label>\n            <input\n              type=\"text\"\n              value={settings.oauth_client_id}\n              onChange={(e) => setSettings({ ...settings, oauth_client_id: e.target.value })}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>OAuth Client Secret</label>\n            <input\n              type=\"password\"\n              value={settings.oauth_client_secret}\n              onChange={(e) => setSettings({ ...settings, oauth_client_secret: e.target.value })}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>OAuth Redirect URI</label>\n            <input\n              type=\"text\"\n              value={settings.oauth_redirect_uri}\n              onChange={(e) => setSettings({ ...settings, oauth_redirect_uri: e.target.value })}\n              placeholder={settings.oauth_redirect_default || ''}\n            />\n          </div>\n        </div>\n\n        <div className=\"form-actions\">\n          <button className=\"btn btn-primary\" type=\"button\" onClick={saveSettings} disabled={saving}>\n            {saving ? 'Saving...' : 'Save Settings'}\n          </button>\n          <button className=\"btn btn-secondary\" type=\"button\" onClick={testConnection} disabled={testing}>\n            {testing ? 'Testing...' : 'Test OpenAI Connection'}\n          </button>\n        </div>\n      </section>\n\n      <section className=\"card\">\n        <h2>üóÇÔ∏è Data Management</h2>\n        <p className=\"section-subtext\">Auto-save snapshots run in the backend on a timer. Use these controls to save now and add/remove full dummy CRM data.</p>\n\n        {dataOpsLoading ? (\n          <p className=\"chat-empty\">Loading data management status...</p>\n        ) : (\n          <div className=\"data-status-grid\">\n            <div className=\"badge-pill\">Auto-save every: {dataOpsStatus?.auto_save?.interval_minutes || '-'} min</div>\n            <div className=\"badge-pill\">Last save: {dataOpsStatus?.auto_save?.last_save_at || 'Not yet'}</div>\n            <div className=\"badge-pill\">Last mode: {dataOpsStatus?.auto_save?.last_save_type || '-'}</div>\n            <div className=\"badge-pill\">Bookings: {dataOpsStatus?.totals?.bookings ?? 0}</div>\n            <div className=\"badge-pill\">Contracts: {dataOpsStatus?.totals?.contracts ?? 0}</div>\n            <div className=\"badge-pill\">Waitlist: {dataOpsStatus?.totals?.waitlist_entries ?? 0}</div>\n            <div className=\"badge-pill\">Tasks: {dataOpsStatus?.totals?.tasks ?? 0}</div>\n            <div className=\"badge-pill\">Contacts: {dataOpsStatus?.totals?.contacts ?? 0}</div>\n          </div>\n        )}\n\n        <div className=\"form-actions\">\n          <button className=\"btn btn-primary\" type=\"button\" onClick={saveAllDataNow} disabled={dataOpsAction !== ''}>\n            {dataOpsAction === 'save' ? 'Saving...' : 'Save All Data Now'}\n          </button>\n          <button className=\"btn btn-secondary\" type=\"button\" onClick={populateDummyData} disabled={dataOpsAction !== ''}>\n            {dataOpsAction === 'populate' ? 'Populating...' : 'Populate Dummy Data'}\n          </button>\n          <button className=\"btn btn-secondary\" type=\"button\" onClick={removeDummyData} disabled={dataOpsAction !== ''}>\n            {dataOpsAction === 'remove' ? 'Removing...' : 'Remove Dummy Data'}\n          </button>\n          <button className=\"btn btn-secondary\" type=\"button\" onClick={loadDataManagementStatus} disabled={dataOpsAction !== ''}>\n            Refresh Status\n          </button>\n        </div>\n\n        {dataOpsStatus?.auto_save?.last_save_path ? (\n          <p className=\"section-subtext data-save-path\">Latest backup: {dataOpsStatus.auto_save.last_save_path}</p>\n        ) : null}\n        {dataOpsStatus?.auto_save?.last_error ? (\n          <p className=\"section-subtext data-save-error\">Last auto-save error: {dataOpsStatus.auto_save.last_error}</p>\n        ) : null}\n      </section>\n\n      <section className=\"card\">\n        <h2>üì¨ Gmail Interaction Scan</h2>\n        <p className=\"section-subtext\">Scan recent Gmail messages, review pending interaction updates, then approve before applying to contacts.</p>\n\n        <div className=\"form-actions\">\n          <button className=\"btn btn-primary\" type=\"button\" onClick={scanGmail} disabled={scanningGmail}>\n            {scanningGmail ? 'Scanning...' : 'Scan Gmail for Recent Interactions'}\n          </button>\n        </div>\n\n        <div className=\"scan-list\">\n          {pendingScans.length > 0 ? pendingScans.map((batch) => (\n            <div key={batch.id} className=\"scan-card\">\n              <div className=\"scan-card-head\">\n                <div>\n                  <strong>Batch {batch.id.slice(0, 8)}</strong>\n                  <p>Found {batch.total_found} updates on {batch.created_at}</p>\n                </div>\n                <button\n                  className=\"btn btn-secondary btn-small\"\n                  type=\"button\"\n                  onClick={() => approveScan(batch.id)}\n                  disabled={approvingBatchId === batch.id}\n                >\n                  {approvingBatchId === batch.id ? 'Approving...' : 'Approve Updates'}\n                </button>\n              </div>\n              <div className=\"scan-items\">\n                {batch.items?.length > 0 ? batch.items.map((item) => (\n                  <div key={item.id} className=\"scan-item\">\n                    <strong>{item.full_name || item.email}</strong>\n                    <span>{item.occurred_at || '-'} {item.direction ? `(${item.direction})` : ''}</span>\n                    <p>{item.summary}</p>\n                  </div>\n                )) : <p className=\"chat-empty\">No item preview available.</p>}\n              </div>\n            </div>\n          )) : <p className=\"chat-empty\">No pending scan updates right now.</p>}\n        </div>\n      </section>\n\n      <section className=\"card\">\n        <h2>üß≠ Setup Instructions</h2>\n        <ol className=\"instructions-list\">\n          <li>Save OpenAI key and enable ChatGPT integration in this page.</li>\n          <li>Enable Gmail scan and provide account email + access token.</li>\n          <li>Run the Gmail scan, then approve pending updates after review.</li>\n          <li>Use the MCP endpoint URL below in your MCP client or ChatGPT bridge.</li>\n        </ol>\n\n        <div className=\"instruction-code\">\n          <strong>MCP URL</strong>\n          <code>{settings.mcp_url || '-'}</code>\n        </div>\n\n        <div className=\"instruction-code\">\n          <strong>OAuth Redirect (effective)</strong>\n          <code>{oauthRedirect}</code>\n        </div>\n\n        <div className=\"instruction-code\">\n          <strong>Quick MCP initialize example</strong>\n          <code>{`curl -X POST ${settings.mcp_url || 'http://localhost:5000/mcp'} -H \"Content-Type: application/json\" -d '{\"jsonrpc\":\"2.0\",\"id\":1,\"method\":\"initialize\",\"params\":{}}'`}</code>\n        </div>\n      </section>\n\n      <section className=\"card integration-chat-card\">\n        <h2>üí¨ Ask ChatGPT Inside CRM</h2>\n        <p className=\"section-subtext\">This chat can include live CRM context (bookings, waitlist, tasks, summary).</p>\n\n        <label className=\"toggle-row\">\n          <input\n            type=\"checkbox\"\n            checked={includeContext}\n            onChange={(e) => setIncludeContext(e.target.checked)}\n          />\n          Include live CRM context in prompts\n        </label>\n\n        <div className=\"chat-log\">\n          {chatHistory.length > 0 ? chatHistory.map((msg, index) => (\n            <div key={`${msg.role}-${index}`} className={`chat-msg ${msg.role}`}>\n              <strong>{msg.role === 'assistant' ? 'ChatGPT' : 'You'}</strong>\n              <p>{msg.content}</p>\n            </div>\n          )) : (\n            <p className=\"chat-empty\">No chat yet. Ask about bookings, occupancy, overdue balances, or task planning.</p>\n          )}\n        </div>\n\n        <div className=\"chat-input-row\">\n          <textarea\n            value={chatInput}\n            onChange={(e) => setChatInput(e.target.value)}\n            placeholder=\"Example: What tasks should we prioritize this week based on overdue bookings and upcoming arrivals?\"\n          />\n          <button className=\"btn btn-primary\" type=\"button\" onClick={askChatGpt} disabled={chatLoading}>\n            {chatLoading ? 'Thinking...' : 'Ask ChatGPT'}\n          </button>\n        </div>\n      </section>\n    </div>\n  );\n}\n\nexport default IntegrationHub;\n"],"mappings":"wIAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,OAAO,CAAEC,QAAQ,KAAQ,OAAO,CAC3D,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,8BAA8B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtC,KAAM,CAAAC,gBAAgB,CAAG,CACvBC,eAAe,CAAE,KAAK,CACtBC,cAAc,CAAE,cAAc,CAC9BC,cAAc,CAAE,EAAE,CAClBC,YAAY,CAAE,cAAc,CAC5BC,iBAAiB,CAAE,EAAE,CACrBC,aAAa,CAAE,KAAK,CACpBC,eAAe,CAAE,EAAE,CACnBC,mBAAmB,CAAE,EAAE,CACvBC,kBAAkB,CAAE,EAAE,CACtBC,kBAAkB,CAAE,KAAK,CACzBC,mBAAmB,CAAE,EAAE,CACvBC,kBAAkB,CAAE,EAAE,CACtBC,sBAAsB,CAAE,EAAE,CAC1BC,OAAO,CAAE,EAAE,CACXC,sBAAsB,CAAE,EAAE,CAC1BC,qBAAqB,CAAE,KAAK,CAC5BC,qBAAqB,CAAE,KAAK,CAC5BC,8BAA8B,CAAE,KAAK,CACrCC,sBAAsB,CAAE,KAC1B,CAAC,CAED,QAAS,CAAAC,cAAcA,CAAAC,IAAA,CAA0E,KAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,IAAzE,CAAEC,aAAa,CAAEC,cAAc,CAAEC,iBAAiB,CAAEC,iBAAkB,CAAC,CAAAnB,IAAA,CAC7F,KAAM,CAACoB,QAAQ,CAAEC,WAAW,CAAC,CAAGhD,QAAQ,CAACM,gBAAgB,CAAC,CAC1D,KAAM,CAAC2C,OAAO,CAAEC,UAAU,CAAC,CAAGlD,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACmD,MAAM,CAAEC,SAAS,CAAC,CAAGpD,QAAQ,CAAC,KAAK,CAAC,CAC3C,KAAM,CAACqD,OAAO,CAAEC,UAAU,CAAC,CAAGtD,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACuD,WAAW,CAAEC,cAAc,CAAC,CAAGxD,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACyD,SAAS,CAAEC,YAAY,CAAC,CAAG1D,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAAC2D,cAAc,CAAEC,iBAAiB,CAAC,CAAG5D,QAAQ,CAAC,IAAI,CAAC,CAC1D,KAAM,CAAC6D,WAAW,CAAEC,cAAc,CAAC,CAAG9D,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAAC+D,aAAa,CAAEC,gBAAgB,CAAC,CAAGhE,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAACiE,YAAY,CAAEC,eAAe,CAAC,CAAGlE,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACmE,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGpE,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAACqE,aAAa,CAAEC,gBAAgB,CAAC,CAAGtE,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAACuE,cAAc,CAAEC,iBAAiB,CAAC,CAAGxE,QAAQ,CAAC,IAAI,CAAC,CAC1D,KAAM,CAACyE,aAAa,CAAEC,gBAAgB,CAAC,CAAG1E,QAAQ,CAAC,EAAE,CAAC,CAEtD,KAAM,CAAA2E,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/BzB,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAA0B,QAAQ,CAAG,KAAM,CAAA3E,KAAK,CAAC4E,GAAG,CAAC,oCAAoC,CAAC,CACtE7B,WAAW,CAAE8B,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAWD,IAAI,EAAKF,QAAQ,CAACI,IAAI,CAAG,CAAC,CACxD,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,qCAAqC,CAAEA,KAAK,CAAC,CAC3DE,KAAK,CAAC,+CAA+C,CAAC,CACxD,CAAC,OAAS,CACRjC,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAkC,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CACF,KAAM,CAAAR,QAAQ,CAAG,KAAM,CAAA3E,KAAK,CAAC4E,GAAG,CAAC,+CAA+C,CAAC,CACjFX,eAAe,CAACU,QAAQ,CAACI,IAAI,EAAI,EAAE,CAAC,CACtC,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACtD,CACF,CAAC,CAED,KAAM,CAAAI,wBAAwB,CAAG,KAAAA,CAAA,GAAY,CAC3Cb,iBAAiB,CAAC,IAAI,CAAC,CACvB,GAAI,CACF,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAA3E,KAAK,CAAC4E,GAAG,CAAC,6BAA6B,CAAC,CAC/DP,gBAAgB,CAACM,QAAQ,CAACI,IAAI,EAAI,IAAI,CAAC,CACzC,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uCAAuC,CAAEA,KAAK,CAAC,CAC7DX,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAAC,OAAS,CACRE,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CACF,CAAC,CAED1E,SAAS,CAAC,IAAM,CACd6E,YAAY,CAAC,CAAC,CACdS,gBAAgB,CAAC,CAAC,CAClBC,wBAAwB,CAAC,CAAC,CAC5B,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/BlC,SAAS,CAAC,IAAI,CAAC,CACf,GAAI,CACF,KAAM,CAAAnD,KAAK,CAACsF,GAAG,CAAC,oCAAoC,CAAE,CACpDhF,eAAe,CAAEwC,QAAQ,CAACxC,eAAe,CACzCC,cAAc,CAAEuC,QAAQ,CAACvC,cAAc,CACvCC,cAAc,CAAEsC,QAAQ,CAACtC,cAAc,CACvCC,YAAY,CAAEqC,QAAQ,CAACrC,YAAY,CACnCC,iBAAiB,CAAEoC,QAAQ,CAACpC,iBAAiB,CAC7CC,aAAa,CAAEmC,QAAQ,CAACnC,aAAa,CACrCC,eAAe,CAAEkC,QAAQ,CAAClC,eAAe,CACzCC,mBAAmB,CAAEiC,QAAQ,CAACjC,mBAAmB,CACjDC,kBAAkB,CAAEgC,QAAQ,CAAChC,kBAAkB,CAC/CC,kBAAkB,CAAE+B,QAAQ,CAAC/B,kBAAkB,CAC/CC,mBAAmB,CAAE8B,QAAQ,CAAC9B,mBAAmB,CACjDC,kBAAkB,CAAE6B,QAAQ,CAAC7B,kBAAkB,CAC/CC,sBAAsB,CAAE4B,QAAQ,CAAC5B,sBACnC,CAAC,CAAC,CACF,KAAM,CAAAwD,YAAY,CAAC,CAAC,CACpBQ,KAAK,CAAC,4BAA4B,CAAC,CACrC,CAAE,MAAOF,KAAK,CAAE,KAAAO,eAAA,CAAAC,oBAAA,CACdP,OAAO,CAACD,KAAK,CAAC,oCAAoC,CAAEA,KAAK,CAAC,CAC1DE,KAAK,CAAC,EAAAK,eAAA,CAAAP,KAAK,CAACL,QAAQ,UAAAY,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBR,IAAI,UAAAS,oBAAA,iBAApBA,oBAAA,CAAsBR,KAAK,GAAI,yBAAyB,CAAC,CACjE,CAAC,OAAS,CACR7B,SAAS,CAAC,KAAK,CAAC,CAClB,CACF,CAAC,CAED,KAAM,CAAAsC,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjCpC,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAsB,QAAQ,CAAG,KAAM,CAAA3E,KAAK,CAAC0F,IAAI,CAAC,gCAAgC,CAAC,CACnER,KAAK,mBAAAS,MAAA,CAAmBhB,QAAQ,CAACI,IAAI,CAACa,KAAK,QAAAD,MAAA,CAAMhB,QAAQ,CAACI,IAAI,CAACc,OAAO,EAAI,YAAY,CAAE,CAAC,CAC3F,CAAE,MAAOb,KAAK,CAAE,KAAAc,gBAAA,CAAAC,qBAAA,CACdd,OAAO,CAACD,KAAK,CAAC,mCAAmC,CAAEA,KAAK,CAAC,CACzDE,KAAK,CAAC,EAAAY,gBAAA,CAAAd,KAAK,CAACL,QAAQ,UAAAmB,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBf,IAAI,UAAAgB,qBAAA,iBAApBA,qBAAA,CAAsBf,KAAK,GAAI,wBAAwB,CAAC,CAChE,CAAC,OAAS,CACR3B,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAA2C,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,KAAM,CAAAC,OAAO,CAAGzC,SAAS,CAAC0C,IAAI,CAAC,CAAC,CAChC,GAAI,CAACD,OAAO,CAAE,OAEd,KAAM,CAAAE,WAAW,CAAG,CAAC,GAAGvC,WAAW,CAAE,CAAEwC,IAAI,CAAE,MAAM,CAAEC,OAAO,CAAEJ,OAAQ,CAAC,CAAC,CACxEpC,cAAc,CAACsC,WAAW,CAAC,CAC3B1C,YAAY,CAAC,EAAE,CAAC,CAChBF,cAAc,CAAC,IAAI,CAAC,CAEpB,GAAI,CACF,KAAM,CAAAoB,QAAQ,CAAG,KAAM,CAAA3E,KAAK,CAAC0F,IAAI,CAAC,mBAAmB,CAAE,CACrDY,OAAO,CAAEL,OAAO,CAChBM,OAAO,CAAEJ,WAAW,CACpBK,mBAAmB,CAAE9C,cACvB,CAAC,CAAC,CAEFG,cAAc,CAAEgB,IAAI,EAAK,CAAC,GAAGA,IAAI,CAAE,CAAEuB,IAAI,CAAE,WAAW,CAAEC,OAAO,CAAE1B,QAAQ,CAACI,IAAI,CAAC0B,KAAK,EAAI,EAAG,CAAC,CAAC,CAAC,CAE9F,GAAI/D,aAAa,CAAEA,aAAa,CAAC,CAAC,CAClC,GAAIC,cAAc,CAAEA,cAAc,CAAC,CAAC,CACtC,CAAE,MAAOqC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACrDnB,cAAc,CAAEgB,IAAI,OAAA6B,gBAAA,CAAAC,qBAAA,OAAK,CACvB,GAAG9B,IAAI,CACP,CAAEuB,IAAI,CAAE,WAAW,CAAEC,OAAO,WAAAV,MAAA,CAAY,EAAAe,gBAAA,CAAA1B,KAAK,CAACL,QAAQ,UAAA+B,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgB3B,IAAI,UAAA4B,qBAAA,iBAApBA,qBAAA,CAAsB3B,KAAK,GAAI,mCAAmC,CAAG,CAAC,CAC/G,GAAC,CACJ,CAAC,OAAS,CACRzB,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAED,KAAM,CAAAqD,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B7C,gBAAgB,CAAC,IAAI,CAAC,CACtB,GAAI,KAAA8C,cAAA,CACF,KAAM,CAAAlC,QAAQ,CAAG,KAAM,CAAA3E,KAAK,CAAC0F,IAAI,CAAC,sCAAsC,CAAE,CACxEoB,gBAAgB,CAAEhE,QAAQ,CAAC5B,sBAC7B,CAAC,CAAC,CAEF,KAAM,CAAA6F,KAAK,CAAG,EAAAF,cAAA,CAAAlC,QAAQ,CAACI,IAAI,UAAA8B,cAAA,iBAAbA,cAAA,CAAeG,WAAW,GAAI,CAAC,CAC7C,GAAID,KAAK,CAAG,CAAC,CAAE,CACb7B,KAAK,yBAAAS,MAAA,CAAyBoB,KAAK,+BAA6B,CAAC,CACnE,CAAC,IAAM,CACL7B,KAAK,CAAC,sCAAsC,CAAC,CAC/C,CAEA,KAAM,CAAAC,gBAAgB,CAAC,CAAC,CAC1B,CAAE,MAAOH,KAAK,CAAE,KAAAiC,gBAAA,CAAAC,qBAAA,CACdjC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7CE,KAAK,CAAC,EAAA+B,gBAAA,CAAAjC,KAAK,CAACL,QAAQ,UAAAsC,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBlC,IAAI,UAAAmC,qBAAA,iBAApBA,qBAAA,CAAsBlC,KAAK,GAAI,sBAAsB,CAAC,CAC9D,CAAC,OAAS,CACRjB,gBAAgB,CAAC,KAAK,CAAC,CACzB,CACF,CAAC,CAED,KAAM,CAAAoD,WAAW,CAAG,KAAO,CAAAC,OAAO,EAAK,CACrCjD,mBAAmB,CAACiD,OAAO,CAAC,CAC5B,GAAI,KAAAC,eAAA,CACF,KAAM,CAAA1C,QAAQ,CAAG,KAAM,CAAA3E,KAAK,CAAC0F,IAAI,0CAAAC,MAAA,CAA0CyB,OAAO,YAAU,CAAC,CAC7FlC,KAAK,sBAAAS,MAAA,CAAsB,EAAA0B,eAAA,CAAA1C,QAAQ,CAACI,IAAI,UAAAsC,eAAA,iBAAbA,eAAA,CAAeC,aAAa,GAAI,CAAC,kBAAgB,CAAC,CAC7E,KAAM,CAAAnC,gBAAgB,CAAC,CAAC,CACxB,GAAIvC,iBAAiB,CAAEA,iBAAiB,CAAC,CAAC,CAC1C,GAAIF,aAAa,CAAEA,aAAa,CAAC,CAAC,CACpC,CAAE,MAAOsC,KAAK,CAAE,KAAAuC,gBAAA,CAAAC,qBAAA,CACdvC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7CE,KAAK,CAAC,EAAAqC,gBAAA,CAAAvC,KAAK,CAACL,QAAQ,UAAA4C,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBxC,IAAI,UAAAyC,qBAAA,iBAApBA,qBAAA,CAAsBxC,KAAK,GAAI,2BAA2B,CAAC,CACnE,CAAC,OAAS,CACRb,mBAAmB,CAAC,EAAE,CAAC,CACzB,CACF,CAAC,CAED,KAAM,CAAAsD,aAAa,CAAG3H,OAAO,CAC3B,IAAMgD,QAAQ,CAAChC,kBAAkB,EAAIgC,QAAQ,CAAC1B,sBAAsB,EAAI,GAAG,CAC3E,CAAC0B,QAAQ,CAAChC,kBAAkB,CAAEgC,QAAQ,CAAC1B,sBAAsB,CAC/D,CAAC,CAED,KAAM,CAAAsG,aAAa,CAAG,KAAAA,CAAOC,SAAS,CAAEC,OAAO,GAAK,CAClDnD,gBAAgB,CAACkD,SAAS,CAAC,CAC3B,GAAI,CACF,KAAM,CAAAhD,QAAQ,CAAG,KAAM,CAAAiD,OAAO,CAAC,CAAC,CAChC,KAAM,CAAAxC,wBAAwB,CAAC,CAAC,CAChC,GAAI1C,aAAa,CAAEA,aAAa,CAAC,CAAC,CAClC,GAAIC,cAAc,CAAEA,cAAc,CAAC,CAAC,CACpC,GAAIC,iBAAiB,CAAEA,iBAAiB,CAAC,CAAC,CAC1C,GAAIC,iBAAiB,CAAEA,iBAAiB,CAAC,CAAC,CAC1C,MAAO,CAAA8B,QAAQ,CACjB,CAAC,OAAS,CACRF,gBAAgB,CAAC,EAAE,CAAC,CACtB,CACF,CAAC,CAED,KAAM,CAAAoD,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,KAAAC,eAAA,CACF,KAAM,CAAAnD,QAAQ,CAAG,KAAM,CAAA+C,aAAa,CAAC,MAAM,CAAE,IAAM1H,KAAK,CAAC0F,IAAI,CAAC,2BAA2B,CAAC,CAAC,CAC3FR,KAAK,yBAAAS,MAAA,CAAyB,EAAAmC,eAAA,CAAAnD,QAAQ,CAACI,IAAI,UAAA+C,eAAA,iBAAbA,eAAA,CAAeC,WAAW,GAAI,OAAO,CAAE,CAAC,CACxE,CAAE,MAAO/C,KAAK,CAAE,KAAAgD,gBAAA,CAAAC,qBAAA,CAAAC,gBAAA,CAAAC,qBAAA,CACdlD,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACnDE,KAAK,CAAC,EAAA8C,gBAAA,CAAAhD,KAAK,CAACL,QAAQ,UAAAqD,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBjD,IAAI,UAAAkD,qBAAA,iBAApBA,qBAAA,CAAsBjD,KAAK,KAAAkD,gBAAA,CAAIlD,KAAK,CAACL,QAAQ,UAAAuD,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBnD,IAAI,UAAAoD,qBAAA,iBAApBA,qBAAA,CAAsB7B,OAAO,GAAI,8BAA8B,CAAC,CACvG,CACF,CAAC,CAED,KAAM,CAAA8B,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CAACC,MAAM,CAACC,OAAO,CAAC,uFAAuF,CAAC,CAAE,OAC9G,GAAI,CACF,KAAM,CAAAZ,aAAa,CAAC,UAAU,CAAE,IAAM1H,KAAK,CAAC0F,IAAI,CAAC,qCAAqC,CAAC,CAAC,CACxFR,KAAK,CAAC,iFAAiF,CAAC,CAC1F,CAAE,MAAOF,KAAK,CAAE,KAAAuD,gBAAA,CAAAC,qBAAA,CACdvD,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACpDE,KAAK,CAAC,EAAAqD,gBAAA,CAAAvD,KAAK,CAACL,QAAQ,UAAA4D,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBxD,IAAI,UAAAyD,qBAAA,iBAApBA,qBAAA,CAAsBxD,KAAK,GAAI,+BAA+B,CAAC,CACvE,CACF,CAAC,CAED,KAAM,CAAAyD,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CAACJ,MAAM,CAACC,OAAO,CAAC,+DAA+D,CAAC,CAAE,OACtF,GAAI,CACF,KAAM,CAAAZ,aAAa,CAAC,QAAQ,CAAE,IAAM1H,KAAK,CAAC0F,IAAI,CAAC,mCAAmC,CAAC,CAAC,CACpFR,KAAK,CAAC,qBAAqB,CAAC,CAC9B,CAAE,MAAOF,KAAK,CAAE,KAAA0D,gBAAA,CAAAC,qBAAA,CACd1D,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CAClDE,KAAK,CAAC,EAAAwD,gBAAA,CAAA1D,KAAK,CAACL,QAAQ,UAAA+D,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgB3D,IAAI,UAAA4D,qBAAA,iBAApBA,qBAAA,CAAsB3D,KAAK,GAAI,6BAA6B,CAAC,CACrE,CACF,CAAC,CAED,GAAIhC,OAAO,CAAE,CACX,mBACE5C,KAAA,QAAKwI,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB3I,IAAA,OAAA2I,QAAA,CAAI,qCAAyB,CAAI,CAAC,cAClC3I,IAAA,MAAA2I,QAAA,CAAG,iCAA+B,CAAG,CAAC,EACnC,CAAC,CAEV,CAEA,mBACEzI,KAAA,QAAKwI,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BzI,KAAA,YAASwI,SAAS,CAAC,MAAM,CAAAC,QAAA,eACvB3I,IAAA,OAAA2I,QAAA,CAAI,qCAAyB,CAAI,CAAC,cAClC3I,IAAA,MAAG0I,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,wEAAsE,CAAG,CAAC,cAEzGzI,KAAA,QAAKwI,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrCzI,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,cAAY,CAAC/F,QAAQ,CAACzB,qBAAqB,CAAG,YAAY,CAAG,SAAS,EAAM,CAAC,cACzGjB,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,eAAa,CAAC/F,QAAQ,CAACtB,sBAAsB,CAAG,YAAY,CAAG,SAAS,EAAM,CAAC,cAC3GpB,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,cAAY,CAAC/F,QAAQ,CAACxB,qBAAqB,CAAG,YAAY,CAAG,UAAU,EAAM,CAAC,cAC1GlB,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,gBAAc,CAAC/F,QAAQ,CAACvB,8BAA8B,CAAG,YAAY,CAAG,SAAS,EAAM,CAAC,EACjH,CAAC,cAENnB,KAAA,QAAKwI,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BzI,KAAA,UAAOwI,SAAS,CAAC,YAAY,CAAAC,QAAA,eAC3B3I,IAAA,UACE4I,IAAI,CAAC,UAAU,CACfC,OAAO,CAAEjG,QAAQ,CAACxC,eAAgB,CAClC0I,QAAQ,CAAGC,CAAC,EAAKlG,WAAW,CAAA+B,aAAA,CAAAA,aAAA,IAAMhC,QAAQ,MAAExC,eAAe,CAAE2I,CAAC,CAACC,MAAM,CAACH,OAAO,EAAE,CAAE,CAClF,CAAC,6BAEJ,EAAO,CAAC,cAER3I,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB3I,IAAA,UAAA2I,QAAA,CAAO,gBAAc,CAAO,CAAC,cAC7B3I,IAAA,UACE4I,IAAI,CAAC,MAAM,CACXK,KAAK,CAAErG,QAAQ,CAACvC,cAAe,CAC/ByI,QAAQ,CAAGC,CAAC,EAAKlG,WAAW,CAAA+B,aAAA,CAAAA,aAAA,IAAMhC,QAAQ,MAAEvC,cAAc,CAAE0I,CAAC,CAACC,MAAM,CAACC,KAAK,EAAE,CAAE,CAC/E,CAAC,EACC,CAAC,cAEN/I,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB3I,IAAA,UAAA2I,QAAA,CAAO,gBAAc,CAAO,CAAC,cAC7B3I,IAAA,UACE4I,IAAI,CAAC,UAAU,CACfK,KAAK,CAAErG,QAAQ,CAACtC,cAAe,CAC/BwI,QAAQ,CAAGC,CAAC,EAAKlG,WAAW,CAAA+B,aAAA,CAAAA,aAAA,IAAMhC,QAAQ,MAAEtC,cAAc,CAAEyI,CAAC,CAACC,MAAM,CAACC,KAAK,EAAE,CAAE,CAC9EC,WAAW,CAAC,QAAQ,CACrB,CAAC,EACC,CAAC,cAENhJ,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB3I,IAAA,UAAA2I,QAAA,CAAO,cAAY,CAAO,CAAC,cAC3B3I,IAAA,UACE4I,IAAI,CAAC,MAAM,CACXK,KAAK,CAAErG,QAAQ,CAACrC,YAAa,CAC7BuI,QAAQ,CAAGC,CAAC,EAAKlG,WAAW,CAAA+B,aAAA,CAAAA,aAAA,IAAMhC,QAAQ,MAAErC,YAAY,CAAEwI,CAAC,CAACC,MAAM,CAACC,KAAK,EAAE,CAAE,CAC5EC,WAAW,CAAC,cAAc,CAC3B,CAAC,EACC,CAAC,cAENhJ,KAAA,UAAOwI,SAAS,CAAC,YAAY,CAAAC,QAAA,eAC3B3I,IAAA,UACE4I,IAAI,CAAC,UAAU,CACfC,OAAO,CAAEjG,QAAQ,CAAC/B,kBAAmB,CACrCiI,QAAQ,CAAGC,CAAC,EAAKlG,WAAW,CAAA+B,aAAA,CAAAA,aAAA,IAAMhC,QAAQ,MAAE/B,kBAAkB,CAAEkI,CAAC,CAACC,MAAM,CAACH,OAAO,EAAE,CAAE,CACrF,CAAC,oCAEJ,EAAO,CAAC,cAER3I,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB3I,IAAA,UAAA2I,QAAA,CAAO,qBAAmB,CAAO,CAAC,cAClC3I,IAAA,UACE4I,IAAI,CAAC,MAAM,CACXK,KAAK,CAAErG,QAAQ,CAAC9B,mBAAoB,CACpCgI,QAAQ,CAAGC,CAAC,EAAKlG,WAAW,CAAA+B,aAAA,CAAAA,aAAA,IAAMhC,QAAQ,MAAE9B,mBAAmB,CAAEiI,CAAC,CAACC,MAAM,CAACC,KAAK,EAAE,CAAE,CACnFC,WAAW,CAAC,sBAAsB,CACnC,CAAC,EACC,CAAC,cAENhJ,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB3I,IAAA,UAAA2I,QAAA,CAAO,oBAAkB,CAAO,CAAC,cACjC3I,IAAA,UACE4I,IAAI,CAAC,UAAU,CACfK,KAAK,CAAErG,QAAQ,CAAC7B,kBAAmB,CACnC+H,QAAQ,CAAGC,CAAC,EAAKlG,WAAW,CAAA+B,aAAA,CAAAA,aAAA,IAAMhC,QAAQ,MAAE7B,kBAAkB,CAAEgI,CAAC,CAACC,MAAM,CAACC,KAAK,EAAE,CAAE,CAClFC,WAAW,CAAC,UAAU,CACvB,CAAC,EACC,CAAC,cAENhJ,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB3I,IAAA,UAAA2I,QAAA,CAAO,0BAAwB,CAAO,CAAC,cACvC3I,IAAA,UACE4I,IAAI,CAAC,QAAQ,CACbO,GAAG,CAAC,GAAG,CACPF,KAAK,CAAErG,QAAQ,CAAC5B,sBAAuB,CACvC8H,QAAQ,CAAGC,CAAC,EAAKlG,WAAW,CAAA+B,aAAA,CAAAA,aAAA,IAAMhC,QAAQ,MAAE5B,sBAAsB,CAAEoI,QAAQ,CAACL,CAAC,CAACC,MAAM,CAACC,KAAK,CAAE,EAAE,CAAC,EAAI,CAAC,EAAE,CAAE,CAC1G,CAAC,EACC,CAAC,cAEN/I,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB3I,IAAA,UAAA2I,QAAA,CAAO,kCAAgC,CAAO,CAAC,cAC/C3I,IAAA,UACE4I,IAAI,CAAC,UAAU,CACfK,KAAK,CAAErG,QAAQ,CAACpC,iBAAkB,CAClCsI,QAAQ,CAAGC,CAAC,EAAKlG,WAAW,CAAA+B,aAAA,CAAAA,aAAA,IAAMhC,QAAQ,MAAEpC,iBAAiB,CAAEuI,CAAC,CAACC,MAAM,CAACC,KAAK,EAAE,CAAE,CACjFC,WAAW,CAAC,0BAA0B,CACvC,CAAC,EACC,CAAC,cAENhJ,KAAA,UAAOwI,SAAS,CAAC,YAAY,CAAAC,QAAA,eAC3B3I,IAAA,UACE4I,IAAI,CAAC,UAAU,CACfC,OAAO,CAAEjG,QAAQ,CAACnC,aAAc,CAChCqI,QAAQ,CAAGC,CAAC,EAAKlG,WAAW,CAAA+B,aAAA,CAAAA,aAAA,IAAMhC,QAAQ,MAAEnC,aAAa,CAAEsI,CAAC,CAACC,MAAM,CAACH,OAAO,EAAE,CAAE,CAChF,CAAC,8CAEJ,EAAO,CAAC,cAER3I,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB3I,IAAA,UAAA2I,QAAA,CAAO,iBAAe,CAAO,CAAC,cAC9B3I,IAAA,UACE4I,IAAI,CAAC,MAAM,CACXK,KAAK,CAAErG,QAAQ,CAAClC,eAAgB,CAChCoI,QAAQ,CAAGC,CAAC,EAAKlG,WAAW,CAAA+B,aAAA,CAAAA,aAAA,IAAMhC,QAAQ,MAAElC,eAAe,CAAEqI,CAAC,CAACC,MAAM,CAACC,KAAK,EAAE,CAAE,CAChF,CAAC,EACC,CAAC,cAEN/I,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB3I,IAAA,UAAA2I,QAAA,CAAO,qBAAmB,CAAO,CAAC,cAClC3I,IAAA,UACE4I,IAAI,CAAC,UAAU,CACfK,KAAK,CAAErG,QAAQ,CAACjC,mBAAoB,CACpCmI,QAAQ,CAAGC,CAAC,EAAKlG,WAAW,CAAA+B,aAAA,CAAAA,aAAA,IAAMhC,QAAQ,MAAEjC,mBAAmB,CAAEoI,CAAC,CAACC,MAAM,CAACC,KAAK,EAAE,CAAE,CACpF,CAAC,EACC,CAAC,cAEN/I,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB3I,IAAA,UAAA2I,QAAA,CAAO,oBAAkB,CAAO,CAAC,cACjC3I,IAAA,UACE4I,IAAI,CAAC,MAAM,CACXK,KAAK,CAAErG,QAAQ,CAAChC,kBAAmB,CACnCkI,QAAQ,CAAGC,CAAC,EAAKlG,WAAW,CAAA+B,aAAA,CAAAA,aAAA,IAAMhC,QAAQ,MAAEhC,kBAAkB,CAAEmI,CAAC,CAACC,MAAM,CAACC,KAAK,EAAE,CAAE,CAClFC,WAAW,CAAEtG,QAAQ,CAAC1B,sBAAsB,EAAI,EAAG,CACpD,CAAC,EACC,CAAC,EACH,CAAC,cAENhB,KAAA,QAAKwI,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3B3I,IAAA,WAAQ0I,SAAS,CAAC,iBAAiB,CAACE,IAAI,CAAC,QAAQ,CAACS,OAAO,CAAElE,YAAa,CAACmE,QAAQ,CAAEtG,MAAO,CAAA2F,QAAA,CACvF3F,MAAM,CAAG,WAAW,CAAG,eAAe,CACjC,CAAC,cACThD,IAAA,WAAQ0I,SAAS,CAAC,mBAAmB,CAACE,IAAI,CAAC,QAAQ,CAACS,OAAO,CAAE9D,cAAe,CAAC+D,QAAQ,CAAEpG,OAAQ,CAAAyF,QAAA,CAC5FzF,OAAO,CAAG,YAAY,CAAG,wBAAwB,CAC5C,CAAC,EACN,CAAC,EACC,CAAC,cAEVhD,KAAA,YAASwI,SAAS,CAAC,MAAM,CAAAC,QAAA,eACvB3I,IAAA,OAAA2I,QAAA,CAAI,oCAAmB,CAAI,CAAC,cAC5B3I,IAAA,MAAG0I,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,uHAAqH,CAAG,CAAC,CAEvJvE,cAAc,cACbpE,IAAA,MAAG0I,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,mCAAiC,CAAG,CAAC,cAE/DzI,KAAA,QAAKwI,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BzI,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,mBAAiB,CAAC,CAAAzE,aAAa,SAAbA,aAAa,kBAAAzC,qBAAA,CAAbyC,aAAa,CAAEqF,SAAS,UAAA9H,qBAAA,iBAAxBA,qBAAA,CAA0B+H,gBAAgB,GAAI,GAAG,CAAC,MAAI,EAAK,CAAC,cAC1GtJ,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,aAAW,CAAC,CAAAzE,aAAa,SAAbA,aAAa,kBAAAxC,sBAAA,CAAbwC,aAAa,CAAEqF,SAAS,UAAA7H,sBAAA,iBAAxBA,sBAAA,CAA0B+H,YAAY,GAAI,SAAS,EAAM,CAAC,cAClGvJ,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,aAAW,CAAC,CAAAzE,aAAa,SAAbA,aAAa,kBAAAvC,sBAAA,CAAbuC,aAAa,CAAEqF,SAAS,UAAA5H,sBAAA,iBAAxBA,sBAAA,CAA0B+H,cAAc,GAAI,GAAG,EAAM,CAAC,cAC9FxJ,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,YAAU,EAAA/G,qBAAA,CAACsC,aAAa,SAAbA,aAAa,kBAAArC,sBAAA,CAAbqC,aAAa,CAAEyF,MAAM,UAAA9H,sBAAA,iBAArBA,sBAAA,CAAuB+H,QAAQ,UAAAhI,qBAAA,UAAAA,qBAAA,CAAI,CAAC,EAAM,CAAC,cAClF1B,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,aAAW,EAAA7G,sBAAA,CAACoC,aAAa,SAAbA,aAAa,kBAAAnC,sBAAA,CAAbmC,aAAa,CAAEyF,MAAM,UAAA5H,sBAAA,iBAArBA,sBAAA,CAAuB8H,SAAS,UAAA/H,sBAAA,UAAAA,sBAAA,CAAI,CAAC,EAAM,CAAC,cACpF5B,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,YAAU,EAAA3G,sBAAA,CAACkC,aAAa,SAAbA,aAAa,kBAAAjC,sBAAA,CAAbiC,aAAa,CAAEyF,MAAM,UAAA1H,sBAAA,iBAArBA,sBAAA,CAAuB6H,gBAAgB,UAAA9H,sBAAA,UAAAA,sBAAA,CAAI,CAAC,EAAM,CAAC,cAC1F9B,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,SAAO,EAAAzG,sBAAA,CAACgC,aAAa,SAAbA,aAAa,kBAAA/B,sBAAA,CAAb+B,aAAa,CAAEyF,MAAM,UAAAxH,sBAAA,iBAArBA,sBAAA,CAAuB4H,KAAK,UAAA7H,sBAAA,UAAAA,sBAAA,CAAI,CAAC,EAAM,CAAC,cAC5EhC,KAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,YAAU,EAAAvG,sBAAA,CAAC8B,aAAa,SAAbA,aAAa,kBAAA7B,sBAAA,CAAb6B,aAAa,CAAEyF,MAAM,UAAAtH,sBAAA,iBAArBA,sBAAA,CAAuB2H,QAAQ,UAAA5H,sBAAA,UAAAA,sBAAA,CAAI,CAAC,EAAM,CAAC,EAC/E,CACN,cAEDlC,KAAA,QAAKwI,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3B3I,IAAA,WAAQ0I,SAAS,CAAC,iBAAiB,CAACE,IAAI,CAAC,QAAQ,CAACS,OAAO,CAAE1B,cAAe,CAAC2B,QAAQ,CAAEhF,aAAa,GAAK,EAAG,CAAAqE,QAAA,CACvGrE,aAAa,GAAK,MAAM,CAAG,WAAW,CAAG,mBAAmB,CACvD,CAAC,cACTtE,IAAA,WAAQ0I,SAAS,CAAC,mBAAmB,CAACE,IAAI,CAAC,QAAQ,CAACS,OAAO,CAAEnB,iBAAkB,CAACoB,QAAQ,CAAEhF,aAAa,GAAK,EAAG,CAAAqE,QAAA,CAC5GrE,aAAa,GAAK,UAAU,CAAG,eAAe,CAAG,qBAAqB,CACjE,CAAC,cACTtE,IAAA,WAAQ0I,SAAS,CAAC,mBAAmB,CAACE,IAAI,CAAC,QAAQ,CAACS,OAAO,CAAEd,eAAgB,CAACe,QAAQ,CAAEhF,aAAa,GAAK,EAAG,CAAAqE,QAAA,CAC1GrE,aAAa,GAAK,QAAQ,CAAG,aAAa,CAAG,mBAAmB,CAC3D,CAAC,cACTtE,IAAA,WAAQ0I,SAAS,CAAC,mBAAmB,CAACE,IAAI,CAAC,QAAQ,CAACS,OAAO,CAAEnE,wBAAyB,CAACoE,QAAQ,CAAEhF,aAAa,GAAK,EAAG,CAAAqE,QAAA,CAAC,gBAEvH,CAAQ,CAAC,EACN,CAAC,CAELzE,aAAa,SAAbA,aAAa,YAAA5B,sBAAA,CAAb4B,aAAa,CAAEqF,SAAS,UAAAjH,sBAAA,WAAxBA,sBAAA,CAA0B2H,cAAc,cACvC/J,KAAA,MAAGwI,SAAS,CAAC,gCAAgC,CAAAC,QAAA,EAAC,iBAAe,CAACzE,aAAa,CAACqF,SAAS,CAACU,cAAc,EAAI,CAAC,CACvG,IAAI,CACP/F,aAAa,SAAbA,aAAa,YAAA3B,sBAAA,CAAb2B,aAAa,CAAEqF,SAAS,UAAAhH,sBAAA,WAAxBA,sBAAA,CAA0B2H,UAAU,cACnChK,KAAA,MAAGwI,SAAS,CAAC,iCAAiC,CAAAC,QAAA,EAAC,wBAAsB,CAACzE,aAAa,CAACqF,SAAS,CAACW,UAAU,EAAI,CAAC,CAC3G,IAAI,EACD,CAAC,cAEVhK,KAAA,YAASwI,SAAS,CAAC,MAAM,CAAAC,QAAA,eACvB3I,IAAA,OAAA2I,QAAA,CAAI,qCAAyB,CAAI,CAAC,cAClC3I,IAAA,MAAG0I,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,2GAAyG,CAAG,CAAC,cAE5I3I,IAAA,QAAK0I,SAAS,CAAC,cAAc,CAAAC,QAAA,cAC3B3I,IAAA,WAAQ0I,SAAS,CAAC,iBAAiB,CAACE,IAAI,CAAC,QAAQ,CAACS,OAAO,CAAE3C,SAAU,CAAC4C,QAAQ,CAAE1F,aAAc,CAAA+E,QAAA,CAC3F/E,aAAa,CAAG,aAAa,CAAG,oCAAoC,CAC/D,CAAC,CACN,CAAC,cAEN5D,IAAA,QAAK0I,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvB7E,YAAY,CAACqG,MAAM,CAAG,CAAC,CAAGrG,YAAY,CAACsG,GAAG,CAAEC,KAAK,OAAAC,YAAA,oBAChDpK,KAAA,QAAoBwI,SAAS,CAAC,WAAW,CAAAC,QAAA,eACvCzI,KAAA,QAAKwI,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BzI,KAAA,QAAAyI,QAAA,eACEzI,KAAA,WAAAyI,QAAA,EAAQ,QAAM,CAAC0B,KAAK,CAACE,EAAE,CAACC,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,EAAS,CAAC,cAC7CtK,KAAA,MAAAyI,QAAA,EAAG,QAAM,CAAC0B,KAAK,CAACvD,WAAW,CAAC,cAAY,CAACuD,KAAK,CAACI,UAAU,EAAI,CAAC,EAC3D,CAAC,cACNzK,IAAA,WACE0I,SAAS,CAAC,6BAA6B,CACvCE,IAAI,CAAC,QAAQ,CACbS,OAAO,CAAEA,CAAA,GAAMpC,WAAW,CAACoD,KAAK,CAACE,EAAE,CAAE,CACrCjB,QAAQ,CAAEtF,gBAAgB,GAAKqG,KAAK,CAACE,EAAG,CAAA5B,QAAA,CAEvC3E,gBAAgB,GAAKqG,KAAK,CAACE,EAAE,CAAG,cAAc,CAAG,iBAAiB,CAC7D,CAAC,EACN,CAAC,cACNvK,IAAA,QAAK0I,SAAS,CAAC,YAAY,CAAAC,QAAA,CACxB,EAAA2B,YAAA,CAAAD,KAAK,CAACK,KAAK,UAAAJ,YAAA,iBAAXA,YAAA,CAAaH,MAAM,EAAG,CAAC,CAAGE,KAAK,CAACK,KAAK,CAACN,GAAG,CAAEO,IAAI,eAC9CzK,KAAA,QAAmBwI,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtC3I,IAAA,WAAA2I,QAAA,CAASgC,IAAI,CAACC,SAAS,EAAID,IAAI,CAACE,KAAK,CAAS,CAAC,cAC/C3K,KAAA,SAAAyI,QAAA,EAAOgC,IAAI,CAACG,WAAW,EAAI,GAAG,CAAC,GAAC,CAACH,IAAI,CAACI,SAAS,KAAAtF,MAAA,CAAOkF,IAAI,CAACI,SAAS,MAAM,EAAE,EAAO,CAAC,cACpF/K,IAAA,MAAA2I,QAAA,CAAIgC,IAAI,CAACK,OAAO,CAAI,CAAC,GAHbL,IAAI,CAACJ,EAIV,CACN,CAAC,cAAGvK,IAAA,MAAG0I,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,4BAA0B,CAAG,CAAC,CAC1D,CAAC,GAvBE0B,KAAK,CAACE,EAwBX,CAAC,EACP,CAAC,cAAGvK,IAAA,MAAG0I,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,oCAAkC,CAAG,CAAC,CAClE,CAAC,EACC,CAAC,cAEVzI,KAAA,YAASwI,SAAS,CAAC,MAAM,CAAAC,QAAA,eACvB3I,IAAA,OAAA2I,QAAA,CAAI,iCAAqB,CAAI,CAAC,cAC9BzI,KAAA,OAAIwI,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAC/B3I,IAAA,OAAA2I,QAAA,CAAI,8DAA4D,CAAI,CAAC,cACrE3I,IAAA,OAAA2I,QAAA,CAAI,6DAA2D,CAAI,CAAC,cACpE3I,IAAA,OAAA2I,QAAA,CAAI,gEAA8D,CAAI,CAAC,cACvE3I,IAAA,OAAA2I,QAAA,CAAI,sEAAoE,CAAI,CAAC,EAC3E,CAAC,cAELzI,KAAA,QAAKwI,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/B3I,IAAA,WAAA2I,QAAA,CAAQ,SAAO,CAAQ,CAAC,cACxB3I,IAAA,SAAA2I,QAAA,CAAO/F,QAAQ,CAAC3B,OAAO,EAAI,GAAG,CAAO,CAAC,EACnC,CAAC,cAENf,KAAA,QAAKwI,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/B3I,IAAA,WAAA2I,QAAA,CAAQ,4BAA0B,CAAQ,CAAC,cAC3C3I,IAAA,SAAA2I,QAAA,CAAOpB,aAAa,CAAO,CAAC,EACzB,CAAC,cAENrH,KAAA,QAAKwI,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/B3I,IAAA,WAAA2I,QAAA,CAAQ,8BAA4B,CAAQ,CAAC,cAC7C3I,IAAA,SAAA2I,QAAA,iBAAAlD,MAAA,CAAuB7C,QAAQ,CAAC3B,OAAO,EAAI,2BAA2B,uHAA6G,CAAC,EACjL,CAAC,EACC,CAAC,cAEVf,KAAA,YAASwI,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eAC7C3I,IAAA,OAAA2I,QAAA,CAAI,qCAAyB,CAAI,CAAC,cAClC3I,IAAA,MAAG0I,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,8EAA4E,CAAG,CAAC,cAE/GzI,KAAA,UAAOwI,SAAS,CAAC,YAAY,CAAAC,QAAA,eAC3B3I,IAAA,UACE4I,IAAI,CAAC,UAAU,CACfC,OAAO,CAAErF,cAAe,CACxBsF,QAAQ,CAAGC,CAAC,EAAKtF,iBAAiB,CAACsF,CAAC,CAACC,MAAM,CAACH,OAAO,CAAE,CACtD,CAAC,sCAEJ,EAAO,CAAC,cAER7I,IAAA,QAAK0I,SAAS,CAAC,UAAU,CAAAC,QAAA,CACtBjF,WAAW,CAACyG,MAAM,CAAG,CAAC,CAAGzG,WAAW,CAAC0G,GAAG,CAAC,CAACa,GAAG,CAAEC,KAAK,gBACnDhL,KAAA,QAAkCwI,SAAS,aAAAjD,MAAA,CAAcwF,GAAG,CAAC/E,IAAI,CAAG,CAAAyC,QAAA,eAClE3I,IAAA,WAAA2I,QAAA,CAASsC,GAAG,CAAC/E,IAAI,GAAK,WAAW,CAAG,SAAS,CAAG,KAAK,CAAS,CAAC,cAC/DlG,IAAA,MAAA2I,QAAA,CAAIsC,GAAG,CAAC9E,OAAO,CAAI,CAAC,MAAAV,MAAA,CAFTwF,GAAG,CAAC/E,IAAI,MAAAT,MAAA,CAAIyF,KAAK,CAGzB,CACN,CAAC,cACAlL,IAAA,MAAG0I,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,iFAA+E,CAAG,CAC7G,CACE,CAAC,cAENzI,KAAA,QAAKwI,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B3I,IAAA,aACEiJ,KAAK,CAAE3F,SAAU,CACjBwF,QAAQ,CAAGC,CAAC,EAAKxF,YAAY,CAACwF,CAAC,CAACC,MAAM,CAACC,KAAK,CAAE,CAC9CC,WAAW,CAAC,qGAAqG,CAClH,CAAC,cACFlJ,IAAA,WAAQ0I,SAAS,CAAC,iBAAiB,CAACE,IAAI,CAAC,QAAQ,CAACS,OAAO,CAAEvD,UAAW,CAACwD,QAAQ,CAAElG,WAAY,CAAAuF,QAAA,CAC1FvF,WAAW,CAAG,aAAa,CAAG,aAAa,CACtC,CAAC,EACN,CAAC,EACC,CAAC,EACP,CAAC,CAEV,CAEA,cAAe,CAAA7B,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}