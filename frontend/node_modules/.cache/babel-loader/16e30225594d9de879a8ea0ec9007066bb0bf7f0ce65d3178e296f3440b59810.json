{"ast":null,"code":"import React from'react';import'../styles/ReturnGuestAnalysis.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ReturnGuestAnalysis(_ref){let{returnGuests=[],loading}=_ref;if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u23F3 Loading guest analysis...\"});}const guests=returnGuests||[];return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDD04 Return Guest Analysis\"}),guests.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"return-guests-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"guests-list\",children:guests.map((guest,index)=>{var _guest$total_revenue,_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"guest-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"guest-rank\",children:[\"#\",index+1]}),/*#__PURE__*/_jsxs(\"div\",{className:\"guest-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:guest.guest_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"guest-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Visits:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[guest.visit_count,\"x\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Total Revenue:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[\"$\",((_guest$total_revenue=guest.total_revenue)===null||_guest$total_revenue===void 0?void 0:_guest$total_revenue.toFixed(2))||'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Avg per Visit:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[\"$\",((_ref2=guest.total_revenue/guest.visit_count)===null||_ref2===void 0?void 0:_ref2.toFixed(2))||'0.00']})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"loyalty-badge\",children:[guest.visit_count>=5&&/*#__PURE__*/_jsx(\"span\",{className:\"badge premium\",children:\"\\u2B50 VIP Guest\"}),guest.visit_count>=3&&guest.visit_count<5&&/*#__PURE__*/_jsx(\"span\",{className:\"badge loyal\",children:\"\\uD83C\\uDF1F Loyal\"}),guest.visit_count>=2&&guest.visit_count<3&&/*#__PURE__*/_jsx(\"span\",{className:\"badge returning\",children:\"\\uD83D\\uDC99 Returning\"})]})]},index);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"insights-panel\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCA Return Guest Insights\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"insight\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:\"\\uD83D\\uDC65\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Total Return Guests\"}),/*#__PURE__*/_jsx(\"p\",{children:guests.length})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"insight\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:\"\\uD83D\\uDCB0\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Return Guest Revenue\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",guests.reduce((sum,g)=>sum+(g.total_revenue||0),0).toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"insight\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:\"\\uD83D\\uDCC8\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Avg Visits per Guest\"}),/*#__PURE__*/_jsxs(\"p\",{children:[(guests.reduce((sum,g)=>sum+g.visit_count,0)/guests.length).toFixed(1),\"x\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"insight\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:\"\\u2B50\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Top Guest Value\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",Math.max(...guests.map(g=>g.total_revenue||0)).toFixed(2)]})]})]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No return guests found yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"hint\",children:\"Return guests appear after someone books more than once\"})]})]});}export default ReturnGuestAnalysis;","map":{"version":3,"names":["React","jsx","_jsx","jsxs","_jsxs","ReturnGuestAnalysis","_ref","returnGuests","loading","className","children","guests","length","map","guest","index","_guest$total_revenue","_ref2","guest_name","visit_count","total_revenue","toFixed","reduce","sum","g","Math","max"],"sources":["/home/rob/.openclaw/workspace/campsite-crm/frontend/src/components/ReturnGuestAnalysis.jsx"],"sourcesContent":["import React from 'react';\nimport '../styles/ReturnGuestAnalysis.css';\n\nfunction ReturnGuestAnalysis({ returnGuests = [], loading }) {\n  if (loading) {\n    return <div className=\"loading\">‚è≥ Loading guest analysis...</div>;\n  }\n\n  const guests = returnGuests || [];\n\n  return (\n    <div className=\"card\">\n      <h2>üîÑ Return Guest Analysis</h2>\n      \n      {guests.length > 0 ? (\n        <div className=\"return-guests-container\">\n          <div className=\"guests-list\">\n            {guests.map((guest, index) => (\n              <div key={index} className=\"guest-card\">\n                <div className=\"guest-rank\">#{index + 1}</div>\n                <div className=\"guest-info\">\n                  <h3>{guest.guest_name}</h3>\n                  <div className=\"guest-stats\">\n                    <div className=\"stat\">\n                      <span className=\"label\">Visits:</span>\n                      <span className=\"value\">{guest.visit_count}x</span>\n                    </div>\n                    <div className=\"stat\">\n                      <span className=\"label\">Total Revenue:</span>\n                      <span className=\"value\">${guest.total_revenue?.toFixed(2) || '0.00'}</span>\n                    </div>\n                    <div className=\"stat\">\n                      <span className=\"label\">Avg per Visit:</span>\n                      <span className=\"value\">${(guest.total_revenue / guest.visit_count)?.toFixed(2) || '0.00'}</span>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"loyalty-badge\">\n                  {guest.visit_count >= 5 && <span className=\"badge premium\">‚≠ê VIP Guest</span>}\n                  {guest.visit_count >= 3 && guest.visit_count < 5 && <span className=\"badge loyal\">üåü Loyal</span>}\n                  {guest.visit_count >= 2 && guest.visit_count < 3 && <span className=\"badge returning\">üíô Returning</span>}\n                </div>\n              </div>\n            ))}\n          </div>\n\n          <div className=\"insights-panel\">\n            <h3>üìä Return Guest Insights</h3>\n            <div className=\"insight\">\n              <span className=\"icon\">üë•</span>\n              <div>\n                <h4>Total Return Guests</h4>\n                <p>{guests.length}</p>\n              </div>\n            </div>\n            <div className=\"insight\">\n              <span className=\"icon\">üí∞</span>\n              <div>\n                <h4>Return Guest Revenue</h4>\n                <p>${guests.reduce((sum, g) => sum + (g.total_revenue || 0), 0).toFixed(2)}</p>\n              </div>\n            </div>\n            <div className=\"insight\">\n              <span className=\"icon\">üìà</span>\n              <div>\n                <h4>Avg Visits per Guest</h4>\n                <p>{(guests.reduce((sum, g) => sum + g.visit_count, 0) / guests.length).toFixed(1)}x</p>\n              </div>\n            </div>\n            <div className=\"insight\">\n              <span className=\"icon\">‚≠ê</span>\n              <div>\n                <h4>Top Guest Value</h4>\n                <p>${Math.max(...guests.map(g => g.total_revenue || 0)).toFixed(2)}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      ) : (\n        <div className=\"empty-state\">\n          <p>No return guests found yet</p>\n          <p className=\"hint\">Return guests appear after someone books more than once</p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default ReturnGuestAnalysis;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}