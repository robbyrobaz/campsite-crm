{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'../styles/AreaUtilization.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AreaUtilization(_ref){let{dateRange}=_ref;const[areas,setAreas]=useState([]);const[loading,setLoading]=useState(false);useEffect(()=>{fetchAreas();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[dateRange]);const fetchAreas=async()=>{setLoading(true);try{const response=await axios.get('/api/areas',{params:dateRange});setAreas(response.data||[]);}catch(error){console.error('Error fetching areas:',error);}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u23F3 Loading area data...\"});}const totalRevenue=areas.reduce((sum,a)=>sum+(a.total_revenue||0),0);const getAreaIcon=areaName=>{const name=(areaName===null||areaName===void 0?void 0:areaName.toLowerCase())||'';if(name.includes('cabin'))return'üè†';if(name.includes('tent'))return'‚õ∫';if(name.includes('kitchen'))return'üç≥';if(name.includes('barn'))return'üê¥';if(name.includes('pavilion'))return'üèõÔ∏è';return'üèïÔ∏è';};return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83C\\uDFD5\\uFE0F Area Utilization & Revenue\"}),areas&&areas.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"areas-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"areas-grid\",children:areas.map((area,index)=>{var _area$total_revenue;const revenuePercentage=totalRevenue>0?area.total_revenue/totalRevenue*100:0;return/*#__PURE__*/_jsxs(\"div\",{className:\"area-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"area-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:getAreaIcon(area.area_rented)}),area.area_rented]}),/*#__PURE__*/_jsxs(\"div\",{className:\"revenue-highlight\",children:[\"$\",((_area$total_revenue=area.total_revenue)===null||_area$total_revenue===void 0?void 0:_area$total_revenue.toFixed(2))||'0.00']})]}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(revenuePercentage,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"area-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Bookings\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:area.booking_count})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Nights\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:area.total_nights})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"% of Total\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[revenuePercentage.toFixed(1),\"%\"]})]})]}),area.booking_count>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"area-metrics\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Avg per booking: $\",(area.total_revenue/area.booking_count).toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Avg nights: \",(area.total_nights/area.booking_count).toFixed(1)]})]})]},index);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"utilization-summary\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCA Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:\"\\uD83D\\uDCCD\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Total Areas Used\"}),/*#__PURE__*/_jsx(\"p\",{children:areas.length})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:\"\\uD83D\\uDCB0\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Total Revenue\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",totalRevenue.toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:\"\\uD83C\\uDFAF\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Top Area\"}),/*#__PURE__*/_jsx(\"p\",{children:areas.length>0?areas[0].area_rented:'N/A'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:\"\\uD83D\\uDCC8\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Total Bookings\"}),/*#__PURE__*/_jsx(\"p\",{children:areas.reduce((sum,a)=>sum+(a.booking_count||0),0)})]})]})]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No area utilization data found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"hint\",children:\"Data will appear once bookings are added\"})]})]});}export default AreaUtilization;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","AreaUtilization","_ref","dateRange","areas","setAreas","loading","setLoading","fetchAreas","response","get","params","data","error","console","className","children","totalRevenue","reduce","sum","a","total_revenue","getAreaIcon","areaName","name","toLowerCase","includes","length","map","area","index","_area$total_revenue","revenuePercentage","area_rented","toFixed","style","width","concat","booking_count","total_nights"],"sources":["/home/rob/.openclaw/workspace/campsite-crm/frontend/src/components/AreaUtilization.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport '../styles/AreaUtilization.css';\n\nfunction AreaUtilization({ dateRange }) {\n  const [areas, setAreas] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    fetchAreas();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dateRange]);\n\n  const fetchAreas = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get('/api/areas', { params: dateRange });\n      setAreas(response.data || []);\n    } catch (error) {\n      console.error('Error fetching areas:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return <div className=\"loading\">‚è≥ Loading area data...</div>;\n  }\n\n  const totalRevenue = areas.reduce((sum, a) => sum + (a.total_revenue || 0), 0);\n\n  const getAreaIcon = (areaName) => {\n    const name = areaName?.toLowerCase() || '';\n    if (name.includes('cabin')) return 'üè†';\n    if (name.includes('tent')) return '‚õ∫';\n    if (name.includes('kitchen')) return 'üç≥';\n    if (name.includes('barn')) return 'üê¥';\n    if (name.includes('pavilion')) return 'üèõÔ∏è';\n    return 'üèïÔ∏è';\n  };\n\n  return (\n    <div className=\"card\">\n      <h2>üèïÔ∏è Area Utilization & Revenue</h2>\n\n      {areas && areas.length > 0 ? (\n        <div className=\"areas-container\">\n          <div className=\"areas-grid\">\n            {areas.map((area, index) => {\n              const revenuePercentage = totalRevenue > 0 ? (area.total_revenue / totalRevenue * 100) : 0;\n              \n              return (\n                <div key={index} className=\"area-card\">\n                  <div className=\"area-header\">\n                    <h3>\n                      <span className=\"icon\">{getAreaIcon(area.area_rented)}</span>\n                      {area.area_rented}\n                    </h3>\n                    <div className=\"revenue-highlight\">${area.total_revenue?.toFixed(2) || '0.00'}</div>\n                  </div>\n\n                  <div className=\"progress-bar\">\n                    <div className=\"progress-fill\" style={{ width: `${revenuePercentage}%` }}></div>\n                  </div>\n\n                  <div className=\"area-stats\">\n                    <div className=\"stat\">\n                      <span className=\"stat-label\">Bookings</span>\n                      <span className=\"stat-value\">{area.booking_count}</span>\n                    </div>\n                    <div className=\"stat\">\n                      <span className=\"stat-label\">Nights</span>\n                      <span className=\"stat-value\">{area.total_nights}</span>\n                    </div>\n                    <div className=\"stat\">\n                      <span className=\"stat-label\">% of Total</span>\n                      <span className=\"stat-value\">{revenuePercentage.toFixed(1)}%</span>\n                    </div>\n                  </div>\n\n                  {area.booking_count > 0 && (\n                    <div className=\"area-metrics\">\n                      <p>Avg per booking: ${(area.total_revenue / area.booking_count).toFixed(2)}</p>\n                      <p>Avg nights: {(area.total_nights / area.booking_count).toFixed(1)}</p>\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n\n          <div className=\"utilization-summary\">\n            <h3>üìä Summary</h3>\n            <div className=\"summary-grid\">\n              <div className=\"summary-item\">\n                <span className=\"icon\">üìç</span>\n                <div>\n                  <h4>Total Areas Used</h4>\n                  <p>{areas.length}</p>\n                </div>\n              </div>\n              <div className=\"summary-item\">\n                <span className=\"icon\">üí∞</span>\n                <div>\n                  <h4>Total Revenue</h4>\n                  <p>${totalRevenue.toFixed(2)}</p>\n                </div>\n              </div>\n              <div className=\"summary-item\">\n                <span className=\"icon\">üéØ</span>\n                <div>\n                  <h4>Top Area</h4>\n                  <p>{areas.length > 0 ? areas[0].area_rented : 'N/A'}</p>\n                </div>\n              </div>\n              <div className=\"summary-item\">\n                <span className=\"icon\">üìà</span>\n                <div>\n                  <h4>Total Bookings</h4>\n                  <p>{areas.reduce((sum, a) => sum + (a.booking_count || 0), 0)}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      ) : (\n        <div className=\"empty-state\">\n          <p>No area utilization data found</p>\n          <p className=\"hint\">Data will appear once bookings are added</p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default AreaUtilization;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}