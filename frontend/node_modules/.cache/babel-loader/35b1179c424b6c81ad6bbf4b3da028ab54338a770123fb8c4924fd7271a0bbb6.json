{"ast":null,"code":"import React from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PaymentCenter(_ref){var _paymentSummary$total,_paymentSummary$total2;let{bookings=[],paymentSummary=null,onUpdatePayment}=_ref;const activeBookings=bookings.filter(booking=>{const status=(booking.status||'').toLowerCase();return status!=='canceled'&&status!=='no-show';});const handleQuickPay=booking=>{const nextValue=window.prompt(\"Amount paid for \".concat(booking.guest_name),booking.amount_paid||0);if(nextValue===null)return;const dueDate=window.prompt('Due date (YYYY-MM-DD)',booking.due_date||'');onUpdatePayment(booking.id,{amount_paid:parseFloat(nextValue)||0,due_date:dueDate||null});};return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCB3 Payment Center\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"insights-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"insight-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:\"\\u2705\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Collected\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",(paymentSummary===null||paymentSummary===void 0?void 0:(_paymentSummary$total=paymentSummary.total_collected)===null||_paymentSummary$total===void 0?void 0:_paymentSummary$total.toFixed(2))||'0.00']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"insight-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:\"\\u23F3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Outstanding\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",(paymentSummary===null||paymentSummary===void 0?void 0:(_paymentSummary$total2=paymentSummary.total_outstanding)===null||_paymentSummary$total2===void 0?void 0:_paymentSummary$total2.toFixed(2))||'0.00']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"insight-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:\"\\uD83D\\uDEA8\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Overdue\"}),/*#__PURE__*/_jsx(\"p\",{children:(paymentSummary===null||paymentSummary===void 0?void 0:paymentSummary.overdue_count)||0})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"data-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Guest\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Revenue\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Paid\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Balance\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Due Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:activeBookings.length>0?activeBookings.map(booking=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:booking.guest_name}),/*#__PURE__*/_jsx(\"td\",{children:booking.booking_date}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",(booking.revenue||0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",(booking.amount_paid||0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",(booking.balance_due||0).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:booking.payment_status||'unpaid'}),/*#__PURE__*/_jsx(\"td\",{children:booking.due_date||'-'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary btn-small\",type:\"button\",onClick:()=>handleQuickPay(booking),children:\"Update\"})})]},booking.id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:8,children:\"No active bookings for this range.\"})})})]})})]});}export default PaymentCenter;","map":{"version":3,"names":["React","jsx","_jsx","jsxs","_jsxs","PaymentCenter","_ref","_paymentSummary$total","_paymentSummary$total2","bookings","paymentSummary","onUpdatePayment","activeBookings","filter","booking","status","toLowerCase","handleQuickPay","nextValue","window","prompt","concat","guest_name","amount_paid","dueDate","due_date","id","parseFloat","className","children","total_collected","toFixed","total_outstanding","overdue_count","length","map","booking_date","revenue","balance_due","payment_status","type","onClick","colSpan"],"sources":["/home/rob/.openclaw/workspace/campsite-crm/frontend/src/components/PaymentCenter.jsx"],"sourcesContent":["import React from 'react';\n\nfunction PaymentCenter({ bookings = [], paymentSummary = null, onUpdatePayment }) {\n  const activeBookings = bookings.filter((booking) => {\n    const status = (booking.status || '').toLowerCase();\n    return status !== 'canceled' && status !== 'no-show';\n  });\n\n  const handleQuickPay = (booking) => {\n    const nextValue = window.prompt(`Amount paid for ${booking.guest_name}`, booking.amount_paid || 0);\n    if (nextValue === null) return;\n\n    const dueDate = window.prompt('Due date (YYYY-MM-DD)', booking.due_date || '');\n\n    onUpdatePayment(booking.id, {\n      amount_paid: parseFloat(nextValue) || 0,\n      due_date: dueDate || null\n    });\n  };\n\n  return (\n    <div className=\"card\">\n      <h2>üí≥ Payment Center</h2>\n      <div className=\"insights-grid\">\n        <div className=\"insight-card\">\n          <span className=\"icon\">‚úÖ</span>\n          <div>\n            <h4>Collected</h4>\n            <p>${paymentSummary?.total_collected?.toFixed(2) || '0.00'}</p>\n          </div>\n        </div>\n        <div className=\"insight-card\">\n          <span className=\"icon\">‚è≥</span>\n          <div>\n            <h4>Outstanding</h4>\n            <p>${paymentSummary?.total_outstanding?.toFixed(2) || '0.00'}</p>\n          </div>\n        </div>\n        <div className=\"insight-card\">\n          <span className=\"icon\">üö®</span>\n          <div>\n            <h4>Overdue</h4>\n            <p>{paymentSummary?.overdue_count || 0}</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"table-responsive\">\n        <table className=\"data-table\">\n          <thead>\n            <tr>\n              <th>Guest</th>\n              <th>Date</th>\n              <th>Revenue</th>\n              <th>Paid</th>\n              <th>Balance</th>\n              <th>Status</th>\n              <th>Due Date</th>\n              <th>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {activeBookings.length > 0 ? activeBookings.map((booking) => (\n              <tr key={booking.id}>\n                <td>{booking.guest_name}</td>\n                <td>{booking.booking_date}</td>\n                <td>${(booking.revenue || 0).toFixed(2)}</td>\n                <td>${(booking.amount_paid || 0).toFixed(2)}</td>\n                <td>${(booking.balance_due || 0).toFixed(2)}</td>\n                <td>{booking.payment_status || 'unpaid'}</td>\n                <td>{booking.due_date || '-'}</td>\n                <td>\n                  <button\n                    className=\"btn btn-secondary btn-small\"\n                    type=\"button\"\n                    onClick={() => handleQuickPay(booking)}\n                  >\n                    Update\n                  </button>\n                </td>\n              </tr>\n            )) : (\n              <tr>\n                <td colSpan={8}>No active bookings for this range.</td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\nexport default PaymentCenter;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}