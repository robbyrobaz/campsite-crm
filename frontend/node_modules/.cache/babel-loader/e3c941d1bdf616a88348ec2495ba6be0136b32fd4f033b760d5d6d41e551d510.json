{"ast":null,"code":"import _objectSpread from\"/home/rob/.openclaw/workspace/campsite-crm/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import axios from'axios';import'../styles/IntegrationHub.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const INITIAL_SETTINGS={chatgpt_enabled:false,workspace_name:'Campsite CRM',openai_api_key:'',openai_model:'gpt-4.1-mini',mcp_shared_secret:'',oauth_enabled:false,oauth_client_id:'',oauth_client_secret:'',oauth_from_env:false,oauth_redirect_uri:'',gmail_scan_enabled:false,gmail_account_email:'',gmail_scan_window_days:45,mcp_url:'',oauth_redirect_default:'',openai_key_configured:false,mcp_secret_configured:false,oauth_client_secret_configured:false,gmail_token_configured:false,gmail_connected:false,gmail_refresh_token_configured:false};function IntegrationHub(_ref){var _dataOpsStatus$auto_s,_dataOpsStatus$auto_s2,_dataOpsStatus$auto_s3,_dataOpsStatus$totals,_dataOpsStatus$totals2,_dataOpsStatus$totals3,_dataOpsStatus$totals4,_dataOpsStatus$totals5,_dataOpsStatus$totals6,_dataOpsStatus$totals7,_dataOpsStatus$totals8,_dataOpsStatus$totals9,_dataOpsStatus$totals0,_dataOpsStatus$auto_s4,_dataOpsStatus$auto_s5;let{onRefreshData,onRefreshTasks,onRefreshContacts,onRefreshWaitlist}=_ref;const[settings,setSettings]=useState(INITIAL_SETTINGS);const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[testing,setTesting]=useState(false);const[chatLoading,setChatLoading]=useState(false);const[chatInput,setChatInput]=useState('');const[includeContext,setIncludeContext]=useState(true);const[chatHistory,setChatHistory]=useState([]);const[scanningGmail,setScanningGmail]=useState(false);const[pendingScans,setPendingScans]=useState([]);const[approvingBatchId,setApprovingBatchId]=useState('');const[dataOpsStatus,setDataOpsStatus]=useState(null);const[dataOpsLoading,setDataOpsLoading]=useState(true);const[dataOpsAction,setDataOpsAction]=useState('');const[gmailStatus,setGmailStatus]=useState(null);const[connectingGmail,setConnectingGmail]=useState(false);const[disconnectingGmail,setDisconnectingGmail]=useState(false);const[savingAndConnecting,setSavingAndConnecting]=useState(false);const[gmailNotice,setGmailNotice]=useState('');const loadSettings=async()=>{setLoading(true);try{const response=await axios.get('/api/integrations/chatgpt/settings');setSettings(prev=>_objectSpread(_objectSpread({},prev),response.data));}catch(error){console.error('Error loading integration settings:',error);alert('Unable to load integration settings right now');}finally{setLoading(false);}};const loadGmailStatus=async()=>{try{const response=await axios.get('/api/auth/gmail/status');setGmailStatus(response.data||null);}catch(error){console.error('Error loading Gmail status:',error);}};const loadPendingScans=async()=>{try{const response=await axios.get('/api/integrations/chatgpt/gmail/scans/pending');setPendingScans(response.data||[]);}catch(error){console.error('Error loading pending scans:',error);}};const loadDataManagementStatus=async()=>{setDataOpsLoading(true);try{const response=await axios.get('/api/data-management/status');setDataOpsStatus(response.data||null);}catch(error){console.error('Error loading data management status:',error);setDataOpsStatus(null);}finally{setDataOpsLoading(false);}};useEffect(()=>{// Check if we just returned from Gmail OAuth\nconst params=new URLSearchParams(window.location.search);if(params.get('gmail_connected')==='1'){setGmailNotice('success');window.history.replaceState({},'',window.location.pathname);}else if(params.get('gmail_error')){setGmailNotice(\"error:\".concat(params.get('gmail_error')));window.history.replaceState({},'',window.location.pathname);}loadSettings();loadGmailStatus();loadPendingScans();loadDataManagementStatus();},[]);const saveSettings=async()=>{setSaving(true);try{await axios.put('/api/integrations/chatgpt/settings',{chatgpt_enabled:settings.chatgpt_enabled,workspace_name:settings.workspace_name,openai_api_key:settings.openai_api_key,openai_model:settings.openai_model,mcp_shared_secret:settings.mcp_shared_secret,oauth_enabled:settings.oauth_enabled,oauth_client_id:settings.oauth_client_id,oauth_client_secret:settings.oauth_client_secret,oauth_redirect_uri:settings.oauth_redirect_uri,gmail_scan_window_days:settings.gmail_scan_window_days});await loadSettings();alert('Integration settings saved');}catch(error){var _error$response,_error$response$data;console.error('Error saving integration settings:',error);alert(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Unable to save settings');}finally{setSaving(false);}};const connectGmail=async()=>{setConnectingGmail(true);try{const response=await axios.get('/api/auth/gmail/connect-url');window.location.href=response.data.url;}catch(error){var _error$response2,_error$response2$data;console.error('Error starting Gmail OAuth:',error);alert(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Unable to start Gmail connection. Make sure OAuth Client ID and Secret are saved first.');setConnectingGmail(false);}};// Saves OAuth credentials then immediately starts the Gmail OAuth redirect.\n// Used when credentials haven't been stored yet — one click does both steps.\nconst saveAndConnect=async()=>{if(!settings.oauth_client_id.trim()){alert('Enter your Google OAuth Client ID first.');return;}setSavingAndConnecting(true);try{await axios.put('/api/integrations/chatgpt/settings',{chatgpt_enabled:settings.chatgpt_enabled,workspace_name:settings.workspace_name,openai_api_key:settings.openai_api_key,openai_model:settings.openai_model,mcp_shared_secret:settings.mcp_shared_secret,oauth_enabled:settings.oauth_enabled,oauth_client_id:settings.oauth_client_id,oauth_client_secret:settings.oauth_client_secret,oauth_redirect_uri:settings.oauth_redirect_uri,gmail_scan_window_days:settings.gmail_scan_window_days});const response=await axios.get('/api/auth/gmail/connect-url');window.location.href=response.data.url;}catch(error){var _error$response3,_error$response3$data;console.error('Error saving OAuth and connecting:',error);alert(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||'Unable to connect Gmail. Check your OAuth credentials.');setSavingAndConnecting(false);}};const disconnectGmail=async()=>{if(!window.confirm('Disconnect Gmail? The stored tokens will be removed and email scanning will stop.'))return;setDisconnectingGmail(true);try{await axios.post('/api/auth/gmail/disconnect');await loadGmailStatus();await loadSettings();setGmailNotice('');}catch(error){var _error$response4,_error$response4$data;console.error('Error disconnecting Gmail:',error);alert(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||'Unable to disconnect Gmail');}finally{setDisconnectingGmail(false);}};const testConnection=async()=>{setTesting(true);try{const response=await axios.post('/api/integrations/chatgpt/test');alert(\"Connection OK (\".concat(response.data.model,\"): \").concat(response.data.preview||'No preview'));}catch(error){var _error$response5,_error$response5$data;console.error('Error testing ChatGPT connection:',error);alert(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.error)||'Connection test failed');}finally{setTesting(false);}};const askChatGpt=async()=>{const trimmed=chatInput.trim();if(!trimmed)return;const nextHistory=[...chatHistory,{role:'user',content:trimmed}];setChatHistory(nextHistory);setChatInput('');setChatLoading(true);try{const response=await axios.post('/api/chatgpt/chat',{message:trimmed,history:nextHistory,include_crm_context:includeContext});setChatHistory(prev=>[...prev,{role:'assistant',content:response.data.reply||''}]);if(onRefreshData)onRefreshData();if(onRefreshTasks)onRefreshTasks();}catch(error){console.error('Error querying chat endpoint:',error);setChatHistory(prev=>{var _error$response6,_error$response6$data;return[...prev,{role:'assistant',content:\"Error: \".concat(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.error)||'Unable to reach ChatGPT endpoint.')}];});}finally{setChatLoading(false);}};const scanGmail=async()=>{setScanningGmail(true);try{var _response$data;const response=await axios.post('/api/integrations/chatgpt/gmail/scan',{scan_window_days:settings.gmail_scan_window_days});const found=((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.total_found)||0;if(found>0){alert(\"Scan complete. Found \".concat(found,\" pending updates to review.\"));}else{alert('Scan complete. No new updates found.');}await loadPendingScans();}catch(error){var _error$response7,_error$response7$data;console.error('Error scanning Gmail:',error);alert(((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.error)||'Failed to scan Gmail');}finally{setScanningGmail(false);}};const approveScan=async batchId=>{setApprovingBatchId(batchId);try{var _response$data2;const response=await axios.post(\"/api/integrations/chatgpt/gmail/scans/\".concat(batchId,\"/approve\"));alert(\"Approved. Applied \".concat(((_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.total_applied)||0,\" interactions.\"));await loadPendingScans();if(onRefreshContacts)onRefreshContacts();if(onRefreshData)onRefreshData();}catch(error){var _error$response8,_error$response8$data;console.error('Error approving scan:',error);alert(((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.error)||'Failed to approve updates');}finally{setApprovingBatchId('');}};const runDataAction=async(actionKey,request)=>{setDataOpsAction(actionKey);try{const response=await request();await loadDataManagementStatus();if(onRefreshData)onRefreshData();if(onRefreshTasks)onRefreshTasks();if(onRefreshContacts)onRefreshContacts();if(onRefreshWaitlist)onRefreshWaitlist();return response;}finally{setDataOpsAction('');}};const saveAllDataNow=async()=>{try{var _response$data3;const response=await runDataAction('save',()=>axios.post('/api/data-management/save'));alert(\"Data snapshot saved: \".concat(((_response$data3=response.data)===null||_response$data3===void 0?void 0:_response$data3.backup_file)||'Saved'));}catch(error){var _error$response9,_error$response9$data,_error$response0,_error$response0$data;console.error('Error saving data snapshot:',error);alert(((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.error)||((_error$response0=error.response)===null||_error$response0===void 0?void 0:(_error$response0$data=_error$response0.data)===null||_error$response0$data===void 0?void 0:_error$response0$data.message)||'Failed to save data snapshot');}};const populateDummyData=async()=>{if(!window.confirm('Populate all CRM sections with dummy demo data? Existing dummy rows will be replaced.'))return;try{await runDataAction('populate',()=>axios.post('/api/data-management/dummy/populate'));alert('Dummy data populated across bookings, contracts, waitlist, tasks, and contacts.');}catch(error){var _error$response1,_error$response1$data;console.error('Error populating dummy data:',error);alert(((_error$response1=error.response)===null||_error$response1===void 0?void 0:(_error$response1$data=_error$response1.data)===null||_error$response1$data===void 0?void 0:_error$response1$data.error)||'Failed to populate dummy data');}};const removeDummyData=async()=>{if(!window.confirm('Remove all dummy CRM data now? Real data will not be deleted.'))return;try{await runDataAction('remove',()=>axios.post('/api/data-management/dummy/remove'));alert('Dummy data removed.');}catch(error){var _error$response10,_error$response10$dat;console.error('Error removing dummy data:',error);alert(((_error$response10=error.response)===null||_error$response10===void 0?void 0:(_error$response10$dat=_error$response10.data)===null||_error$response10$dat===void 0?void 0:_error$response10$dat.error)||'Failed to remove dummy data');}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u2699\\uFE0F ChatGPT + MCP Settings\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading integration settings...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"integration-grid\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u2699\\uFE0F ChatGPT + MCP Settings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"section-subtext\",children:\"Connect Campsite CRM to ChatGPT and enable Gmail interaction scanning.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"integration-status-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"OpenAI Key: \",settings.openai_key_configured?'Configured':'Missing']}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill \".concat(settings.gmail_connected?'badge-pill--success':''),children:[\"Gmail: \",settings.gmail_connected?\"Connected\".concat(settings.gmail_account_email?\" \\u2014 \".concat(settings.gmail_account_email):''):'Not connected']}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"MCP Secret: \",settings.mcp_secret_configured?'Configured':'Optional']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-grid\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"toggle-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:settings.chatgpt_enabled,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{chatgpt_enabled:e.target.checked}))}),\"Enable ChatGPT Integration\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Workspace Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:settings.workspace_name,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{workspace_name:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"OpenAI API Key\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:settings.openai_api_key,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{openai_api_key:e.target.value})),placeholder:\"sk-...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"OpenAI Model\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:settings.openai_model,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{openai_model:e.target.value})),placeholder:\"gpt-4.1-mini\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Gmail Scan Window (days)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:settings.gmail_scan_window_days,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{gmail_scan_window_days:parseInt(e.target.value,10)||1}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"MCP Shared Secret (Bearer token)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:settings.mcp_shared_secret,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{mcp_shared_secret:e.target.value})),placeholder:\"Optional but recommended\"})]}),!settings.oauth_from_env&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Google OAuth Client ID \",/*#__PURE__*/_jsx(\"span\",{className:\"field-hint\",children:\"(from Google Cloud Console)\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:settings.oauth_client_id,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{oauth_client_id:e.target.value})),placeholder:\"xxxxxxx.apps.googleusercontent.com\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Google OAuth Client Secret\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:settings.oauth_client_secret,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{oauth_client_secret:e.target.value})),placeholder:\"GOCSPX-...\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"button\",onClick:saveSettings,disabled:saving,children:saving?'Saving...':'Save Settings'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",type:\"button\",onClick:testConnection,disabled:testing,children:testing?'Testing...':'Test OpenAI Connection'})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCE7 Gmail Account Connection\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"section-subtext\",children:[\"Connect your Gmail account via OAuth to allow the CRM to scan emails for guest contacts and conversation history.\",!settings.oauth_from_env&&' Requires Google OAuth credentials saved above.']}),gmailNotice==='success'&&/*#__PURE__*/_jsx(\"div\",{className:\"gmail-notice gmail-notice--success\",children:\"Gmail connected successfully! Email scanning is now enabled.\"}),gmailNotice.startsWith('error:')&&/*#__PURE__*/_jsxs(\"div\",{className:\"gmail-notice gmail-notice--error\",children:[\"Gmail connection failed: \",gmailNotice.replace('error:','')]}),gmailStatus?gmailStatus.connected?/*#__PURE__*/_jsxs(\"div\",{className:\"gmail-connected-block\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"gmail-connected-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"gmail-status-dot gmail-status-dot--on\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Connected\"}),gmailStatus.account_email?/*#__PURE__*/_jsxs(\"span\",{children:[\" as \",gmailStatus.account_email]}):null,gmailStatus.has_refresh_token?/*#__PURE__*/_jsx(\"span\",{className:\"badge-pill badge-pill--success\",children:\"Auto-refresh enabled\"}):null]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",type:\"button\",onClick:disconnectGmail,disabled:disconnectingGmail,children:disconnectingGmail?'Disconnecting...':'Disconnect Gmail'})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"gmail-connect-block\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"gmail-connected-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"gmail-status-dot gmail-status-dot--off\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Not connected\"})]}),!gmailStatus.oauth_from_env&&/*#__PURE__*/_jsxs(\"div\",{className:\"gmail-callback-hint\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Authorized Redirect URI \\u2014 add this in Google Cloud Console:\"}),/*#__PURE__*/_jsx(\"code\",{children:gmailStatus.callback_uri})]}),!gmailStatus.oauth_from_env&&!gmailStatus.oauth_client_configured&&/*#__PURE__*/_jsxs(\"div\",{className:\"gmail-inline-setup\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Google OAuth Client ID \",/*#__PURE__*/_jsx(\"span\",{className:\"field-hint\",children:\"(from Google Cloud Console)\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:settings.oauth_client_id,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{oauth_client_id:e.target.value})),placeholder:\"xxxxxxx.apps.googleusercontent.com\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Google OAuth Client Secret\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:settings.oauth_client_secret,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{oauth_client_secret:e.target.value})),placeholder:\"GOCSPX-...\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"button\",onClick:gmailStatus.oauth_client_configured?connectGmail:saveAndConnect,disabled:connectingGmail||savingAndConnecting||!gmailStatus.oauth_from_env&&!gmailStatus.oauth_client_configured&&!settings.oauth_client_id.trim(),children:connectingGmail||savingAndConnecting?'Redirecting to Google...':gmailStatus.oauth_client_configured||gmailStatus.oauth_from_env?'Connect Gmail Account':'Save & Connect Gmail'})]}):/*#__PURE__*/_jsx(\"p\",{className:\"chat-empty\",children:\"Loading Gmail status...\"})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDDC2\\uFE0F Data Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"section-subtext\",children:\"Auto-save snapshots run in the backend on a timer. Use these controls to save now and add/remove full dummy CRM data.\"}),dataOpsLoading?/*#__PURE__*/_jsx(\"p\",{className:\"chat-empty\",children:\"Loading data management status...\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"data-status-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"Auto-save every: \",(dataOpsStatus===null||dataOpsStatus===void 0?void 0:(_dataOpsStatus$auto_s=dataOpsStatus.auto_save)===null||_dataOpsStatus$auto_s===void 0?void 0:_dataOpsStatus$auto_s.interval_minutes)||'-',\" min\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"Last save: \",(dataOpsStatus===null||dataOpsStatus===void 0?void 0:(_dataOpsStatus$auto_s2=dataOpsStatus.auto_save)===null||_dataOpsStatus$auto_s2===void 0?void 0:_dataOpsStatus$auto_s2.last_save_at)||'Not yet']}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"Last mode: \",(dataOpsStatus===null||dataOpsStatus===void 0?void 0:(_dataOpsStatus$auto_s3=dataOpsStatus.auto_save)===null||_dataOpsStatus$auto_s3===void 0?void 0:_dataOpsStatus$auto_s3.last_save_type)||'-']}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"Bookings: \",(_dataOpsStatus$totals=dataOpsStatus===null||dataOpsStatus===void 0?void 0:(_dataOpsStatus$totals2=dataOpsStatus.totals)===null||_dataOpsStatus$totals2===void 0?void 0:_dataOpsStatus$totals2.bookings)!==null&&_dataOpsStatus$totals!==void 0?_dataOpsStatus$totals:0]}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"Contracts: \",(_dataOpsStatus$totals3=dataOpsStatus===null||dataOpsStatus===void 0?void 0:(_dataOpsStatus$totals4=dataOpsStatus.totals)===null||_dataOpsStatus$totals4===void 0?void 0:_dataOpsStatus$totals4.contracts)!==null&&_dataOpsStatus$totals3!==void 0?_dataOpsStatus$totals3:0]}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"Waitlist: \",(_dataOpsStatus$totals5=dataOpsStatus===null||dataOpsStatus===void 0?void 0:(_dataOpsStatus$totals6=dataOpsStatus.totals)===null||_dataOpsStatus$totals6===void 0?void 0:_dataOpsStatus$totals6.waitlist_entries)!==null&&_dataOpsStatus$totals5!==void 0?_dataOpsStatus$totals5:0]}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"Tasks: \",(_dataOpsStatus$totals7=dataOpsStatus===null||dataOpsStatus===void 0?void 0:(_dataOpsStatus$totals8=dataOpsStatus.totals)===null||_dataOpsStatus$totals8===void 0?void 0:_dataOpsStatus$totals8.tasks)!==null&&_dataOpsStatus$totals7!==void 0?_dataOpsStatus$totals7:0]}),/*#__PURE__*/_jsxs(\"div\",{className:\"badge-pill\",children:[\"Contacts: \",(_dataOpsStatus$totals9=dataOpsStatus===null||dataOpsStatus===void 0?void 0:(_dataOpsStatus$totals0=dataOpsStatus.totals)===null||_dataOpsStatus$totals0===void 0?void 0:_dataOpsStatus$totals0.contacts)!==null&&_dataOpsStatus$totals9!==void 0?_dataOpsStatus$totals9:0]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"button\",onClick:saveAllDataNow,disabled:dataOpsAction!=='',children:dataOpsAction==='save'?'Saving...':'Save All Data Now'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",type:\"button\",onClick:populateDummyData,disabled:dataOpsAction!=='',children:dataOpsAction==='populate'?'Populating...':'Populate Dummy Data'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",type:\"button\",onClick:removeDummyData,disabled:dataOpsAction!=='',children:dataOpsAction==='remove'?'Removing...':'Remove Dummy Data'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",type:\"button\",onClick:loadDataManagementStatus,disabled:dataOpsAction!=='',children:\"Refresh Status\"})]}),dataOpsStatus!==null&&dataOpsStatus!==void 0&&(_dataOpsStatus$auto_s4=dataOpsStatus.auto_save)!==null&&_dataOpsStatus$auto_s4!==void 0&&_dataOpsStatus$auto_s4.last_save_path?/*#__PURE__*/_jsxs(\"p\",{className:\"section-subtext data-save-path\",children:[\"Latest backup: \",dataOpsStatus.auto_save.last_save_path]}):null,dataOpsStatus!==null&&dataOpsStatus!==void 0&&(_dataOpsStatus$auto_s5=dataOpsStatus.auto_save)!==null&&_dataOpsStatus$auto_s5!==void 0&&_dataOpsStatus$auto_s5.last_error?/*#__PURE__*/_jsxs(\"p\",{className:\"section-subtext data-save-error\",children:[\"Last auto-save error: \",dataOpsStatus.auto_save.last_error]}):null]}),/*#__PURE__*/_jsxs(\"section\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCEC Gmail Interaction Scan\"}),/*#__PURE__*/_jsx(\"p\",{className:\"section-subtext\",children:\"Scan recent Gmail messages, review pending interaction updates, then approve before applying to contacts.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"button\",onClick:scanGmail,disabled:scanningGmail,children:scanningGmail?'Scanning...':'Scan Gmail for Recent Interactions'})}),/*#__PURE__*/_jsx(\"div\",{className:\"scan-list\",children:pendingScans.length>0?pendingScans.map(batch=>{var _batch$items;return/*#__PURE__*/_jsxs(\"div\",{className:\"scan-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"scan-card-head\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\"Batch \",batch.id.slice(0,8)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Found \",batch.total_found,\" updates on \",batch.created_at]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary btn-small\",type:\"button\",onClick:()=>approveScan(batch.id),disabled:approvingBatchId===batch.id,children:approvingBatchId===batch.id?'Approving...':'Approve Updates'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"scan-items\",children:((_batch$items=batch.items)===null||_batch$items===void 0?void 0:_batch$items.length)>0?batch.items.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"scan-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:item.full_name||item.email}),/*#__PURE__*/_jsxs(\"span\",{children:[item.occurred_at||'-',\" \",item.direction?\"(\".concat(item.direction,\")\"):'']}),/*#__PURE__*/_jsx(\"p\",{children:item.summary})]},item.id)):/*#__PURE__*/_jsx(\"p\",{className:\"chat-empty\",children:\"No item preview available.\"})})]},batch.id);}):/*#__PURE__*/_jsx(\"p\",{className:\"chat-empty\",children:\"No pending scan updates right now.\"})})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83E\\uDDED Setup Instructions\"}),/*#__PURE__*/_jsxs(\"ol\",{className:\"instructions-list\",children:[!settings.oauth_from_env&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"In \",/*#__PURE__*/_jsx(\"strong\",{children:\"Google Cloud Console\"}),\", create an OAuth 2.0 Client ID (Web application type). Add the Authorized Redirect URI shown in the Gmail Connection section above.\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Paste the Client ID and Client Secret into settings above and click \",/*#__PURE__*/_jsx(\"strong\",{children:\"Save Settings\"}),\".\"]})]}),/*#__PURE__*/_jsx(\"li\",{children:\"Optionally add an OpenAI API key and enable ChatGPT integration for AI-powered email analysis.\"}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Click \",/*#__PURE__*/_jsx(\"strong\",{children:\"Connect Gmail Account\"}),\" in the Gmail Connection section and approve access in your browser.\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Once connected, go to the \",/*#__PURE__*/_jsx(\"strong\",{children:\"Contacts\"}),\" tab and run a Gmail scan. Review suggestions and apply the ones you want.\"]}),/*#__PURE__*/_jsx(\"li\",{children:\"Use the MCP endpoint URL below in your MCP client or ChatGPT bridge.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"instruction-code\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"MCP URL\"}),/*#__PURE__*/_jsx(\"code\",{children:settings.mcp_url||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"instruction-code\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Quick MCP initialize example\"}),/*#__PURE__*/_jsx(\"code\",{children:\"curl -X POST \".concat(settings.mcp_url||'http://localhost:5000/mcp',\" -H \\\"Content-Type: application/json\\\" -d '{\\\"jsonrpc\\\":\\\"2.0\\\",\\\"id\\\":1,\\\"method\\\":\\\"initialize\\\",\\\"params\\\":{}}'\")})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"card integration-chat-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCAC Ask ChatGPT Inside CRM\"}),/*#__PURE__*/_jsx(\"p\",{className:\"section-subtext\",children:\"This chat can include live CRM context (bookings, waitlist, tasks, summary).\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"toggle-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:includeContext,onChange:e=>setIncludeContext(e.target.checked)}),\"Include live CRM context in prompts\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-log\",children:chatHistory.length>0?chatHistory.map((msg,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"chat-msg \".concat(msg.role),children:[/*#__PURE__*/_jsx(\"strong\",{children:msg.role==='assistant'?'ChatGPT':'You'}),/*#__PURE__*/_jsx(\"p\",{children:msg.content})]},\"\".concat(msg.role,\"-\").concat(index))):/*#__PURE__*/_jsx(\"p\",{className:\"chat-empty\",children:\"No chat yet. Ask about bookings, occupancy, overdue balances, or task planning.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-input-row\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:chatInput,onChange:e=>setChatInput(e.target.value),placeholder:\"Example: What tasks should we prioritize this week based on overdue bookings and upcoming arrivals?\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"button\",onClick:askChatGpt,disabled:chatLoading,children:chatLoading?'Thinking...':'Ask ChatGPT'})]})]})]});}export default IntegrationHub;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","INITIAL_SETTINGS","chatgpt_enabled","workspace_name","openai_api_key","openai_model","mcp_shared_secret","oauth_enabled","oauth_client_id","oauth_client_secret","oauth_from_env","oauth_redirect_uri","gmail_scan_enabled","gmail_account_email","gmail_scan_window_days","mcp_url","oauth_redirect_default","openai_key_configured","mcp_secret_configured","oauth_client_secret_configured","gmail_token_configured","gmail_connected","gmail_refresh_token_configured","IntegrationHub","_ref","_dataOpsStatus$auto_s","_dataOpsStatus$auto_s2","_dataOpsStatus$auto_s3","_dataOpsStatus$totals","_dataOpsStatus$totals2","_dataOpsStatus$totals3","_dataOpsStatus$totals4","_dataOpsStatus$totals5","_dataOpsStatus$totals6","_dataOpsStatus$totals7","_dataOpsStatus$totals8","_dataOpsStatus$totals9","_dataOpsStatus$totals0","_dataOpsStatus$auto_s4","_dataOpsStatus$auto_s5","onRefreshData","onRefreshTasks","onRefreshContacts","onRefreshWaitlist","settings","setSettings","loading","setLoading","saving","setSaving","testing","setTesting","chatLoading","setChatLoading","chatInput","setChatInput","includeContext","setIncludeContext","chatHistory","setChatHistory","scanningGmail","setScanningGmail","pendingScans","setPendingScans","approvingBatchId","setApprovingBatchId","dataOpsStatus","setDataOpsStatus","dataOpsLoading","setDataOpsLoading","dataOpsAction","setDataOpsAction","gmailStatus","setGmailStatus","connectingGmail","setConnectingGmail","disconnectingGmail","setDisconnectingGmail","savingAndConnecting","setSavingAndConnecting","gmailNotice","setGmailNotice","loadSettings","response","get","prev","_objectSpread","data","error","console","alert","loadGmailStatus","loadPendingScans","loadDataManagementStatus","params","URLSearchParams","window","location","search","history","replaceState","pathname","concat","saveSettings","put","_error$response","_error$response$data","connectGmail","href","url","_error$response2","_error$response2$data","saveAndConnect","trim","_error$response3","_error$response3$data","disconnectGmail","confirm","post","_error$response4","_error$response4$data","testConnection","model","preview","_error$response5","_error$response5$data","askChatGpt","trimmed","nextHistory","role","content","message","include_crm_context","reply","_error$response6","_error$response6$data","scanGmail","_response$data","scan_window_days","found","total_found","_error$response7","_error$response7$data","approveScan","batchId","_response$data2","total_applied","_error$response8","_error$response8$data","runDataAction","actionKey","request","saveAllDataNow","_response$data3","backup_file","_error$response9","_error$response9$data","_error$response0","_error$response0$data","populateDummyData","_error$response1","_error$response1$data","removeDummyData","_error$response10","_error$response10$dat","className","children","type","checked","onChange","e","target","value","placeholder","min","parseInt","onClick","disabled","startsWith","replace","connected","account_email","has_refresh_token","callback_uri","oauth_client_configured","auto_save","interval_minutes","last_save_at","last_save_type","totals","bookings","contracts","waitlist_entries","tasks","contacts","last_save_path","last_error","length","map","batch","_batch$items","id","slice","created_at","items","item","full_name","email","occurred_at","direction","summary","msg","index"],"sources":["/home/rob/.openclaw/workspace/campsite-crm/frontend/src/components/IntegrationHub.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport '../styles/IntegrationHub.css';\n\nconst INITIAL_SETTINGS = {\n  chatgpt_enabled: false,\n  workspace_name: 'Campsite CRM',\n  openai_api_key: '',\n  openai_model: 'gpt-4.1-mini',\n  mcp_shared_secret: '',\n  oauth_enabled: false,\n  oauth_client_id: '',\n  oauth_client_secret: '',\n  oauth_from_env: false,\n  oauth_redirect_uri: '',\n  gmail_scan_enabled: false,\n  gmail_account_email: '',\n  gmail_scan_window_days: 45,\n  mcp_url: '',\n  oauth_redirect_default: '',\n  openai_key_configured: false,\n  mcp_secret_configured: false,\n  oauth_client_secret_configured: false,\n  gmail_token_configured: false,\n  gmail_connected: false,\n  gmail_refresh_token_configured: false\n};\n\nfunction IntegrationHub({ onRefreshData, onRefreshTasks, onRefreshContacts, onRefreshWaitlist }) {\n  const [settings, setSettings] = useState(INITIAL_SETTINGS);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [testing, setTesting] = useState(false);\n  const [chatLoading, setChatLoading] = useState(false);\n  const [chatInput, setChatInput] = useState('');\n  const [includeContext, setIncludeContext] = useState(true);\n  const [chatHistory, setChatHistory] = useState([]);\n  const [scanningGmail, setScanningGmail] = useState(false);\n  const [pendingScans, setPendingScans] = useState([]);\n  const [approvingBatchId, setApprovingBatchId] = useState('');\n  const [dataOpsStatus, setDataOpsStatus] = useState(null);\n  const [dataOpsLoading, setDataOpsLoading] = useState(true);\n  const [dataOpsAction, setDataOpsAction] = useState('');\n  const [gmailStatus, setGmailStatus] = useState(null);\n  const [connectingGmail, setConnectingGmail] = useState(false);\n  const [disconnectingGmail, setDisconnectingGmail] = useState(false);\n  const [savingAndConnecting, setSavingAndConnecting] = useState(false);\n  const [gmailNotice, setGmailNotice] = useState('');\n\n  const loadSettings = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get('/api/integrations/chatgpt/settings');\n      setSettings((prev) => ({ ...prev, ...response.data }));\n    } catch (error) {\n      console.error('Error loading integration settings:', error);\n      alert('Unable to load integration settings right now');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadGmailStatus = async () => {\n    try {\n      const response = await axios.get('/api/auth/gmail/status');\n      setGmailStatus(response.data || null);\n    } catch (error) {\n      console.error('Error loading Gmail status:', error);\n    }\n  };\n\n  const loadPendingScans = async () => {\n    try {\n      const response = await axios.get('/api/integrations/chatgpt/gmail/scans/pending');\n      setPendingScans(response.data || []);\n    } catch (error) {\n      console.error('Error loading pending scans:', error);\n    }\n  };\n\n  const loadDataManagementStatus = async () => {\n    setDataOpsLoading(true);\n    try {\n      const response = await axios.get('/api/data-management/status');\n      setDataOpsStatus(response.data || null);\n    } catch (error) {\n      console.error('Error loading data management status:', error);\n      setDataOpsStatus(null);\n    } finally {\n      setDataOpsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    // Check if we just returned from Gmail OAuth\n    const params = new URLSearchParams(window.location.search);\n    if (params.get('gmail_connected') === '1') {\n      setGmailNotice('success');\n      window.history.replaceState({}, '', window.location.pathname);\n    } else if (params.get('gmail_error')) {\n      setGmailNotice(`error:${params.get('gmail_error')}`);\n      window.history.replaceState({}, '', window.location.pathname);\n    }\n    loadSettings();\n    loadGmailStatus();\n    loadPendingScans();\n    loadDataManagementStatus();\n  }, []);\n\n  const saveSettings = async () => {\n    setSaving(true);\n    try {\n      await axios.put('/api/integrations/chatgpt/settings', {\n        chatgpt_enabled: settings.chatgpt_enabled,\n        workspace_name: settings.workspace_name,\n        openai_api_key: settings.openai_api_key,\n        openai_model: settings.openai_model,\n        mcp_shared_secret: settings.mcp_shared_secret,\n        oauth_enabled: settings.oauth_enabled,\n        oauth_client_id: settings.oauth_client_id,\n        oauth_client_secret: settings.oauth_client_secret,\n        oauth_redirect_uri: settings.oauth_redirect_uri,\n        gmail_scan_window_days: settings.gmail_scan_window_days\n      });\n      await loadSettings();\n      alert('Integration settings saved');\n    } catch (error) {\n      console.error('Error saving integration settings:', error);\n      alert(error.response?.data?.error || 'Unable to save settings');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const connectGmail = async () => {\n    setConnectingGmail(true);\n    try {\n      const response = await axios.get('/api/auth/gmail/connect-url');\n      window.location.href = response.data.url;\n    } catch (error) {\n      console.error('Error starting Gmail OAuth:', error);\n      alert(error.response?.data?.error || 'Unable to start Gmail connection. Make sure OAuth Client ID and Secret are saved first.');\n      setConnectingGmail(false);\n    }\n  };\n\n  // Saves OAuth credentials then immediately starts the Gmail OAuth redirect.\n  // Used when credentials haven't been stored yet — one click does both steps.\n  const saveAndConnect = async () => {\n    if (!settings.oauth_client_id.trim()) {\n      alert('Enter your Google OAuth Client ID first.');\n      return;\n    }\n    setSavingAndConnecting(true);\n    try {\n      await axios.put('/api/integrations/chatgpt/settings', {\n        chatgpt_enabled: settings.chatgpt_enabled,\n        workspace_name: settings.workspace_name,\n        openai_api_key: settings.openai_api_key,\n        openai_model: settings.openai_model,\n        mcp_shared_secret: settings.mcp_shared_secret,\n        oauth_enabled: settings.oauth_enabled,\n        oauth_client_id: settings.oauth_client_id,\n        oauth_client_secret: settings.oauth_client_secret,\n        oauth_redirect_uri: settings.oauth_redirect_uri,\n        gmail_scan_window_days: settings.gmail_scan_window_days\n      });\n      const response = await axios.get('/api/auth/gmail/connect-url');\n      window.location.href = response.data.url;\n    } catch (error) {\n      console.error('Error saving OAuth and connecting:', error);\n      alert(error.response?.data?.error || 'Unable to connect Gmail. Check your OAuth credentials.');\n      setSavingAndConnecting(false);\n    }\n  };\n\n  const disconnectGmail = async () => {\n    if (!window.confirm('Disconnect Gmail? The stored tokens will be removed and email scanning will stop.')) return;\n    setDisconnectingGmail(true);\n    try {\n      await axios.post('/api/auth/gmail/disconnect');\n      await loadGmailStatus();\n      await loadSettings();\n      setGmailNotice('');\n    } catch (error) {\n      console.error('Error disconnecting Gmail:', error);\n      alert(error.response?.data?.error || 'Unable to disconnect Gmail');\n    } finally {\n      setDisconnectingGmail(false);\n    }\n  };\n\n  const testConnection = async () => {\n    setTesting(true);\n    try {\n      const response = await axios.post('/api/integrations/chatgpt/test');\n      alert(`Connection OK (${response.data.model}): ${response.data.preview || 'No preview'}`);\n    } catch (error) {\n      console.error('Error testing ChatGPT connection:', error);\n      alert(error.response?.data?.error || 'Connection test failed');\n    } finally {\n      setTesting(false);\n    }\n  };\n\n  const askChatGpt = async () => {\n    const trimmed = chatInput.trim();\n    if (!trimmed) return;\n\n    const nextHistory = [...chatHistory, { role: 'user', content: trimmed }];\n    setChatHistory(nextHistory);\n    setChatInput('');\n    setChatLoading(true);\n\n    try {\n      const response = await axios.post('/api/chatgpt/chat', {\n        message: trimmed,\n        history: nextHistory,\n        include_crm_context: includeContext\n      });\n\n      setChatHistory((prev) => [...prev, { role: 'assistant', content: response.data.reply || '' }]);\n\n      if (onRefreshData) onRefreshData();\n      if (onRefreshTasks) onRefreshTasks();\n    } catch (error) {\n      console.error('Error querying chat endpoint:', error);\n      setChatHistory((prev) => [\n        ...prev,\n        { role: 'assistant', content: `Error: ${error.response?.data?.error || 'Unable to reach ChatGPT endpoint.'}` }\n      ]);\n    } finally {\n      setChatLoading(false);\n    }\n  };\n\n  const scanGmail = async () => {\n    setScanningGmail(true);\n    try {\n      const response = await axios.post('/api/integrations/chatgpt/gmail/scan', {\n        scan_window_days: settings.gmail_scan_window_days\n      });\n\n      const found = response.data?.total_found || 0;\n      if (found > 0) {\n        alert(`Scan complete. Found ${found} pending updates to review.`);\n      } else {\n        alert('Scan complete. No new updates found.');\n      }\n\n      await loadPendingScans();\n    } catch (error) {\n      console.error('Error scanning Gmail:', error);\n      alert(error.response?.data?.error || 'Failed to scan Gmail');\n    } finally {\n      setScanningGmail(false);\n    }\n  };\n\n  const approveScan = async (batchId) => {\n    setApprovingBatchId(batchId);\n    try {\n      const response = await axios.post(`/api/integrations/chatgpt/gmail/scans/${batchId}/approve`);\n      alert(`Approved. Applied ${response.data?.total_applied || 0} interactions.`);\n      await loadPendingScans();\n      if (onRefreshContacts) onRefreshContacts();\n      if (onRefreshData) onRefreshData();\n    } catch (error) {\n      console.error('Error approving scan:', error);\n      alert(error.response?.data?.error || 'Failed to approve updates');\n    } finally {\n      setApprovingBatchId('');\n    }\n  };\n\n  const runDataAction = async (actionKey, request) => {\n    setDataOpsAction(actionKey);\n    try {\n      const response = await request();\n      await loadDataManagementStatus();\n      if (onRefreshData) onRefreshData();\n      if (onRefreshTasks) onRefreshTasks();\n      if (onRefreshContacts) onRefreshContacts();\n      if (onRefreshWaitlist) onRefreshWaitlist();\n      return response;\n    } finally {\n      setDataOpsAction('');\n    }\n  };\n\n  const saveAllDataNow = async () => {\n    try {\n      const response = await runDataAction('save', () => axios.post('/api/data-management/save'));\n      alert(`Data snapshot saved: ${response.data?.backup_file || 'Saved'}`);\n    } catch (error) {\n      console.error('Error saving data snapshot:', error);\n      alert(error.response?.data?.error || error.response?.data?.message || 'Failed to save data snapshot');\n    }\n  };\n\n  const populateDummyData = async () => {\n    if (!window.confirm('Populate all CRM sections with dummy demo data? Existing dummy rows will be replaced.')) return;\n    try {\n      await runDataAction('populate', () => axios.post('/api/data-management/dummy/populate'));\n      alert('Dummy data populated across bookings, contracts, waitlist, tasks, and contacts.');\n    } catch (error) {\n      console.error('Error populating dummy data:', error);\n      alert(error.response?.data?.error || 'Failed to populate dummy data');\n    }\n  };\n\n  const removeDummyData = async () => {\n    if (!window.confirm('Remove all dummy CRM data now? Real data will not be deleted.')) return;\n    try {\n      await runDataAction('remove', () => axios.post('/api/data-management/dummy/remove'));\n      alert('Dummy data removed.');\n    } catch (error) {\n      console.error('Error removing dummy data:', error);\n      alert(error.response?.data?.error || 'Failed to remove dummy data');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"card\">\n        <h2>⚙️ ChatGPT + MCP Settings</h2>\n        <p>Loading integration settings...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"integration-grid\">\n      <section className=\"card\">\n        <h2>⚙️ ChatGPT + MCP Settings</h2>\n        <p className=\"section-subtext\">Connect Campsite CRM to ChatGPT and enable Gmail interaction scanning.</p>\n\n        <div className=\"integration-status-row\">\n          <div className=\"badge-pill\">OpenAI Key: {settings.openai_key_configured ? 'Configured' : 'Missing'}</div>\n          <div className={`badge-pill ${settings.gmail_connected ? 'badge-pill--success' : ''}`}>\n            Gmail: {settings.gmail_connected ? `Connected${settings.gmail_account_email ? ` — ${settings.gmail_account_email}` : ''}` : 'Not connected'}\n          </div>\n          <div className=\"badge-pill\">MCP Secret: {settings.mcp_secret_configured ? 'Configured' : 'Optional'}</div>\n        </div>\n\n        <div className=\"settings-grid\">\n          <label className=\"toggle-row\">\n            <input\n              type=\"checkbox\"\n              checked={settings.chatgpt_enabled}\n              onChange={(e) => setSettings({ ...settings, chatgpt_enabled: e.target.checked })}\n            />\n            Enable ChatGPT Integration\n          </label>\n\n          <div className=\"form-group\">\n            <label>Workspace Name</label>\n            <input\n              type=\"text\"\n              value={settings.workspace_name}\n              onChange={(e) => setSettings({ ...settings, workspace_name: e.target.value })}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>OpenAI API Key</label>\n            <input\n              type=\"password\"\n              value={settings.openai_api_key}\n              onChange={(e) => setSettings({ ...settings, openai_api_key: e.target.value })}\n              placeholder=\"sk-...\"\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>OpenAI Model</label>\n            <input\n              type=\"text\"\n              value={settings.openai_model}\n              onChange={(e) => setSettings({ ...settings, openai_model: e.target.value })}\n              placeholder=\"gpt-4.1-mini\"\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>Gmail Scan Window (days)</label>\n            <input\n              type=\"number\"\n              min=\"1\"\n              value={settings.gmail_scan_window_days}\n              onChange={(e) => setSettings({ ...settings, gmail_scan_window_days: parseInt(e.target.value, 10) || 1 })}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>MCP Shared Secret (Bearer token)</label>\n            <input\n              type=\"password\"\n              value={settings.mcp_shared_secret}\n              onChange={(e) => setSettings({ ...settings, mcp_shared_secret: e.target.value })}\n              placeholder=\"Optional but recommended\"\n            />\n          </div>\n\n          {!settings.oauth_from_env && (\n            <>\n              <div className=\"form-group\">\n                <label>Google OAuth Client ID <span className=\"field-hint\">(from Google Cloud Console)</span></label>\n                <input\n                  type=\"text\"\n                  value={settings.oauth_client_id}\n                  onChange={(e) => setSettings({ ...settings, oauth_client_id: e.target.value })}\n                  placeholder=\"xxxxxxx.apps.googleusercontent.com\"\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label>Google OAuth Client Secret</label>\n                <input\n                  type=\"password\"\n                  value={settings.oauth_client_secret}\n                  onChange={(e) => setSettings({ ...settings, oauth_client_secret: e.target.value })}\n                  placeholder=\"GOCSPX-...\"\n                />\n              </div>\n            </>\n          )}\n        </div>\n\n        <div className=\"form-actions\">\n          <button className=\"btn btn-primary\" type=\"button\" onClick={saveSettings} disabled={saving}>\n            {saving ? 'Saving...' : 'Save Settings'}\n          </button>\n          <button className=\"btn btn-secondary\" type=\"button\" onClick={testConnection} disabled={testing}>\n            {testing ? 'Testing...' : 'Test OpenAI Connection'}\n          </button>\n        </div>\n      </section>\n\n      <section className=\"card\">\n        <h2>📧 Gmail Account Connection</h2>\n        <p className=\"section-subtext\">\n          Connect your Gmail account via OAuth to allow the CRM to scan emails for guest contacts and conversation history.\n          {!settings.oauth_from_env && ' Requires Google OAuth credentials saved above.'}\n        </p>\n\n        {gmailNotice === 'success' && (\n          <div className=\"gmail-notice gmail-notice--success\">\n            Gmail connected successfully! Email scanning is now enabled.\n          </div>\n        )}\n        {gmailNotice.startsWith('error:') && (\n          <div className=\"gmail-notice gmail-notice--error\">\n            Gmail connection failed: {gmailNotice.replace('error:', '')}\n          </div>\n        )}\n\n        {gmailStatus ? (\n          gmailStatus.connected ? (\n            <div className=\"gmail-connected-block\">\n              <div className=\"gmail-connected-info\">\n                <span className=\"gmail-status-dot gmail-status-dot--on\" />\n                <strong>Connected</strong>\n                {gmailStatus.account_email ? <span> as {gmailStatus.account_email}</span> : null}\n                {gmailStatus.has_refresh_token ? <span className=\"badge-pill badge-pill--success\">Auto-refresh enabled</span> : null}\n              </div>\n              <button\n                className=\"btn btn-secondary\"\n                type=\"button\"\n                onClick={disconnectGmail}\n                disabled={disconnectingGmail}\n              >\n                {disconnectingGmail ? 'Disconnecting...' : 'Disconnect Gmail'}\n              </button>\n            </div>\n          ) : (\n            <div className=\"gmail-connect-block\">\n              <div className=\"gmail-connected-info\">\n                <span className=\"gmail-status-dot gmail-status-dot--off\" />\n                <strong>Not connected</strong>\n              </div>\n              {!gmailStatus.oauth_from_env && (\n                <div className=\"gmail-callback-hint\">\n                  <strong>Authorized Redirect URI — add this in Google Cloud Console:</strong>\n                  <code>{gmailStatus.callback_uri}</code>\n                </div>\n              )}\n              {!gmailStatus.oauth_from_env && !gmailStatus.oauth_client_configured && (\n                <div className=\"gmail-inline-setup\">\n                  <div className=\"form-group\">\n                    <label>Google OAuth Client ID <span className=\"field-hint\">(from Google Cloud Console)</span></label>\n                    <input\n                      type=\"text\"\n                      value={settings.oauth_client_id}\n                      onChange={(e) => setSettings({ ...settings, oauth_client_id: e.target.value })}\n                      placeholder=\"xxxxxxx.apps.googleusercontent.com\"\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Google OAuth Client Secret</label>\n                    <input\n                      type=\"password\"\n                      value={settings.oauth_client_secret}\n                      onChange={(e) => setSettings({ ...settings, oauth_client_secret: e.target.value })}\n                      placeholder=\"GOCSPX-...\"\n                    />\n                  </div>\n                </div>\n              )}\n              <button\n                className=\"btn btn-primary\"\n                type=\"button\"\n                onClick={gmailStatus.oauth_client_configured ? connectGmail : saveAndConnect}\n                disabled={\n                  connectingGmail ||\n                  savingAndConnecting ||\n                  (!gmailStatus.oauth_from_env && !gmailStatus.oauth_client_configured && !settings.oauth_client_id.trim())\n                }\n              >\n                {connectingGmail || savingAndConnecting\n                  ? 'Redirecting to Google...'\n                  : gmailStatus.oauth_client_configured || gmailStatus.oauth_from_env\n                    ? 'Connect Gmail Account'\n                    : 'Save & Connect Gmail'}\n              </button>\n            </div>\n          )\n        ) : (\n          <p className=\"chat-empty\">Loading Gmail status...</p>\n        )}\n      </section>\n\n      <section className=\"card\">\n        <h2>🗂️ Data Management</h2>\n        <p className=\"section-subtext\">Auto-save snapshots run in the backend on a timer. Use these controls to save now and add/remove full dummy CRM data.</p>\n\n        {dataOpsLoading ? (\n          <p className=\"chat-empty\">Loading data management status...</p>\n        ) : (\n          <div className=\"data-status-grid\">\n            <div className=\"badge-pill\">Auto-save every: {dataOpsStatus?.auto_save?.interval_minutes || '-'} min</div>\n            <div className=\"badge-pill\">Last save: {dataOpsStatus?.auto_save?.last_save_at || 'Not yet'}</div>\n            <div className=\"badge-pill\">Last mode: {dataOpsStatus?.auto_save?.last_save_type || '-'}</div>\n            <div className=\"badge-pill\">Bookings: {dataOpsStatus?.totals?.bookings ?? 0}</div>\n            <div className=\"badge-pill\">Contracts: {dataOpsStatus?.totals?.contracts ?? 0}</div>\n            <div className=\"badge-pill\">Waitlist: {dataOpsStatus?.totals?.waitlist_entries ?? 0}</div>\n            <div className=\"badge-pill\">Tasks: {dataOpsStatus?.totals?.tasks ?? 0}</div>\n            <div className=\"badge-pill\">Contacts: {dataOpsStatus?.totals?.contacts ?? 0}</div>\n          </div>\n        )}\n\n        <div className=\"form-actions\">\n          <button className=\"btn btn-primary\" type=\"button\" onClick={saveAllDataNow} disabled={dataOpsAction !== ''}>\n            {dataOpsAction === 'save' ? 'Saving...' : 'Save All Data Now'}\n          </button>\n          <button className=\"btn btn-secondary\" type=\"button\" onClick={populateDummyData} disabled={dataOpsAction !== ''}>\n            {dataOpsAction === 'populate' ? 'Populating...' : 'Populate Dummy Data'}\n          </button>\n          <button className=\"btn btn-secondary\" type=\"button\" onClick={removeDummyData} disabled={dataOpsAction !== ''}>\n            {dataOpsAction === 'remove' ? 'Removing...' : 'Remove Dummy Data'}\n          </button>\n          <button className=\"btn btn-secondary\" type=\"button\" onClick={loadDataManagementStatus} disabled={dataOpsAction !== ''}>\n            Refresh Status\n          </button>\n        </div>\n\n        {dataOpsStatus?.auto_save?.last_save_path ? (\n          <p className=\"section-subtext data-save-path\">Latest backup: {dataOpsStatus.auto_save.last_save_path}</p>\n        ) : null}\n        {dataOpsStatus?.auto_save?.last_error ? (\n          <p className=\"section-subtext data-save-error\">Last auto-save error: {dataOpsStatus.auto_save.last_error}</p>\n        ) : null}\n      </section>\n\n      <section className=\"card\">\n        <h2>📬 Gmail Interaction Scan</h2>\n        <p className=\"section-subtext\">Scan recent Gmail messages, review pending interaction updates, then approve before applying to contacts.</p>\n\n        <div className=\"form-actions\">\n          <button className=\"btn btn-primary\" type=\"button\" onClick={scanGmail} disabled={scanningGmail}>\n            {scanningGmail ? 'Scanning...' : 'Scan Gmail for Recent Interactions'}\n          </button>\n        </div>\n\n        <div className=\"scan-list\">\n          {pendingScans.length > 0 ? pendingScans.map((batch) => (\n            <div key={batch.id} className=\"scan-card\">\n              <div className=\"scan-card-head\">\n                <div>\n                  <strong>Batch {batch.id.slice(0, 8)}</strong>\n                  <p>Found {batch.total_found} updates on {batch.created_at}</p>\n                </div>\n                <button\n                  className=\"btn btn-secondary btn-small\"\n                  type=\"button\"\n                  onClick={() => approveScan(batch.id)}\n                  disabled={approvingBatchId === batch.id}\n                >\n                  {approvingBatchId === batch.id ? 'Approving...' : 'Approve Updates'}\n                </button>\n              </div>\n              <div className=\"scan-items\">\n                {batch.items?.length > 0 ? batch.items.map((item) => (\n                  <div key={item.id} className=\"scan-item\">\n                    <strong>{item.full_name || item.email}</strong>\n                    <span>{item.occurred_at || '-'} {item.direction ? `(${item.direction})` : ''}</span>\n                    <p>{item.summary}</p>\n                  </div>\n                )) : <p className=\"chat-empty\">No item preview available.</p>}\n              </div>\n            </div>\n          )) : <p className=\"chat-empty\">No pending scan updates right now.</p>}\n        </div>\n      </section>\n\n      <section className=\"card\">\n        <h2>🧭 Setup Instructions</h2>\n        <ol className=\"instructions-list\">\n          {!settings.oauth_from_env && (\n            <>\n              <li>In <strong>Google Cloud Console</strong>, create an OAuth 2.0 Client ID (Web application type). Add the Authorized Redirect URI shown in the Gmail Connection section above.</li>\n              <li>Paste the Client ID and Client Secret into settings above and click <strong>Save Settings</strong>.</li>\n            </>\n          )}\n          <li>Optionally add an OpenAI API key and enable ChatGPT integration for AI-powered email analysis.</li>\n          <li>Click <strong>Connect Gmail Account</strong> in the Gmail Connection section and approve access in your browser.</li>\n          <li>Once connected, go to the <strong>Contacts</strong> tab and run a Gmail scan. Review suggestions and apply the ones you want.</li>\n          <li>Use the MCP endpoint URL below in your MCP client or ChatGPT bridge.</li>\n        </ol>\n\n        <div className=\"instruction-code\">\n          <strong>MCP URL</strong>\n          <code>{settings.mcp_url || '-'}</code>\n        </div>\n\n        <div className=\"instruction-code\">\n          <strong>Quick MCP initialize example</strong>\n          <code>{`curl -X POST ${settings.mcp_url || 'http://localhost:5000/mcp'} -H \"Content-Type: application/json\" -d '{\"jsonrpc\":\"2.0\",\"id\":1,\"method\":\"initialize\",\"params\":{}}'`}</code>\n        </div>\n      </section>\n\n      <section className=\"card integration-chat-card\">\n        <h2>💬 Ask ChatGPT Inside CRM</h2>\n        <p className=\"section-subtext\">This chat can include live CRM context (bookings, waitlist, tasks, summary).</p>\n\n        <label className=\"toggle-row\">\n          <input\n            type=\"checkbox\"\n            checked={includeContext}\n            onChange={(e) => setIncludeContext(e.target.checked)}\n          />\n          Include live CRM context in prompts\n        </label>\n\n        <div className=\"chat-log\">\n          {chatHistory.length > 0 ? chatHistory.map((msg, index) => (\n            <div key={`${msg.role}-${index}`} className={`chat-msg ${msg.role}`}>\n              <strong>{msg.role === 'assistant' ? 'ChatGPT' : 'You'}</strong>\n              <p>{msg.content}</p>\n            </div>\n          )) : (\n            <p className=\"chat-empty\">No chat yet. Ask about bookings, occupancy, overdue balances, or task planning.</p>\n          )}\n        </div>\n\n        <div className=\"chat-input-row\">\n          <textarea\n            value={chatInput}\n            onChange={(e) => setChatInput(e.target.value)}\n            placeholder=\"Example: What tasks should we prioritize this week based on overdue bookings and upcoming arrivals?\"\n          />\n          <button className=\"btn btn-primary\" type=\"button\" onClick={askChatGpt} disabled={chatLoading}>\n            {chatLoading ? 'Thinking...' : 'Ask ChatGPT'}\n          </button>\n        </div>\n      </section>\n    </div>\n  );\n}\n\nexport default IntegrationHub;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}