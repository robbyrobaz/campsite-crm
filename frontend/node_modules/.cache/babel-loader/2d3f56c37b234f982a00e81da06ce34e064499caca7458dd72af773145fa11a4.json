{"ast":null,"code":"import _objectSpread from\"/home/rob/.openclaw/workspace/campsite-crm/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef,useCallback}from'react';import axios from'axios';import'./App.css';import'./styles/InsightsExtras.css';import Dashboard from'./components/Dashboard';import BookingForm from'./components/BookingForm';import BookingsTable from'./components/BookingsTable';import ReturnGuestAnalysis from'./components/ReturnGuestAnalysis';import AreaUtilization from'./components/AreaUtilization';import PaymentCenter from'./components/PaymentCenter';import WaitlistManager from'./components/WaitlistManager';import TaskManager from'./components/TaskManager';import IntegrationHub from'./components/IntegrationHub';import BookingAssistant from'./components/BookingAssistant';import Contacts from'./components/Contacts';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BOOKING_STATUS_OPTIONS=[{value:'active',label:'Active'},{value:'confirmed',label:'Confirmed'},{value:'checked-in',label:'Checked In'},{value:'checked-out',label:'Checked Out'},{value:'canceled',label:'Canceled'},{value:'no-show',label:'No-Show'}];const WAITLIST_STATUS_OPTIONS=[{value:'waiting',label:'Waiting'},{value:'contacted',label:'Contacted'},{value:'converted',label:'Converted'},{value:'closed',label:'Closed'}];const TABS=[{id:'dashboard',label:'Dashboard',icon:'ðŸ“Š'},{id:'bookings',label:'Bookings',icon:'ðŸ“…'},{id:'add',label:'New Booking',icon:'âž•'},{id:'payments',label:'Payments',icon:'ðŸ’³'},{id:'tasks',label:'Tasks',icon:'âœ…'},{id:'waitlist',label:'Waitlist',icon:'ðŸ“'},{id:'assistant',label:'Booking Assistant',icon:'ðŸ§­'},{id:'returns',label:'Return Guests',icon:'ðŸ”„'},{id:'areas',label:'Area Usage',icon:'ðŸ•ï¸'},{id:'contacts',label:'Contacts',icon:'ðŸ‘¥'},{id:'settings',label:'Settings',icon:'âš™ï¸'}];const AUTH_STORAGE_KEY='campsite_crm_auth_v1';const APPEARANCE_STORAGE_KEY='campsite_crm_appearance_v1';const DEFAULT_APPEARANCE={palette:'turquoise-sunrise',shadow:'lush'};const APPEARANCE_OPTIONS=[{value:'turquoise-sunrise',label:'Turquoise Sunrise'},{value:'ocean-breeze',label:'Ocean Breeze'},{value:'mint-current',label:'Mint Current'},{value:'coral-glow',label:'Coral Glow'},{value:'sunset-citrus',label:'Sunset Citrus'},{value:'lavender-dusk',label:'Lavender Dusk'},{value:'berry-pop',label:'Berry Pop'},{value:'forest-mist',label:'Forest Mist'},{value:'midnight-teal',label:'Midnight Teal'},{value:'golden-hour',label:'Golden Hour'},{value:'slate-ice',label:'Slate Ice'},{value:'rosewater',label:'Rosewater'},{value:'ember-night',label:'Ember Night'}];const SHADOW_OPTIONS=[{value:'soft',label:'Soft shadows'},{value:'lush',label:'Lush shadows'},{value:'bold',label:'Bold shadows'}];const decodeJwtPayload=token=>{try{const payload=token.split('.')[1];if(!payload)return null;const base64=payload.replace(/-/g,'+').replace(/_/g,'/');const json=decodeURIComponent(atob(base64).split('').map(char=>\"%\".concat(\"00\".concat(char.charCodeAt(0).toString(16)).slice(-2))).join(''));return JSON.parse(json);}catch(error){return null;}};function App(){const googleClientId=process.env.REACT_APP_GOOGLE_CLIENT_ID||'';const googleButtonRef=useRef(null);const[isAuthenticated,setIsAuthenticated]=useState(false);const[authUser,setAuthUser]=useState(null);const[authMethod,setAuthMethod]=useState('');const[authError,setAuthError]=useState('');const[activeTab,setActiveTab]=useState('dashboard');const[bookings,setBookings]=useState([]);const[summary,setSummary]=useState(null);const[loading,setLoading]=useState(false);const[statusSummary,setStatusSummary]=useState([]);const[arrivalRadar,setArrivalRadar]=useState([]);const[guestTypeData,setGuestTypeData]=useState([]);const[guestSpotlight,setGuestSpotlight]=useState([]);const[contracts,setContracts]=useState([]);const[returnGuests,setReturnGuests]=useState([]);const[paymentSummary,setPaymentSummary]=useState(null);const[messageQueue,setMessageQueue]=useState([]);const[pricingData,setPricingData]=useState([]);const[addonSummary,setAddonSummary]=useState({total_addon_revenue:0,items:[]});const[waitlistEntries,setWaitlistEntries]=useState([]);const[tasks,setTasks]=useState([]);const[contactsRefreshToken,setContactsRefreshToken]=useState(0);const[appearance,setAppearance]=useState(DEFAULT_APPEARANCE);const[dateRange,setDateRange]=useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split('T')[0],endDate:new Date().toISOString().split('T')[0]});const persistAuth=useCallback(session=>{localStorage.setItem(AUTH_STORAGE_KEY,JSON.stringify(session));setIsAuthenticated(true);setAuthUser(session.user);setAuthMethod(session.method);setAuthError('');},[]);const handleBypassLogin=useCallback(()=>{persistAuth({method:'bypass',user:{name:'Beta Tester',email:''}});},[persistAuth]);const handleLogout=useCallback(()=>{var _window$google,_window$google$accoun;localStorage.removeItem(AUTH_STORAGE_KEY);setIsAuthenticated(false);setAuthUser(null);setAuthMethod('');setAuthError('');if((_window$google=window.google)!==null&&_window$google!==void 0&&(_window$google$accoun=_window$google.accounts)!==null&&_window$google$accoun!==void 0&&_window$google$accoun.id){window.google.accounts.id.disableAutoSelect();}},[]);useEffect(()=>{const saved=localStorage.getItem(AUTH_STORAGE_KEY);if(!saved)return;try{var _parsed$user;const parsed=JSON.parse(saved);if(parsed!==null&&parsed!==void 0&&(_parsed$user=parsed.user)!==null&&_parsed$user!==void 0&&_parsed$user.name&&parsed!==null&&parsed!==void 0&&parsed.method){setIsAuthenticated(true);setAuthUser(parsed.user);setAuthMethod(parsed.method);}}catch(error){localStorage.removeItem(AUTH_STORAGE_KEY);}},[]);// Handle return from Gmail OAuth flow â€” switch to Settings tab so the user sees the result.\nuseEffect(()=>{const params=new URLSearchParams(window.location.search);if(params.get('gmail_connected')==='1'||params.get('gmail_error')){setActiveTab('settings');}},[]);useEffect(()=>{const rawAppearance=localStorage.getItem(APPEARANCE_STORAGE_KEY);if(!rawAppearance)return;try{const parsed=JSON.parse(rawAppearance);const nextPalette=APPEARANCE_OPTIONS.some(option=>option.value===(parsed===null||parsed===void 0?void 0:parsed.palette))?parsed.palette:DEFAULT_APPEARANCE.palette;const nextShadow=SHADOW_OPTIONS.some(option=>option.value===(parsed===null||parsed===void 0?void 0:parsed.shadow))?parsed.shadow:DEFAULT_APPEARANCE.shadow;setAppearance({palette:nextPalette,shadow:nextShadow});}catch(error){localStorage.removeItem(APPEARANCE_STORAGE_KEY);}},[]);useEffect(()=>{document.documentElement.dataset.theme=appearance.palette;document.documentElement.dataset.shadow=appearance.shadow;localStorage.setItem(APPEARANCE_STORAGE_KEY,JSON.stringify(appearance));},[appearance]);const handleGoogleCredential=useCallback(response=>{const payload=decodeJwtPayload((response===null||response===void 0?void 0:response.credential)||'');if(!(payload!==null&&payload!==void 0&&payload.email)){setAuthError('Google sign-in returned an invalid token. Try again.');return;}persistAuth({method:'google',user:{name:payload.name||payload.email,email:payload.email,avatar:payload.picture||''}});},[persistAuth]);useEffect(()=>{var _window$google3,_window$google3$accou;if(isAuthenticated||!googleClientId||!googleButtonRef.current)return;let isMounted=true;const initializeButton=()=>{var _window$google2,_window$google2$accou;if(!isMounted||!((_window$google2=window.google)!==null&&_window$google2!==void 0&&(_window$google2$accou=_window$google2.accounts)!==null&&_window$google2$accou!==void 0&&_window$google2$accou.id)||!googleButtonRef.current)return;googleButtonRef.current.innerHTML='';window.google.accounts.id.initialize({client_id:googleClientId,callback:handleGoogleCredential});window.google.accounts.id.renderButton(googleButtonRef.current,{theme:'outline',size:'large',shape:'pill',width:260});};if((_window$google3=window.google)!==null&&_window$google3!==void 0&&(_window$google3$accou=_window$google3.accounts)!==null&&_window$google3$accou!==void 0&&_window$google3$accou.id){initializeButton();return()=>{isMounted=false;};}const existingScript=document.querySelector('script[data-google-identity]');if(existingScript){existingScript.addEventListener('load',initializeButton,{once:true});return()=>{isMounted=false;};}const script=document.createElement('script');script.src='https://accounts.google.com/gsi/client';script.async=true;script.defer=true;script.dataset.googleIdentity='true';script.onload=initializeButton;script.onerror=()=>{setAuthError('Unable to load Google sign-in right now.');};document.head.appendChild(script);return()=>{isMounted=false;};},[googleClientId,handleGoogleCredential,isAuthenticated]);const fetchCoreData=async()=>{setLoading(true);try{const[bookingsRes,summaryRes]=await Promise.all([axios.get('/api/bookings',{params:dateRange}),axios.get('/api/dashboard/summary',{params:dateRange})]);setBookings(bookingsRes.data||[]);setSummary(summaryRes.data||{});}catch(error){console.error('Error fetching core data:',error);}finally{setLoading(false);}};const fetchDashboardExtras=async()=>{try{var _pricingRes$data;const[statusRes,radarRes,guestTypeRes,returnGuestsRes,contractsRes,paymentRes,messagesRes,pricingRes,addonsRes]=await Promise.all([axios.get('/api/bookings/status-summary',{params:dateRange}),axios.get('/api/bookings/arrival-radar'),axios.get('/api/bookings/by-guest-type',{params:dateRange}),axios.get('/api/return-guests'),axios.get('/api/contracts/active'),axios.get('/api/payments/summary',{params:dateRange}),axios.get('/api/messages/upcoming'),axios.get('/api/pricing/recommendations'),axios.get('/api/addons/summary',{params:dateRange})]);const returnGuestRows=returnGuestsRes.data||[];setStatusSummary(statusRes.data||[]);setArrivalRadar(radarRes.data||[]);setGuestTypeData(guestTypeRes.data||[]);setGuestSpotlight(returnGuestRows.slice(0,3));setReturnGuests(returnGuestRows);setContracts(contractsRes.data||[]);setPaymentSummary(paymentRes.data||null);setMessageQueue(messagesRes.data||[]);setPricingData(((_pricingRes$data=pricingRes.data)===null||_pricingRes$data===void 0?void 0:_pricingRes$data.recommendations)||[]);setAddonSummary(addonsRes.data||{total_addon_revenue:0,items:[]});}catch(error){console.error('Error fetching dashboard extras:',error);}};const fetchWaitlist=async()=>{try{const response=await axios.get('/api/waitlist');setWaitlistEntries(response.data||[]);}catch(error){console.error('Error fetching waitlist:',error);}};const fetchTasks=async()=>{try{const response=await axios.get('/api/tasks');setTasks(response.data||[]);}catch(error){console.error('Error fetching tasks:',error);}};const refreshDashboard=()=>{fetchCoreData();fetchDashboardExtras();};useEffect(()=>{refreshDashboard();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[dateRange]);useEffect(()=>{if(activeTab==='waitlist'){fetchWaitlist();}if(activeTab==='tasks'){fetchTasks();}},[activeTab]);const handleAddBooking=async bookingData=>{try{await axios.post('/api/bookings',bookingData);refreshDashboard();alert('Booking added successfully! ðŸŽ‰');}catch(error){console.error('Error adding booking:',error);alert('Failed to add booking');}};const handleDeleteBooking=async id=>{if(window.confirm('Are you sure you want to delete this booking?')){try{await axios.delete(\"/api/bookings/\".concat(id));refreshDashboard();alert('Booking deleted');}catch(error){console.error('Error deleting booking:',error);}}};const handleStatusUpdate=async(bookingId,newStatus)=>{const booking=bookings.find(b=>b.id===bookingId);if(!booking)return;try{await axios.put(\"/api/bookings/\".concat(bookingId),_objectSpread(_objectSpread({},booking),{},{status:newStatus}));refreshDashboard();}catch(error){console.error('Error updating booking status:',error);alert('Unable to update booking status right now');}};const handlePaymentUpdate=async(bookingId,paymentData)=>{const booking=bookings.find(b=>b.id===bookingId);if(!booking)return;try{await axios.put(\"/api/bookings/\".concat(bookingId),_objectSpread(_objectSpread({},booking),paymentData));refreshDashboard();}catch(error){console.error('Error updating payment details:',error);alert('Unable to update payment details right now');}};const handleAddWaitlistEntry=async entry=>{try{await axios.post('/api/waitlist',entry);fetchWaitlist();alert('Waitlist entry added');}catch(error){console.error('Error adding waitlist entry:',error);alert('Unable to add waitlist entry right now');}};const handleWaitlistStatusChange=async(entry,status)=>{try{await axios.put(\"/api/waitlist/\".concat(entry.id),_objectSpread(_objectSpread({},entry),{},{status}));fetchWaitlist();}catch(error){console.error('Error updating waitlist status:',error);alert('Unable to update waitlist status right now');}};const handleConvertWaitlist=async entry=>{const revenueValue=window.prompt(\"Revenue for \".concat(entry.guest_name,\"?\"),'0');if(revenueValue===null)return;try{await axios.post(\"/api/waitlist/\".concat(entry.id,\"/convert\"),{revenue:parseFloat(revenueValue)||0,area_rented:entry.preferred_area||'tent',nights:1,status:'confirmed'});fetchWaitlist();refreshDashboard();alert('Converted to booking');}catch(error){console.error('Error converting waitlist entry:',error);alert('Unable to convert waitlist entry right now');}};const handleDeleteWaitlistEntry=async entryId=>{if(!window.confirm('Delete this waitlist entry?'))return;try{await axios.delete(\"/api/waitlist/\".concat(entryId));fetchWaitlist();}catch(error){console.error('Error deleting waitlist entry:',error);alert('Unable to delete waitlist entry right now');}};const handleAddTask=async taskData=>{try{await axios.post('/api/tasks',taskData);fetchTasks();}catch(error){console.error('Error adding task:',error);alert('Unable to add task right now');}};const handleUpdateTask=async(taskId,updates)=>{try{await axios.put(\"/api/tasks/\".concat(taskId),updates);fetchTasks();}catch(error){console.error('Error updating task:',error);alert('Unable to update task right now');}};const handleDeleteTask=async taskId=>{if(!window.confirm('Delete this task?'))return;try{await axios.delete(\"/api/tasks/\".concat(taskId));fetchTasks();}catch(error){console.error('Error deleting task:',error);alert('Unable to delete task right now');}};const summaryStats=summary||{total_bookings:0,total_revenue:0,return_bookings:0};const activeBookings=bookings.filter(booking=>['active','confirmed','checked-in'].includes(booking.status)).length;const overdueCount=(paymentSummary===null||paymentSummary===void 0?void 0:paymentSummary.overdue_count)||0;const waitlistOpenCount=waitlistEntries.filter(entry=>entry.status==='waiting').length;const dateLabel=\"\".concat(dateRange.startDate,\" to \").concat(dateRange.endDate);if(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{className:\"auth-shell\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Campsite CRM\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Sign in with Google or use bypass mode while beta testing.\"}),googleClientId?/*#__PURE__*/_jsx(\"div\",{className:\"google-signin-slot\",ref:googleButtonRef}):/*#__PURE__*/_jsxs(\"p\",{className:\"auth-note\",children:[\"Google OAuth not configured. Add \",/*#__PURE__*/_jsx(\"code\",{children:\"REACT_APP_GOOGLE_CLIENT_ID\"}),\" in frontend env.\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"bypass-btn\",onClick:handleBypassLogin,children:\"Continue with Beta Bypass\"}),authError&&/*#__PURE__*/_jsx(\"p\",{className:\"auth-error\",children:authError})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"app-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Campsite CRM\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Bookings, payments, and guest operations\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-session\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"auth-session-meta\",children:[/*#__PURE__*/_jsx(\"strong\",{children:(authUser===null||authUser===void 0?void 0:authUser.name)||'Signed In'}),/*#__PURE__*/_jsx(\"span\",{children:authMethod==='google'?'Google OAuth':'Bypass Mode'})]}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:handleLogout,children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-kpis\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-kpi\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Bookings\"}),/*#__PURE__*/_jsx(\"strong\",{children:summaryStats.total_bookings||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-kpi\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Revenue\"}),/*#__PURE__*/_jsxs(\"strong\",{children:[\"$\",(summaryStats.total_revenue||0).toFixed(0)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-kpi\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Returns\"}),/*#__PURE__*/_jsx(\"strong\",{children:summaryStats.return_bookings||0})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"app-layout\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"sidebar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-title\",children:\"Workspace\"}),/*#__PURE__*/_jsx(\"nav\",{className:\"main-nav\",\"aria-label\":\"Main navigation\",children:TABS.map(tab=>/*#__PURE__*/_jsxs(\"button\",{className:\"nav-btn \".concat(activeTab===tab.id?'active':''),onClick:()=>setActiveTab(tab.id),children:[/*#__PURE__*/_jsx(\"span\",{className:\"nav-icon\",children:tab.icon}),/*#__PURE__*/_jsx(\"span\",{children:tab.label})]},tab.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-footer\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Period\"}),/*#__PURE__*/_jsx(\"strong\",{children:dateLabel})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Open Waitlist\"}),/*#__PURE__*/_jsx(\"strong\",{children:waitlistOpenCount})]})]})]}),/*#__PURE__*/_jsx(\"section\",{className:\"workspace\",children:/*#__PURE__*/_jsxs(\"main\",{className:\"app-content\",children:[activeTab==='dashboard'&&/*#__PURE__*/_jsx(Dashboard,{summary:summary,bookings:bookings,loading:loading,statusSummary:statusSummary,arrivalRadar:arrivalRadar,guestValueSpotlight:guestSpotlight,guestTypeData:guestTypeData,contracts:contracts,paymentSummary:paymentSummary,messageQueue:messageQueue,pricingRecommendations:pricingData,addonSummary:addonSummary}),activeTab==='bookings'&&/*#__PURE__*/_jsx(BookingsTable,{bookings:bookings,statusOptions:BOOKING_STATUS_OPTIONS,onDelete:handleDeleteBooking,onStatusChange:handleStatusUpdate,loading:loading}),activeTab==='add'&&/*#__PURE__*/_jsx(BookingForm,{onSubmit:handleAddBooking,statusOptions:BOOKING_STATUS_OPTIONS}),activeTab==='payments'&&/*#__PURE__*/_jsx(PaymentCenter,{bookings:bookings,paymentSummary:paymentSummary,onUpdatePayment:handlePaymentUpdate}),activeTab==='waitlist'&&/*#__PURE__*/_jsx(WaitlistManager,{entries:waitlistEntries,statusOptions:WAITLIST_STATUS_OPTIONS,onAddEntry:handleAddWaitlistEntry,onStatusChange:handleWaitlistStatusChange,onConvert:handleConvertWaitlist,onDelete:handleDeleteWaitlistEntry}),activeTab==='tasks'&&/*#__PURE__*/_jsx(TaskManager,{tasks:tasks,onAddTask:handleAddTask,onUpdateTask:handleUpdateTask,onDeleteTask:handleDeleteTask}),activeTab==='assistant'&&/*#__PURE__*/_jsx(BookingAssistant,{}),activeTab==='returns'&&/*#__PURE__*/_jsx(ReturnGuestAnalysis,{returnGuests:returnGuests,loading:loading}),activeTab==='areas'&&/*#__PURE__*/_jsx(AreaUtilization,{dateRange:dateRange}),activeTab==='contacts'&&/*#__PURE__*/_jsx(Contacts,{refreshToken:contactsRefreshToken}),activeTab==='settings'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card appearance-settings-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"appearance-settings-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Appearance\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Choose from vibrant gradient themes to match your style.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"appearance-palette\",children:\"Color Theme\"}),/*#__PURE__*/_jsx(\"select\",{id:\"appearance-palette\",value:appearance.palette,onChange:event=>setAppearance(current=>_objectSpread(_objectSpread({},current),{},{palette:event.target.value})),children:APPEARANCE_OPTIONS.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"appearance-shadow\",children:\"Shadow Depth\"}),/*#__PURE__*/_jsx(\"select\",{id:\"appearance-shadow\",value:appearance.shadow,onChange:event=>setAppearance(current=>_objectSpread(_objectSpread({},current),{},{shadow:event.target.value})),children:SHADOW_OPTIONS.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"appearance-preview\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"appearance-preview-gradient\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Live Preview\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Header + cards update instantly\"})]})})]}),/*#__PURE__*/_jsx(IntegrationHub,{onRefreshData:refreshDashboard,onRefreshTasks:fetchTasks,onRefreshContacts:()=>setContactsRefreshToken(prev=>prev+1),onRefreshWaitlist:fetchWaitlist})]})]})}),/*#__PURE__*/_jsxs(\"aside\",{className:\"right-rail\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rail-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Filters\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"date-range-selector\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"date-input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"start-date\",children:\"From\"}),/*#__PURE__*/_jsx(\"input\",{id:\"start-date\",type:\"date\",value:dateRange.startDate,onChange:e=>setDateRange(_objectSpread(_objectSpread({},dateRange),{},{startDate:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"date-input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"end-date\",children:\"To\"}),/*#__PURE__*/_jsx(\"input\",{id:\"end-date\",type:\"date\",value:dateRange.endDate,onChange:e=>setDateRange(_objectSpread(_objectSpread({},dateRange),{},{endDate:e.target.value}))})]}),/*#__PURE__*/_jsx(\"button\",{className:\"refresh-btn\",onClick:refreshDashboard,disabled:loading,children:loading?'Loading...':'Refresh Data'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rail-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Live Ops\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rail-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rail-stat\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Active Stays\"}),/*#__PURE__*/_jsx(\"strong\",{children:activeBookings})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rail-stat\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Overdue Payments\"}),/*#__PURE__*/_jsx(\"strong\",{children:overdueCount})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rail-stat\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Waitlist Queue\"}),/*#__PURE__*/_jsx(\"strong\",{children:waitlistEntries.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rail-stat\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Return Guests\"}),/*#__PURE__*/_jsx(\"strong\",{children:returnGuests.length})]})]})]})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","axios","Dashboard","BookingForm","BookingsTable","ReturnGuestAnalysis","AreaUtilization","PaymentCenter","WaitlistManager","TaskManager","IntegrationHub","BookingAssistant","Contacts","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BOOKING_STATUS_OPTIONS","value","label","WAITLIST_STATUS_OPTIONS","TABS","id","icon","AUTH_STORAGE_KEY","APPEARANCE_STORAGE_KEY","DEFAULT_APPEARANCE","palette","shadow","APPEARANCE_OPTIONS","SHADOW_OPTIONS","decodeJwtPayload","token","payload","split","base64","replace","json","decodeURIComponent","atob","map","char","concat","charCodeAt","toString","slice","join","JSON","parse","error","App","googleClientId","process","env","REACT_APP_GOOGLE_CLIENT_ID","googleButtonRef","isAuthenticated","setIsAuthenticated","authUser","setAuthUser","authMethod","setAuthMethod","authError","setAuthError","activeTab","setActiveTab","bookings","setBookings","summary","setSummary","loading","setLoading","statusSummary","setStatusSummary","arrivalRadar","setArrivalRadar","guestTypeData","setGuestTypeData","guestSpotlight","setGuestSpotlight","contracts","setContracts","returnGuests","setReturnGuests","paymentSummary","setPaymentSummary","messageQueue","setMessageQueue","pricingData","setPricingData","addonSummary","setAddonSummary","total_addon_revenue","items","waitlistEntries","setWaitlistEntries","tasks","setTasks","contactsRefreshToken","setContactsRefreshToken","appearance","setAppearance","dateRange","setDateRange","startDate","Date","getFullYear","getMonth","toISOString","endDate","persistAuth","session","localStorage","setItem","stringify","user","method","handleBypassLogin","name","email","handleLogout","_window$google","_window$google$accoun","removeItem","window","google","accounts","disableAutoSelect","saved","getItem","_parsed$user","parsed","params","URLSearchParams","location","search","get","rawAppearance","nextPalette","some","option","nextShadow","document","documentElement","dataset","theme","handleGoogleCredential","response","credential","avatar","picture","_window$google3","_window$google3$accou","current","isMounted","initializeButton","_window$google2","_window$google2$accou","innerHTML","initialize","client_id","callback","renderButton","size","shape","width","existingScript","querySelector","addEventListener","once","script","createElement","src","async","defer","googleIdentity","onload","onerror","head","appendChild","fetchCoreData","bookingsRes","summaryRes","Promise","all","data","console","fetchDashboardExtras","_pricingRes$data","statusRes","radarRes","guestTypeRes","returnGuestsRes","contractsRes","paymentRes","messagesRes","pricingRes","addonsRes","returnGuestRows","recommendations","fetchWaitlist","fetchTasks","refreshDashboard","handleAddBooking","bookingData","post","alert","handleDeleteBooking","confirm","delete","handleStatusUpdate","bookingId","newStatus","booking","find","b","put","_objectSpread","status","handlePaymentUpdate","paymentData","handleAddWaitlistEntry","entry","handleWaitlistStatusChange","handleConvertWaitlist","revenueValue","prompt","guest_name","revenue","parseFloat","area_rented","preferred_area","nights","handleDeleteWaitlistEntry","entryId","handleAddTask","taskData","handleUpdateTask","taskId","updates","handleDeleteTask","summaryStats","total_bookings","total_revenue","return_bookings","activeBookings","filter","includes","length","overdueCount","overdue_count","waitlistOpenCount","dateLabel","className","children","ref","onClick","toFixed","tab","guestValueSpotlight","pricingRecommendations","statusOptions","onDelete","onStatusChange","onSubmit","onUpdatePayment","entries","onAddEntry","onConvert","onAddTask","onUpdateTask","onDeleteTask","refreshToken","htmlFor","onChange","event","target","onRefreshData","onRefreshTasks","onRefreshContacts","prev","onRefreshWaitlist","type","e","disabled"],"sources":["/home/rob/.openclaw/workspace/campsite-crm/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport './styles/InsightsExtras.css';\nimport Dashboard from './components/Dashboard';\nimport BookingForm from './components/BookingForm';\nimport BookingsTable from './components/BookingsTable';\nimport ReturnGuestAnalysis from './components/ReturnGuestAnalysis';\nimport AreaUtilization from './components/AreaUtilization';\nimport PaymentCenter from './components/PaymentCenter';\nimport WaitlistManager from './components/WaitlistManager';\nimport TaskManager from './components/TaskManager';\nimport IntegrationHub from './components/IntegrationHub';\nimport BookingAssistant from './components/BookingAssistant';\nimport Contacts from './components/Contacts';\n\nconst BOOKING_STATUS_OPTIONS = [\n  { value: 'active', label: 'Active' },\n  { value: 'confirmed', label: 'Confirmed' },\n  { value: 'checked-in', label: 'Checked In' },\n  { value: 'checked-out', label: 'Checked Out' },\n  { value: 'canceled', label: 'Canceled' },\n  { value: 'no-show', label: 'No-Show' }\n];\n\nconst WAITLIST_STATUS_OPTIONS = [\n  { value: 'waiting', label: 'Waiting' },\n  { value: 'contacted', label: 'Contacted' },\n  { value: 'converted', label: 'Converted' },\n  { value: 'closed', label: 'Closed' }\n];\n\nconst TABS = [\n  { id: 'dashboard', label: 'Dashboard', icon: 'ðŸ“Š' },\n  { id: 'bookings', label: 'Bookings', icon: 'ðŸ“…' },\n  { id: 'add', label: 'New Booking', icon: 'âž•' },\n  { id: 'payments', label: 'Payments', icon: 'ðŸ’³' },\n  { id: 'tasks', label: 'Tasks', icon: 'âœ…' },\n  { id: 'waitlist', label: 'Waitlist', icon: 'ðŸ“' },\n  { id: 'assistant', label: 'Booking Assistant', icon: 'ðŸ§­' },\n  { id: 'returns', label: 'Return Guests', icon: 'ðŸ”„' },\n  { id: 'areas', label: 'Area Usage', icon: 'ðŸ•ï¸' },\n  { id: 'contacts', label: 'Contacts', icon: 'ðŸ‘¥' },\n  { id: 'settings', label: 'Settings', icon: 'âš™ï¸' }\n];\n\nconst AUTH_STORAGE_KEY = 'campsite_crm_auth_v1';\nconst APPEARANCE_STORAGE_KEY = 'campsite_crm_appearance_v1';\nconst DEFAULT_APPEARANCE = {\n  palette: 'turquoise-sunrise',\n  shadow: 'lush'\n};\n\nconst APPEARANCE_OPTIONS = [\n  { value: 'turquoise-sunrise', label: 'Turquoise Sunrise' },\n  { value: 'ocean-breeze', label: 'Ocean Breeze' },\n  { value: 'mint-current', label: 'Mint Current' },\n  { value: 'coral-glow', label: 'Coral Glow' },\n  { value: 'sunset-citrus', label: 'Sunset Citrus' },\n  { value: 'lavender-dusk', label: 'Lavender Dusk' },\n  { value: 'berry-pop', label: 'Berry Pop' },\n  { value: 'forest-mist', label: 'Forest Mist' },\n  { value: 'midnight-teal', label: 'Midnight Teal' },\n  { value: 'golden-hour', label: 'Golden Hour' },\n  { value: 'slate-ice', label: 'Slate Ice' },\n  { value: 'rosewater', label: 'Rosewater' },\n  { value: 'ember-night', label: 'Ember Night' }\n];\n\nconst SHADOW_OPTIONS = [\n  { value: 'soft', label: 'Soft shadows' },\n  { value: 'lush', label: 'Lush shadows' },\n  { value: 'bold', label: 'Bold shadows' }\n];\n\nconst decodeJwtPayload = (token) => {\n  try {\n    const payload = token.split('.')[1];\n    if (!payload) return null;\n    const base64 = payload.replace(/-/g, '+').replace(/_/g, '/');\n    const json = decodeURIComponent(\n      atob(base64)\n        .split('')\n        .map((char) => `%${(`00${char.charCodeAt(0).toString(16)}`).slice(-2)}`)\n        .join('')\n    );\n    return JSON.parse(json);\n  } catch (error) {\n    return null;\n  }\n};\n\nfunction App() {\n  const googleClientId = process.env.REACT_APP_GOOGLE_CLIENT_ID || '';\n  const googleButtonRef = useRef(null);\n\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [authUser, setAuthUser] = useState(null);\n  const [authMethod, setAuthMethod] = useState('');\n  const [authError, setAuthError] = useState('');\n  const [activeTab, setActiveTab] = useState('dashboard');\n  const [bookings, setBookings] = useState([]);\n  const [summary, setSummary] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const [statusSummary, setStatusSummary] = useState([]);\n  const [arrivalRadar, setArrivalRadar] = useState([]);\n  const [guestTypeData, setGuestTypeData] = useState([]);\n  const [guestSpotlight, setGuestSpotlight] = useState([]);\n  const [contracts, setContracts] = useState([]);\n  const [returnGuests, setReturnGuests] = useState([]);\n  const [paymentSummary, setPaymentSummary] = useState(null);\n  const [messageQueue, setMessageQueue] = useState([]);\n  const [pricingData, setPricingData] = useState([]);\n  const [addonSummary, setAddonSummary] = useState({ total_addon_revenue: 0, items: [] });\n  const [waitlistEntries, setWaitlistEntries] = useState([]);\n  const [tasks, setTasks] = useState([]);\n  const [contactsRefreshToken, setContactsRefreshToken] = useState(0);\n  const [appearance, setAppearance] = useState(DEFAULT_APPEARANCE);\n\n  const [dateRange, setDateRange] = useState({\n    startDate: new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString().split('T')[0],\n    endDate: new Date().toISOString().split('T')[0]\n  });\n\n  const persistAuth = useCallback((session) => {\n    localStorage.setItem(AUTH_STORAGE_KEY, JSON.stringify(session));\n    setIsAuthenticated(true);\n    setAuthUser(session.user);\n    setAuthMethod(session.method);\n    setAuthError('');\n  }, []);\n\n  const handleBypassLogin = useCallback(() => {\n    persistAuth({\n      method: 'bypass',\n      user: {\n        name: 'Beta Tester',\n        email: ''\n      }\n    });\n  }, [persistAuth]);\n\n  const handleLogout = useCallback(() => {\n    localStorage.removeItem(AUTH_STORAGE_KEY);\n    setIsAuthenticated(false);\n    setAuthUser(null);\n    setAuthMethod('');\n    setAuthError('');\n    if (window.google?.accounts?.id) {\n      window.google.accounts.id.disableAutoSelect();\n    }\n  }, []);\n\n  useEffect(() => {\n    const saved = localStorage.getItem(AUTH_STORAGE_KEY);\n    if (!saved) return;\n    try {\n      const parsed = JSON.parse(saved);\n      if (parsed?.user?.name && parsed?.method) {\n        setIsAuthenticated(true);\n        setAuthUser(parsed.user);\n        setAuthMethod(parsed.method);\n      }\n    } catch (error) {\n      localStorage.removeItem(AUTH_STORAGE_KEY);\n    }\n  }, []);\n\n  // Handle return from Gmail OAuth flow â€” switch to Settings tab so the user sees the result.\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    if (params.get('gmail_connected') === '1' || params.get('gmail_error')) {\n      setActiveTab('settings');\n    }\n  }, []);\n\n  useEffect(() => {\n    const rawAppearance = localStorage.getItem(APPEARANCE_STORAGE_KEY);\n    if (!rawAppearance) return;\n\n    try {\n      const parsed = JSON.parse(rawAppearance);\n      const nextPalette = APPEARANCE_OPTIONS.some((option) => option.value === parsed?.palette)\n        ? parsed.palette\n        : DEFAULT_APPEARANCE.palette;\n      const nextShadow = SHADOW_OPTIONS.some((option) => option.value === parsed?.shadow)\n        ? parsed.shadow\n        : DEFAULT_APPEARANCE.shadow;\n      setAppearance({ palette: nextPalette, shadow: nextShadow });\n    } catch (error) {\n      localStorage.removeItem(APPEARANCE_STORAGE_KEY);\n    }\n  }, []);\n\n  useEffect(() => {\n    document.documentElement.dataset.theme = appearance.palette;\n    document.documentElement.dataset.shadow = appearance.shadow;\n    localStorage.setItem(APPEARANCE_STORAGE_KEY, JSON.stringify(appearance));\n  }, [appearance]);\n\n  const handleGoogleCredential = useCallback((response) => {\n    const payload = decodeJwtPayload(response?.credential || '');\n    if (!payload?.email) {\n      setAuthError('Google sign-in returned an invalid token. Try again.');\n      return;\n    }\n\n    persistAuth({\n      method: 'google',\n      user: {\n        name: payload.name || payload.email,\n        email: payload.email,\n        avatar: payload.picture || ''\n      }\n    });\n  }, [persistAuth]);\n\n  useEffect(() => {\n    if (isAuthenticated || !googleClientId || !googleButtonRef.current) return;\n\n    let isMounted = true;\n    const initializeButton = () => {\n      if (!isMounted || !window.google?.accounts?.id || !googleButtonRef.current) return;\n      googleButtonRef.current.innerHTML = '';\n      window.google.accounts.id.initialize({\n        client_id: googleClientId,\n        callback: handleGoogleCredential\n      });\n      window.google.accounts.id.renderButton(googleButtonRef.current, {\n        theme: 'outline',\n        size: 'large',\n        shape: 'pill',\n        width: 260\n      });\n    };\n\n    if (window.google?.accounts?.id) {\n      initializeButton();\n      return () => {\n        isMounted = false;\n      };\n    }\n\n    const existingScript = document.querySelector('script[data-google-identity]');\n    if (existingScript) {\n      existingScript.addEventListener('load', initializeButton, { once: true });\n      return () => {\n        isMounted = false;\n      };\n    }\n\n    const script = document.createElement('script');\n    script.src = 'https://accounts.google.com/gsi/client';\n    script.async = true;\n    script.defer = true;\n    script.dataset.googleIdentity = 'true';\n    script.onload = initializeButton;\n    script.onerror = () => {\n      setAuthError('Unable to load Google sign-in right now.');\n    };\n    document.head.appendChild(script);\n\n    return () => {\n      isMounted = false;\n    };\n  }, [googleClientId, handleGoogleCredential, isAuthenticated]);\n\n  const fetchCoreData = async () => {\n    setLoading(true);\n    try {\n      const [bookingsRes, summaryRes] = await Promise.all([\n        axios.get('/api/bookings', { params: dateRange }),\n        axios.get('/api/dashboard/summary', { params: dateRange })\n      ]);\n      setBookings(bookingsRes.data || []);\n      setSummary(summaryRes.data || {});\n    } catch (error) {\n      console.error('Error fetching core data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchDashboardExtras = async () => {\n    try {\n      const [\n        statusRes,\n        radarRes,\n        guestTypeRes,\n        returnGuestsRes,\n        contractsRes,\n        paymentRes,\n        messagesRes,\n        pricingRes,\n        addonsRes\n      ] = await Promise.all([\n        axios.get('/api/bookings/status-summary', { params: dateRange }),\n        axios.get('/api/bookings/arrival-radar'),\n        axios.get('/api/bookings/by-guest-type', { params: dateRange }),\n        axios.get('/api/return-guests'),\n        axios.get('/api/contracts/active'),\n        axios.get('/api/payments/summary', { params: dateRange }),\n        axios.get('/api/messages/upcoming'),\n        axios.get('/api/pricing/recommendations'),\n        axios.get('/api/addons/summary', { params: dateRange })\n      ]);\n\n      const returnGuestRows = returnGuestsRes.data || [];\n\n      setStatusSummary(statusRes.data || []);\n      setArrivalRadar(radarRes.data || []);\n      setGuestTypeData(guestTypeRes.data || []);\n      setGuestSpotlight(returnGuestRows.slice(0, 3));\n      setReturnGuests(returnGuestRows);\n      setContracts(contractsRes.data || []);\n      setPaymentSummary(paymentRes.data || null);\n      setMessageQueue(messagesRes.data || []);\n      setPricingData(pricingRes.data?.recommendations || []);\n      setAddonSummary(addonsRes.data || { total_addon_revenue: 0, items: [] });\n    } catch (error) {\n      console.error('Error fetching dashboard extras:', error);\n    }\n  };\n\n  const fetchWaitlist = async () => {\n    try {\n      const response = await axios.get('/api/waitlist');\n      setWaitlistEntries(response.data || []);\n    } catch (error) {\n      console.error('Error fetching waitlist:', error);\n    }\n  };\n\n  const fetchTasks = async () => {\n    try {\n      const response = await axios.get('/api/tasks');\n      setTasks(response.data || []);\n    } catch (error) {\n      console.error('Error fetching tasks:', error);\n    }\n  };\n\n  const refreshDashboard = () => {\n    fetchCoreData();\n    fetchDashboardExtras();\n  };\n\n  useEffect(() => {\n    refreshDashboard();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dateRange]);\n\n  useEffect(() => {\n    if (activeTab === 'waitlist') {\n      fetchWaitlist();\n    }\n    if (activeTab === 'tasks') {\n      fetchTasks();\n    }\n  }, [activeTab]);\n\n  const handleAddBooking = async (bookingData) => {\n    try {\n      await axios.post('/api/bookings', bookingData);\n      refreshDashboard();\n      alert('Booking added successfully! ðŸŽ‰');\n    } catch (error) {\n      console.error('Error adding booking:', error);\n      alert('Failed to add booking');\n    }\n  };\n\n  const handleDeleteBooking = async (id) => {\n    if (window.confirm('Are you sure you want to delete this booking?')) {\n      try {\n        await axios.delete(`/api/bookings/${id}`);\n        refreshDashboard();\n        alert('Booking deleted');\n      } catch (error) {\n        console.error('Error deleting booking:', error);\n      }\n    }\n  };\n\n  const handleStatusUpdate = async (bookingId, newStatus) => {\n    const booking = bookings.find((b) => b.id === bookingId);\n    if (!booking) return;\n\n    try {\n      await axios.put(`/api/bookings/${bookingId}`, {\n        ...booking,\n        status: newStatus\n      });\n      refreshDashboard();\n    } catch (error) {\n      console.error('Error updating booking status:', error);\n      alert('Unable to update booking status right now');\n    }\n  };\n\n  const handlePaymentUpdate = async (bookingId, paymentData) => {\n    const booking = bookings.find((b) => b.id === bookingId);\n    if (!booking) return;\n\n    try {\n      await axios.put(`/api/bookings/${bookingId}`, {\n        ...booking,\n        ...paymentData\n      });\n      refreshDashboard();\n    } catch (error) {\n      console.error('Error updating payment details:', error);\n      alert('Unable to update payment details right now');\n    }\n  };\n\n  const handleAddWaitlistEntry = async (entry) => {\n    try {\n      await axios.post('/api/waitlist', entry);\n      fetchWaitlist();\n      alert('Waitlist entry added');\n    } catch (error) {\n      console.error('Error adding waitlist entry:', error);\n      alert('Unable to add waitlist entry right now');\n    }\n  };\n\n  const handleWaitlistStatusChange = async (entry, status) => {\n    try {\n      await axios.put(`/api/waitlist/${entry.id}`, { ...entry, status });\n      fetchWaitlist();\n    } catch (error) {\n      console.error('Error updating waitlist status:', error);\n      alert('Unable to update waitlist status right now');\n    }\n  };\n\n  const handleConvertWaitlist = async (entry) => {\n    const revenueValue = window.prompt(`Revenue for ${entry.guest_name}?`, '0');\n    if (revenueValue === null) return;\n\n    try {\n      await axios.post(`/api/waitlist/${entry.id}/convert`, {\n        revenue: parseFloat(revenueValue) || 0,\n        area_rented: entry.preferred_area || 'tent',\n        nights: 1,\n        status: 'confirmed'\n      });\n      fetchWaitlist();\n      refreshDashboard();\n      alert('Converted to booking');\n    } catch (error) {\n      console.error('Error converting waitlist entry:', error);\n      alert('Unable to convert waitlist entry right now');\n    }\n  };\n\n  const handleDeleteWaitlistEntry = async (entryId) => {\n    if (!window.confirm('Delete this waitlist entry?')) return;\n\n    try {\n      await axios.delete(`/api/waitlist/${entryId}`);\n      fetchWaitlist();\n    } catch (error) {\n      console.error('Error deleting waitlist entry:', error);\n      alert('Unable to delete waitlist entry right now');\n    }\n  };\n\n  const handleAddTask = async (taskData) => {\n    try {\n      await axios.post('/api/tasks', taskData);\n      fetchTasks();\n    } catch (error) {\n      console.error('Error adding task:', error);\n      alert('Unable to add task right now');\n    }\n  };\n\n  const handleUpdateTask = async (taskId, updates) => {\n    try {\n      await axios.put(`/api/tasks/${taskId}`, updates);\n      fetchTasks();\n    } catch (error) {\n      console.error('Error updating task:', error);\n      alert('Unable to update task right now');\n    }\n  };\n\n  const handleDeleteTask = async (taskId) => {\n    if (!window.confirm('Delete this task?')) return;\n    try {\n      await axios.delete(`/api/tasks/${taskId}`);\n      fetchTasks();\n    } catch (error) {\n      console.error('Error deleting task:', error);\n      alert('Unable to delete task right now');\n    }\n  };\n\n  const summaryStats = summary || {\n    total_bookings: 0,\n    total_revenue: 0,\n    return_bookings: 0\n  };\n\n  const activeBookings = bookings.filter((booking) =>\n    ['active', 'confirmed', 'checked-in'].includes(booking.status)\n  ).length;\n  const overdueCount = paymentSummary?.overdue_count || 0;\n  const waitlistOpenCount = waitlistEntries.filter((entry) => entry.status === 'waiting').length;\n  const dateLabel = `${dateRange.startDate} to ${dateRange.endDate}`;\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"auth-shell\">\n        <div className=\"auth-card\">\n          <h1>Campsite CRM</h1>\n          <p>Sign in with Google or use bypass mode while beta testing.</p>\n\n          {googleClientId ? (\n            <div className=\"google-signin-slot\" ref={googleButtonRef} />\n          ) : (\n            <p className=\"auth-note\">\n              Google OAuth not configured. Add <code>REACT_APP_GOOGLE_CLIENT_ID</code> in frontend env.\n            </p>\n          )}\n\n          <button className=\"bypass-btn\" onClick={handleBypassLogin}>\n            Continue with Beta Bypass\n          </button>\n\n          {authError && <p className=\"auth-error\">{authError}</p>}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"app\">\n      <header className=\"app-header\">\n        <div className=\"header-left\">\n          <h1>Campsite CRM</h1>\n          <p>Bookings, payments, and guest operations</p>\n        </div>\n        <div className=\"auth-session\">\n          <div className=\"auth-session-meta\">\n            <strong>{authUser?.name || 'Signed In'}</strong>\n            <span>{authMethod === 'google' ? 'Google OAuth' : 'Bypass Mode'}</span>\n          </div>\n          <button className=\"logout-btn\" onClick={handleLogout}>\n            Logout\n          </button>\n        </div>\n        <div className=\"header-kpis\">\n          <div className=\"header-kpi\">\n            <span>Bookings</span>\n            <strong>{summaryStats.total_bookings || 0}</strong>\n          </div>\n          <div className=\"header-kpi\">\n            <span>Revenue</span>\n            <strong>${(summaryStats.total_revenue || 0).toFixed(0)}</strong>\n          </div>\n          <div className=\"header-kpi\">\n            <span>Returns</span>\n            <strong>{summaryStats.return_bookings || 0}</strong>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"app-layout\">\n        <aside className=\"sidebar\">\n          <div className=\"sidebar-title\">Workspace</div>\n          <nav className=\"main-nav\" aria-label=\"Main navigation\">\n            {TABS.map((tab) => (\n              <button\n                key={tab.id}\n                className={`nav-btn ${activeTab === tab.id ? 'active' : ''}`}\n                onClick={() => setActiveTab(tab.id)}\n              >\n                <span className=\"nav-icon\">{tab.icon}</span>\n                <span>{tab.label}</span>\n              </button>\n            ))}\n          </nav>\n          <div className=\"sidebar-footer\">\n            <div>\n              <span>Period</span>\n              <strong>{dateLabel}</strong>\n            </div>\n            <div>\n              <span>Open Waitlist</span>\n              <strong>{waitlistOpenCount}</strong>\n            </div>\n          </div>\n        </aside>\n\n        <section className=\"workspace\">\n          <main className=\"app-content\">\n            {activeTab === 'dashboard' && (\n              <Dashboard\n                summary={summary}\n                bookings={bookings}\n                loading={loading}\n                statusSummary={statusSummary}\n                arrivalRadar={arrivalRadar}\n                guestValueSpotlight={guestSpotlight}\n                guestTypeData={guestTypeData}\n                contracts={contracts}\n                paymentSummary={paymentSummary}\n                messageQueue={messageQueue}\n                pricingRecommendations={pricingData}\n                addonSummary={addonSummary}\n              />\n            )}\n\n            {activeTab === 'bookings' && (\n              <BookingsTable\n                bookings={bookings}\n                statusOptions={BOOKING_STATUS_OPTIONS}\n                onDelete={handleDeleteBooking}\n                onStatusChange={handleStatusUpdate}\n                loading={loading}\n              />\n            )}\n\n            {activeTab === 'add' && (\n              <BookingForm onSubmit={handleAddBooking} statusOptions={BOOKING_STATUS_OPTIONS} />\n            )}\n\n            {activeTab === 'payments' && (\n              <PaymentCenter\n                bookings={bookings}\n                paymentSummary={paymentSummary}\n                onUpdatePayment={handlePaymentUpdate}\n              />\n            )}\n\n            {activeTab === 'waitlist' && (\n              <WaitlistManager\n                entries={waitlistEntries}\n                statusOptions={WAITLIST_STATUS_OPTIONS}\n                onAddEntry={handleAddWaitlistEntry}\n                onStatusChange={handleWaitlistStatusChange}\n                onConvert={handleConvertWaitlist}\n                onDelete={handleDeleteWaitlistEntry}\n              />\n            )}\n\n            {activeTab === 'tasks' && (\n              <TaskManager\n                tasks={tasks}\n                onAddTask={handleAddTask}\n                onUpdateTask={handleUpdateTask}\n                onDeleteTask={handleDeleteTask}\n              />\n            )}\n\n            {activeTab === 'assistant' && <BookingAssistant />}\n\n            {activeTab === 'returns' && (\n              <ReturnGuestAnalysis returnGuests={returnGuests} loading={loading} />\n            )}\n\n            {activeTab === 'areas' && (\n              <AreaUtilization dateRange={dateRange} />\n            )}\n\n            {activeTab === 'contacts' && (\n              <Contacts refreshToken={contactsRefreshToken} />\n            )}\n\n            {activeTab === 'settings' && (\n              <>\n                <div className=\"card appearance-settings-card\">\n                  <div className=\"appearance-settings-header\">\n                    <h3>Appearance</h3>\n                    <p>Choose from vibrant gradient themes to match your style.</p>\n                  </div>\n\n                  <div className=\"form-row\">\n                    <div className=\"form-group\">\n                      <label htmlFor=\"appearance-palette\">Color Theme</label>\n                      <select\n                        id=\"appearance-palette\"\n                        value={appearance.palette}\n                        onChange={(event) => setAppearance((current) => ({ ...current, palette: event.target.value }))}\n                      >\n                        {APPEARANCE_OPTIONS.map((option) => (\n                          <option key={option.value} value={option.value}>{option.label}</option>\n                        ))}\n                      </select>\n                    </div>\n                    <div className=\"form-group\">\n                      <label htmlFor=\"appearance-shadow\">Shadow Depth</label>\n                      <select\n                        id=\"appearance-shadow\"\n                        value={appearance.shadow}\n                        onChange={(event) => setAppearance((current) => ({ ...current, shadow: event.target.value }))}\n                      >\n                        {SHADOW_OPTIONS.map((option) => (\n                          <option key={option.value} value={option.value}>{option.label}</option>\n                        ))}\n                      </select>\n                    </div>\n                  </div>\n\n                  <div className=\"appearance-preview\">\n                    <div className=\"appearance-preview-gradient\">\n                      <strong>Live Preview</strong>\n                      <span>Header + cards update instantly</span>\n                    </div>\n                  </div>\n                </div>\n\n                <IntegrationHub\n                  onRefreshData={refreshDashboard}\n                  onRefreshTasks={fetchTasks}\n                  onRefreshContacts={() => setContactsRefreshToken((prev) => prev + 1)}\n                  onRefreshWaitlist={fetchWaitlist}\n                />\n              </>\n            )}\n          </main>\n        </section>\n\n        <aside className=\"right-rail\">\n          <div className=\"rail-card\">\n            <h3>Filters</h3>\n            <div className=\"date-range-selector\">\n              <div className=\"date-input-group\">\n                <label htmlFor=\"start-date\">From</label>\n                <input\n                  id=\"start-date\"\n                  type=\"date\"\n                  value={dateRange.startDate}\n                  onChange={(e) => setDateRange({ ...dateRange, startDate: e.target.value })}\n                />\n              </div>\n              <div className=\"date-input-group\">\n                <label htmlFor=\"end-date\">To</label>\n                <input\n                  id=\"end-date\"\n                  type=\"date\"\n                  value={dateRange.endDate}\n                  onChange={(e) => setDateRange({ ...dateRange, endDate: e.target.value })}\n                />\n              </div>\n              <button className=\"refresh-btn\" onClick={refreshDashboard} disabled={loading}>\n                {loading ? 'Loading...' : 'Refresh Data'}\n              </button>\n            </div>\n          </div>\n\n          <div className=\"rail-card\">\n            <h3>Live Ops</h3>\n            <div className=\"rail-stats\">\n              <div className=\"rail-stat\">\n                <span>Active Stays</span>\n                <strong>{activeBookings}</strong>\n              </div>\n              <div className=\"rail-stat\">\n                <span>Overdue Payments</span>\n                <strong>{overdueCount}</strong>\n              </div>\n              <div className=\"rail-stat\">\n                <span>Waitlist Queue</span>\n                <strong>{waitlistEntries.length}</strong>\n              </div>\n              <div className=\"rail-stat\">\n                <span>Return Guests</span>\n                <strong>{returnGuests.length}</strong>\n              </div>\n            </div>\n          </div>\n        </aside>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}